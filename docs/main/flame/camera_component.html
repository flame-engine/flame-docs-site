<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Camera component &#8212; Flame</title>
  <!-- Stylesheets -->
  <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
  <link rel="stylesheet" type="text/css" href="../_static/basic.css" />
  <link rel="stylesheet" type="text/css" href="../_static/flutter_app.css" />
  <link rel="stylesheet" type="text/css" href="../_static/flames.css" />
  <!-- Scripts -->
  <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
  <script src="../_static/jquery.js"></script>
  <script src="../_static/underscore.js"></script>
  <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
  <script src="../_static/doctools.js"></script>
  <script src="../_static/flutter_app.js"></script>
  <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
  <script>mermaid.initialize({startOnLoad:true});</script>
  <script src="../_static/versions.js"></script>
  <!--script src="searchindex.js" defer></script-->
  <!-- Links -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,400;0,700;1,400;1,700&display=swap">
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/fontawesome/fa-brands-400.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/fontawesome/fa-solid-900.woff2">
  <link rel="stylesheet" href="../_static/fontawesome/all.min.css">
  <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <link rel="index" title="Index" href="../genindex.html" />
  <link rel="search" title="Search" href="../search.html" />
  <link rel="next" title="Inputs" href="inputs/inputs.html" />
  <link rel="prev" title="Camera and Viewport" href="camera_and_viewport.html" />
</head>

<body data-spy="scroll" data-target="#toc-local" data-offset="80">

<div class="top-bar">
  <button id="menu-button" class="btn" title="Toggle menu"><i class="fa fa-bars"></i></button>
  <script type="text/javascript">
    jQuery(function(){
      $("#menu-button").click(function() {
        $(this).toggleClass("active");
        $(".sidebar-left-area").toggleClass("active");
      });
    });
  </script>

  <a href="../index.html" class="logo_image">
    <img src="../_static/logo_flame.png">
  </a>

  <div class="highlight-box" role="alert" style="display:none">
    <div>
      <div class="title">highlighted:</div>
      <div class="content" id="highlight-content"></div>
    </div>
    <button type="button" class="close" data-dismiss="alert" aria-label="Dismiss">×</button>
  </div>
  <div class="expander"></div>

  <div class="versions-placeholder"></div>
  <a href="https://discord.com/channels/509714518008528896/516639688581316629" id="discord-button"
     class="btn" title="Flame Discord channel">
    <i class="fab fa-discord"></i>
  </a>
  <a href="https://github.com/flame-engine/flame/" id="github-button" class="btn"
     title="GitHub repository">
    <i class="fab fa-github"></i>
  </a>
</div>

<div class="sidebar-left-area">
  <div class="sidebar-left-bg"></div>
  <div class="sidebar-left">
    <div class="searchbox" role="search">
      <form id="search-form" action="../search.html" method="get">
        <i class="icon fa fa-search"></i>
        <input type="search" class="form-control" id="search-input" name="q"
               placeholder="Search the docs..." autocomplete="off" />
      </form>
    </div>
    <div class="nav-left" role="navigation" aria-label="Main">
      <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="flame.html">flame</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="structure.html">File structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="game_widget.html">GameWidget</a></li>
<li class="toctree-l2"><a class="reference internal" href="game.html">Game loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="components.html">Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="platforms.html">Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="collision_detection.html">Collision detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="effects.html">Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="camera_and_viewport.html">Camera &amp; Viewport</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Camera component</a></li>
<li class="toctree-l2"><a class="reference internal" href="inputs/inputs.html">Inputs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="inputs/tap-events.html">Tap events</a></li>
<li class="toctree-l3"><a class="reference internal" href="inputs/drag-events.html">Drag events</a></li>
<li class="toctree-l3"><a class="reference internal" href="inputs/gesture-input.html">Gesture input</a></li>
<li class="toctree-l3"><a class="reference internal" href="inputs/keyboard-input.html">Keyboard input</a></li>
<li class="toctree-l3"><a class="reference internal" href="inputs/other-inputs.html">Other inputs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="rendering/rendering.html">Rendering</a><ul>
<li class="toctree-l3"><a class="reference internal" href="rendering/images.html">Images, sprites and animations</a></li>
<li class="toctree-l3"><a class="reference internal" href="rendering/text.html">Text rendering</a></li>
<li class="toctree-l3"><a class="reference internal" href="rendering/palette.html">Colors and palette</a></li>
<li class="toctree-l3"><a class="reference internal" href="rendering/particles.html">Particles</a></li>
<li class="toctree-l3"><a class="reference internal" href="rendering/layers.html">Layers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="other/other.html">Other</a><ul>
<li class="toctree-l3"><a class="reference internal" href="other/debug.html">Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="other/util.html">Utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="other/widgets.html">Widgets</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../flame_audio/flame_audio.html">flame_audio</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../flame_audio/audio.html">General audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flame_audio/bgm.html">Background music</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flame_audio/audio_pool.html">AudioPool</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../flame_forge2d/flame_forge2d.html">flame_forge2d</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../flame_forge2d/forge2d.html">Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/bare_flame_game.html">Bare Flame game</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/klondike/klondike.html">Klondike</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/klondike/step1.html">1. Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/klondike/step2.html">2. Scaffolding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/klondike/step3.html">3. Cards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/klondike/step4.html">4. Gameplay</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/klondike/tbc.html">[To be continued]...</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../other_modules/other_modules.html">Other Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../other_modules/oxygen.html">Oxygen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other_modules/tiled.html">Tiled</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other_modules/splash_screen.html">Splash screen</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development/development.html">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/documentation.html">Documentation</a></li>
</ul>
</li>
</ul>

    </div>
  </div>
</div>

<div class="main-area">
  <div class="document-wrapper">
    <div class="document" role="main">
      
  <section class="tex2jax_ignore mathjax_ignore" id="camera-component">
<h1>Camera component<a class="headerlink" href="#camera-component" title="Permalink to this heading">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This document describes a new experimental API. The more traditional approach
for handling a camera is described in <a class="reference internal" href="camera_and_viewport.html"><span class="doc std std-doc">Camera and Viewport</span></a>.</p>
</div>
<p>Camera-as-a-component is an alternative way of structuring a game, an approach
that allows more flexibility in placing the camera, or even having more than
one camera simultaneously.</p>
<p>In order to understand how this approach works, imagine that your game world is
an entity that exists <em>somewhere</em> independently from your application. Imagine
that your game is merely a window through which you can look into that world.
That you can close that window at any moment, and the game world would still be
there. Or, on the contrary, you can open multiple windows that all look at the
same world (or different worlds) at the same time.</p>
<p>With this mindset, we can now understand how camera-as-a-component works.</p>
<p>First, there is the <a class="reference internal" href="#world"><span class="std std-doc">World</span></a> class, which contains all components that are
inside your game world. The <code class="docutils literal notranslate"><span class="pre">World</span></code> component can be mounted anywhere, for
example at the root of your game class.</p>
<p>Then, a <a class="reference internal" href="#cameracomponent"><span class="std std-doc">CameraComponent</span></a> class that “looks at” the <code class="docutils literal notranslate"><span class="pre">World</span></code>. The
<code class="docutils literal notranslate"><span class="pre">CameraComponent</span></code> has a <code class="docutils literal notranslate"><span class="pre">Viewport</span></code> and a <code class="docutils literal notranslate"><span class="pre">Viewfinder</span></code> inside, allowing both the
flexibility of rendering the world at any place on the screen, and also control
the viewing location and angle.</p>
<section id="world">
<h2>World<a class="headerlink" href="#world" title="Permalink to this heading">¶</a></h2>
<p>This component should be used to host all other components that comprise your
game world. The main property of the <code class="docutils literal notranslate"><span class="pre">World</span></code> class is that it does not render
through traditional means – instead, create one or more <a class="reference internal" href="#cameracomponent"><span class="std std-doc">CameraComponent</span></a>s
to “look at” the world.</p>
<p>A game can have multiple <code class="docutils literal notranslate"><span class="pre">World</span></code> instances that can be rendered either at the
same time, or at different times. For example, if you have two worlds A and B
and a single camera, then switching that camera’s target from A to B will
instantaneously switch the view to world B without having to unmount A and
then mount B.</p>
</section>
<section id="cameracomponent">
<h2>CameraComponent<a class="headerlink" href="#cameracomponent" title="Permalink to this heading">¶</a></h2>
<p>This is a component through which a <code class="docutils literal notranslate"><span class="pre">World</span></code> is rendered. It requires a
reference to a <code class="docutils literal notranslate"><span class="pre">World</span></code> instance during construction; however later the target
world can be replaced with another one. Multiple cameras can observe the same
world at the same time.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">CameraComponent</span></code> has two other components inside: a <a class="reference internal" href="#viewport"><span class="std std-doc">Viewport</span></a> and a
<a class="reference internal" href="#viewfinder"><span class="std std-doc">Viewfinder</span></a>. Unlike the <code class="docutils literal notranslate"><span class="pre">World</span></code> object, the camera owns the viewport and
the viewfinder, which means those components are children of the camera.</p>
<p>There is also a static property <code class="docutils literal notranslate"><span class="pre">CameraComponent.currentCamera</span></code> which is not
null only during the rendering stage, and it returns the camera object that
currently performs rendering. This is needed only for certain advanced use
cases where the rendering of a component depends on the camera settings. For
example, some components may decide to skip rendering themselves and their
children if they are outside of the camera’s viewport.</p>
</section>
<section id="viewport">
<h2>Viewport<a class="headerlink" href="#viewport" title="Permalink to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">Viewport</span></code> is a window through which the <code class="docutils literal notranslate"><span class="pre">World</span></code> is seen. That window
has a certain size, shape, and position on the screen. There are multiple kinds
of viewports available, and you can always implement your own.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Viewport</span></code> is a component, which means you can add other components to it.
These children components will be affected by the viewport’s position, but not
by its clip mask. Thus, if a viewport is a “window” into the game world, then
its children are things that you can put on top of the window.</p>
<p>Adding elements to the viewport is a convenient way to implement “HUD”
components.</p>
<p>The following viewports are available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MaxViewport</span></code> (default) – this viewport expands to the maximum size allowed
by the game, i.e. it will be equal to the size of the game canvas.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FixedSizeViewport</span></code> – a simple rectangular viewport with predefined size.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FixedAspectRatioViewport</span></code> – a rectangular viewport which expands to fit
into the game canvas, but preserving its aspect ratio.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CircularViewport</span></code> – a viewport in the shape of a circle, fixed size.</p></li>
</ul>
</section>
<section id="viewfinder">
<h2>Viewfinder<a class="headerlink" href="#viewfinder" title="Permalink to this heading">¶</a></h2>
<p>This part of the camera is responsible for knowing which location in the
underlying game world we are currently looking at. The <code class="docutils literal notranslate"><span class="pre">Viewfinder</span></code> also
controls the zoom level, and the rotation angle of the view.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">anchor</span></code> property of the viewfinder allows you to designate which point
inside the viewport serves as a “logical center” of the camera. For example,
in side-scrolling action games it is common to have the camera focused on the
main character who is displayed not in the center of the screen but closer to
the lower-left corner. This off-center position would be the “logical center”
of the camera, controlled by the viewfinder’s <code class="docutils literal notranslate"><span class="pre">anchor</span></code>.</p>
<p>Components added to the <code class="docutils literal notranslate"><span class="pre">Viewfinder</span></code> as children will be rendered as if they
were part of the world (but on top). It is more useful to add behavioral
components to the viewfinder, for example <a class="reference internal" href="effects.html"><span class="doc std std-doc">Effects</span></a> or other controllers.</p>
</section>
<section id="camera-controls">
<h2>Camera controls<a class="headerlink" href="#camera-controls" title="Permalink to this heading">¶</a></h2>
<p>There are several ways to modify camera’s settings at runtime:</p>
<ol class="simple">
<li><p>Do it manually. You can always override the <code class="docutils literal notranslate"><span class="pre">CameraComponent.update()</span></code>
method (or the same method on the viewfinder or viewport) and within it
change the viewfinder’s position or zoom as you see fit. This approach may
be viable in some circumstances, but in general it is not recommended.</p></li>
<li><p>Apply effects and/or behaviors to the camera’s <code class="docutils literal notranslate"><span class="pre">Viewfinder</span></code> or <code class="docutils literal notranslate"><span class="pre">Viewport</span></code>.
The effects and behaviors are special kinds of components whose purpose is
to modify over time some property of a component that they attach to.</p></li>
<li><p>Use special camera functions such as <code class="docutils literal notranslate"><span class="pre">follow()</span></code> and <code class="docutils literal notranslate"><span class="pre">moveTo()</span></code>. Under the
hood, this approach uses the same effects/behaviors as in (2).</p></li>
</ol>
<p>Camera has several methods for controlling its behavior:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Camera.follow()</span></code> will force the camera to follow the provided target.
Optionally you can limit the maximum speed of movement of the camera, or
allow it to move horizontally/vertically only.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Camera.stop()</span></code> will undo the effect of the previous call and stop the camera
at its current position.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Camera.moveTo()</span></code> can be used to move the camera to the designated point on
the world map. If the camera was already following another component or
moving towards another point, those behaviors would be automatically
cancelled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Camera.setBounds()</span></code> allows you to add limits to where the camera is allowed to go. These limits
are in the form of a <code class="docutils literal notranslate"><span class="pre">Shape</span></code>, which is commonly a rectangle, but can also be any other shape.</p></li>
</ul>
</section>
<section id="comparison-to-the-traditional-camera">
<h2>Comparison to the traditional camera<a class="headerlink" href="#comparison-to-the-traditional-camera" title="Permalink to this heading">¶</a></h2>
<p>Compared to the normal <a class="reference internal" href="camera_and_viewport.html"><span class="doc std std-doc">Camera</span></a>, the <code class="docutils literal notranslate"><span class="pre">CameraComponent</span></code>
has several advantages and drawbacks.</p>
<p>Pros:</p>
<ul class="simple">
<li><p>Multiple cameras can be added to the game at the same time;</p></li>
<li><p>More flexibility in choosing the placement and the size of the viewport;</p></li>
<li><p>Switching camera from one world to another can happen instantaneously,
without having to unmount one world and then mount another;</p></li>
<li><p>Support rotation of the world view;</p></li>
<li><p>Effects can be applied either to the viewport, or to the viewfinder;</p></li>
<li><p>More flexible camera controllers.</p></li>
</ul>
</section>
</section>


    </div>
    <div class="copyright">
      The content on this page is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0 License</a>,
      and code samples under the <a href="https://raw.githubusercontent.com/flame-engine/flame/main/LICENSE">MIT License</a>.
    </div>
    <div class="prev-next-area">
      <a class="left-prev" id="prev-link" href="camera_and_viewport.html" title="previous page">
        <i class="fa fa-angle-left"></i>
        <div class="prev-next-info">
          <p class="prev-next-subtitle">Previous:</p>
          <p class="prev-next-title">Camera and Viewport</p>
        </div>
      </a>
      <div class='expander'></div>
      <a class="right-next" id="next-link" href="inputs/inputs.html" title="next page">
        <div class="prev-next-info">
          <p class="prev-next-subtitle">Next:</p>
          <p class="prev-next-title">Inputs</p>
        </div>
        <i class="fa fa-angle-right"></i>
      </a>
    </div>
  </div>

  <div class="sidebar-right">
    
    <div class="nav-right" role="navigation" aria-label="table of contents">
      <div id='toc-local' class='list-group'>
 <div class='header'><i class='fa fa-list'></i> Contents</div>
  <a href='#world' class='list-group-item level-1'>World</a>
  <a href='#cameracomponent' class='list-group-item level-1'>CameraComponent</a>
  <a href='#viewport' class='list-group-item level-1'>Viewport</a>
  <a href='#viewfinder' class='list-group-item level-1'>Viewfinder</a>
  <a href='#camera-controls' class='list-group-item level-1'>Camera controls</a>
  <a href='#comparison-to-the-traditional-camera' class='list-group-item level-1'>Comparison to the traditional camera</a>
</div>

    </div>
  </div>

  <div class="expander"></div>
</div>




</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Cards &#8212; Flame</title>
  <!-- Stylesheets -->
  <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
  <link rel="stylesheet" type="text/css" href="../../_static/basic.css" />
  <link rel="stylesheet" type="text/css" href="../../_static/flutter_app.css" />
  <link rel="stylesheet" type="text/css" href="../../_static/flames.css" />
  <!-- Scripts -->
  <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
  <script src="../../_static/jquery.js"></script>
  <script src="../../_static/underscore.js"></script>
  <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
  <script src="../../_static/doctools.js"></script>
  <script src="../../_static/flutter_app.js"></script>
  <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
  <script>mermaid.initialize({startOnLoad:true});</script>
  <script src="../../_static/versions.js"></script>
  <!--script src="searchindex.js" defer></script-->
  <!-- Links -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,400;0,700;1,400;1,700&display=swap">
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../../_static/fontawesome/fa-brands-400.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../../_static/fontawesome/fa-solid-900.woff2">
  <link rel="stylesheet" href="../../_static/fontawesome/all.min.css">
  <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <link rel="index" title="Index" href="../../genindex.html" />
  <link rel="search" title="Search" href="../../search.html" />
  <link rel="next" title="Gameplay" href="step4.html" />
  <link rel="prev" title="2. Scaffolding" href="step2.html" />
</head>

<body data-spy="scroll" data-target="#toc-local" data-offset="80">

<div class="top-bar">
  <button id="menu-button" class="btn" title="Toggle menu"><i class="fa fa-bars"></i></button>
  <script type="text/javascript">
    jQuery(function(){
      $("#menu-button").click(function() {
        $(this).toggleClass("active");
        $(".sidebar-left-area").toggleClass("active");
      });
    });
  </script>

  <a href="../../index.html" class="logo_image">
    <img src="../../_static/logo_flame.png">
  </a>

  <div class="highlight-box" role="alert" style="display:none">
    <div>
      <div class="title">highlighted:</div>
      <div class="content" id="highlight-content"></div>
    </div>
    <button type="button" class="close" data-dismiss="alert" aria-label="Dismiss">×</button>
  </div>
  <div class="expander"></div>

  <div class="versions-placeholder"></div>
  <a href="https://discord.com/channels/509714518008528896/516639688581316629" id="discord-button"
     class="btn" title="Flame Discord channel">
    <i class="fab fa-discord"></i>
  </a>
  <a href="https://github.com/flame-engine/flame/" id="github-button" class="btn"
     title="GitHub repository">
    <i class="fab fa-github"></i>
  </a>
</div>

<div class="sidebar-left-area">
  <div class="sidebar-left-bg"></div>
  <div class="sidebar-left">
    <div class="searchbox" role="search">
      <form id="search-form" action="../../search.html" method="get">
        <i class="icon fa fa-search"></i>
        <input type="search" class="form-control" id="search-input" name="q"
               placeholder="Search the docs..." autocomplete="off" />
      </form>
    </div>
    <div class="nav-left" role="navigation" aria-label="Main">
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../flame/flame.html">flame</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../flame/structure.html">File structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/game_widget.html">GameWidget</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/game.html">Game loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/components.html">Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/platforms.html">Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/collision_detection.html">Collision detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/effects.html">Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/camera_and_viewport.html">Camera &amp; Viewport</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/camera_component.html">Camera component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/inputs/inputs.html">Inputs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../flame/inputs/tap-events.html">Tap events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/inputs/drag-events.html">Drag events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/inputs/gesture-input.html">Gesture input</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/inputs/keyboard-input.html">Keyboard input</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/inputs/other-inputs.html">Other inputs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/rendering/rendering.html">Rendering</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../flame/rendering/images.html">Images, sprites and animations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/rendering/text.html">Text rendering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/rendering/palette.html">Colors and palette</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/rendering/particles.html">Particles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/rendering/layers.html">Layers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/other/other.html">Other</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../flame/other/debug.html">Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/other/util.html">Utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/other/widgets.html">Widgets</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../flame_audio/flame_audio.html">flame_audio</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../flame_audio/audio.html">General audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame_audio/bgm.html">Background music</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame_audio/audio_pool.html">AudioPool</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../flame_forge2d/flame_forge2d.html">flame_forge2d</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../flame_forge2d/forge2d.html">Overview</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bare_flame_game.html">Bare Flame game</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="klondike.html">Klondike</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="step1.html">1. Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="step2.html">2. Scaffolding</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">3. Cards</a></li>
<li class="toctree-l3"><a class="reference internal" href="step4.html">4. Gameplay</a></li>
<li class="toctree-l3"><a class="reference internal" href="tbc.html">[To be continued]...</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../other_modules/other_modules.html">Other Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../other_modules/oxygen.html">Oxygen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../other_modules/tiled.html">Tiled</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../other_modules/splash_screen.html">Splash screen</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../development/development.html">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../development/documentation.html">Documentation</a></li>
</ul>
</li>
</ul>

    </div>
  </div>
</div>

<div class="main-area">
  <div class="document-wrapper">
    <div class="document" role="main">
      
  <section class="tex2jax_ignore mathjax_ignore" id="cards">
<h1>Cards<a class="headerlink" href="#cards" title="Permalink to this heading">¶</a></h1>
<p>In this chapter we will begin implementing the most visible component in the
game – the <strong>Card</strong> component, which corresponds to a single real-life card.
There will be 52 <code class="docutils literal notranslate"><span class="pre">Card</span></code> objects in the game.</p>
<p>Each card has a <strong>rank</strong> (from 1 to 13, where 1 is an Ace, and 13 is a King)
and a <strong>suit</strong> (from 0 to 3: hearts ♥, diamonds ♦, clubs ♣, and spades ♠).
Also, each card will have a boolean flag <strong>faceUp</strong>, which controls whether
the card is currently facing up or down. This property is important both for
rendering, and for certain aspects of the gameplay logic.</p>
<p>The rank and the suit are simple properties of a card, they aren’t components,
so we need to make a decision on how to represent them. There are several
possibilities: either as a simple <code class="docutils literal notranslate"><span class="pre">int</span></code>, or as an <code class="docutils literal notranslate"><span class="pre">enum</span></code>, or as objects. The
choice will depend on what operations we need to perform with them. For the
rank, we will need to be able to tell whether one rank is one higher/lower than
another rank. Also, we need to produce the text label and a sprite corresponding
to the given rank. For suits, we need to know whether two suits are of different
colors, and also produce a text label and a sprite. Given these requirements,
I decided to represent both <code class="docutils literal notranslate"><span class="pre">Rank</span></code> and <code class="docutils literal notranslate"><span class="pre">Suit</span></code> as classes.</p>
<section id="suit">
<h2>Suit<a class="headerlink" href="#suit" title="Permalink to this heading">¶</a></h2>
<p>Create file <code class="docutils literal notranslate"><span class="pre">suit.dart</span></code> and declare an <code class="docutils literal notranslate"><span class="pre">&#64;immutable</span> <span class="pre">class</span> <span class="pre">Suit</span></code> there, with no
parent. The <code class="docutils literal notranslate"><span class="pre">&#64;immutable</span></code> annotation here is just a hint for us that the objects
of this class should not be modified after creation.</p>
<p>Next, we define the factory constructor for the class: <code class="docutils literal notranslate"><span class="pre">Suit.fromInt(i)</span></code>. We
use a factory constructor here in order to enforce the singleton pattern for
the class: instead of creating a new object every time, we are returning one
of the pre-built objects that we store in the <code class="docutils literal notranslate"><span class="pre">_singletons</span></code> list:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>  <span class="kd">factory</span> <span class="n">Suit</span><span class="p">.</span><span class="n">fromInt</span><span class="p">(</span><span class="kt">int</span> <span class="n">index</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="m">0</span> <span class="o">&amp;&amp;</span> <span class="n">index</span> <span class="o">&lt;=</span> <span class="m">3</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">_singletons</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
  <span class="p">}</span>
</pre></div>
</div>
<p>After that, there is a private constructor <code class="docutils literal notranslate"><span class="pre">Suit._()</span></code>. This constructor
initializes the main properties of each <code class="docutils literal notranslate"><span class="pre">Suit</span></code> object: the numeric value, the
string label, and the sprite object which we will later use to draw the suit
symbol on the canvas. The sprite object is initialized using the
<code class="docutils literal notranslate"><span class="pre">klondikeSprite()</span></code> function that we created in the previous chapter:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>  <span class="n">Suit</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">value</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">label</span><span class="p">,</span> <span class="kt">double</span> <span class="n">x</span><span class="p">,</span> <span class="kt">double</span> <span class="n">y</span><span class="p">,</span> <span class="kt">double</span> <span class="n">w</span><span class="p">,</span> <span class="kt">double</span> <span class="n">h</span><span class="p">)</span>
      <span class="o">:</span> <span class="n">sprite</span> <span class="o">=</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">);</span>

  <span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="p">;</span>
  <span class="kd">final</span> <span class="kt">String</span> <span class="n">label</span><span class="p">;</span>
  <span class="kd">final</span> <span class="n">Sprite</span> <span class="n">sprite</span><span class="p">;</span>
</pre></div>
</div>
<p>Then comes the static list of all <code class="docutils literal notranslate"><span class="pre">Suit</span></code> objects in the game. Note that we
define it as <code class="docutils literal notranslate"><span class="pre">late</span></code>, meaning that it will be only initialized the first time
it is needed. This is important: as we seen above, the constructor tries to
retrieve an image from the global cache, so it can only be invoked after the
image is loaded into the cache.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>  <span class="kd">static</span> <span class="kd">late</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Suit</span><span class="o">&gt;</span> <span class="n">_singletons</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">Suit</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="s1">&#39;♥&#39;</span><span class="p">,</span> <span class="m">1176</span><span class="p">,</span> <span class="m">17</span><span class="p">,</span> <span class="m">172</span><span class="p">,</span> <span class="m">183</span><span class="p">),</span>
    <span class="n">Suit</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="s1">&#39;♦&#39;</span><span class="p">,</span> <span class="m">973</span><span class="p">,</span> <span class="m">14</span><span class="p">,</span> <span class="m">177</span><span class="p">,</span> <span class="m">182</span><span class="p">),</span>
    <span class="n">Suit</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="s1">&#39;♣&#39;</span><span class="p">,</span> <span class="m">974</span><span class="p">,</span> <span class="m">226</span><span class="p">,</span> <span class="m">184</span><span class="p">,</span> <span class="m">172</span><span class="p">),</span>
    <span class="n">Suit</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="s1">&#39;♠&#39;</span><span class="p">,</span> <span class="m">1178</span><span class="p">,</span> <span class="m">220</span><span class="p">,</span> <span class="m">176</span><span class="p">,</span> <span class="m">182</span><span class="p">),</span>
  <span class="p">];</span>
</pre></div>
</div>
<p>The last four numbers in the constructor are the coordinates of the sprite
image within the spritesheet <code class="docutils literal notranslate"><span class="pre">klondike-sprites.png</span></code>. If you’re wondering how I
obtained these numbers, the answer is that I used a free online service
<a class="reference external" href="http://www.spritecow.com/">spritecow.com</a> – it’s a handy tool for locating sprites within a spritesheet.</p>
<p>Lastly, I have simple getters to determine the “color” of a suit. This will be
needed later when we need to enforce the rule that cards can only be placed
into columns by alternating colors.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>  <span class="c1">/// Hearts and Diamonds are red, while Clubs and Spades are black.</span>
  <span class="kt">bool</span> <span class="kd">get</span> <span class="n">isRed</span> <span class="o">=&gt;</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="m">1</span><span class="p">;</span>
  <span class="kt">bool</span> <span class="kd">get</span> <span class="n">isBlack</span> <span class="o">=&gt;</span> <span class="n">value</span> <span class="o">&gt;=</span> <span class="m">2</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="rank">
<h2>Rank<a class="headerlink" href="#rank" title="Permalink to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">Rank</span></code> class is very similar to <code class="docutils literal notranslate"><span class="pre">Suit</span></code>. The main difference is that <code class="docutils literal notranslate"><span class="pre">Rank</span></code>
contains two sprites instead of one, separately for ranks of “red” and “black”
colors. The full code for the <code class="docutils literal notranslate"><span class="pre">Rank</span></code> class is as follows:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="s1">&#39;package:flame/components.dart&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="s1">&#39;package:flame/flame.dart&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="s1">&#39;package:flutter/foundation.dart&#39;</span><span class="p">;</span>

<span class="nd">@immutable</span>
<span class="kd">class</span> <span class="nc">Rank</span> <span class="p">{</span>
  <span class="kd">factory</span> <span class="n">Rank</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="kt">int</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="m">1</span> <span class="o">&amp;&amp;</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="m">13</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">_singletons</span><span class="p">[</span><span class="n">value</span> <span class="o">-</span> <span class="m">1</span><span class="p">];</span>
  <span class="p">}</span>

  <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span>
    <span class="k">this</span><span class="p">.</span><span class="n">value</span><span class="p">,</span>
    <span class="k">this</span><span class="p">.</span><span class="n">label</span><span class="p">,</span>
    <span class="kt">double</span> <span class="n">x1</span><span class="p">,</span>
    <span class="kt">double</span> <span class="n">y1</span><span class="p">,</span>
    <span class="kt">double</span> <span class="n">x2</span><span class="p">,</span>
    <span class="kt">double</span> <span class="n">y2</span><span class="p">,</span>
    <span class="kt">double</span> <span class="n">w</span><span class="p">,</span>
    <span class="kt">double</span> <span class="n">h</span><span class="p">,</span>
  <span class="p">)</span>   <span class="o">:</span> <span class="n">redSprite</span> <span class="o">=</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">),</span>
        <span class="n">blackSprite</span> <span class="o">=</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">);</span>

  <span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="p">;</span>
  <span class="kd">final</span> <span class="kt">String</span> <span class="n">label</span><span class="p">;</span>
  <span class="kd">final</span> <span class="n">Sprite</span> <span class="n">redSprite</span><span class="p">;</span>
  <span class="kd">final</span> <span class="n">Sprite</span> <span class="n">blackSprite</span><span class="p">;</span>

  <span class="kd">static</span> <span class="kd">late</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Rank</span><span class="o">&gt;</span> <span class="n">_singletons</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="m">335</span><span class="p">,</span> <span class="m">164</span><span class="p">,</span> <span class="m">789</span><span class="p">,</span> <span class="m">161</span><span class="p">,</span> <span class="m">120</span><span class="p">,</span> <span class="m">129</span><span class="p">),</span>
    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="m">20</span><span class="p">,</span> <span class="m">19</span><span class="p">,</span> <span class="m">15</span><span class="p">,</span> <span class="m">322</span><span class="p">,</span> <span class="m">83</span><span class="p">,</span> <span class="m">125</span><span class="p">),</span>
    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="m">122</span><span class="p">,</span> <span class="m">19</span><span class="p">,</span> <span class="m">117</span><span class="p">,</span> <span class="m">322</span><span class="p">,</span> <span class="m">80</span><span class="p">,</span> <span class="m">127</span><span class="p">),</span>
    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="m">213</span><span class="p">,</span> <span class="m">12</span><span class="p">,</span> <span class="m">208</span><span class="p">,</span> <span class="m">315</span><span class="p">,</span> <span class="m">93</span><span class="p">,</span> <span class="m">132</span><span class="p">),</span>
    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="m">314</span><span class="p">,</span> <span class="m">21</span><span class="p">,</span> <span class="m">309</span><span class="p">,</span> <span class="m">324</span><span class="p">,</span> <span class="m">85</span><span class="p">,</span> <span class="m">125</span><span class="p">),</span>
    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">6</span><span class="p">,</span> <span class="s1">&#39;6&#39;</span><span class="p">,</span> <span class="m">419</span><span class="p">,</span> <span class="m">17</span><span class="p">,</span> <span class="m">414</span><span class="p">,</span> <span class="m">320</span><span class="p">,</span> <span class="m">84</span><span class="p">,</span> <span class="m">129</span><span class="p">),</span>
    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">7</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">,</span> <span class="m">509</span><span class="p">,</span> <span class="m">21</span><span class="p">,</span> <span class="m">505</span><span class="p">,</span> <span class="m">324</span><span class="p">,</span> <span class="m">92</span><span class="p">,</span> <span class="m">128</span><span class="p">),</span>
    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">8</span><span class="p">,</span> <span class="s1">&#39;8&#39;</span><span class="p">,</span> <span class="m">612</span><span class="p">,</span> <span class="m">19</span><span class="p">,</span> <span class="m">607</span><span class="p">,</span> <span class="m">322</span><span class="p">,</span> <span class="m">78</span><span class="p">,</span> <span class="m">127</span><span class="p">),</span>
    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">9</span><span class="p">,</span> <span class="s1">&#39;9&#39;</span><span class="p">,</span> <span class="m">709</span><span class="p">,</span> <span class="m">19</span><span class="p">,</span> <span class="m">704</span><span class="p">,</span> <span class="m">322</span><span class="p">,</span> <span class="m">84</span><span class="p">,</span> <span class="m">130</span><span class="p">),</span>
    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="s1">&#39;10&#39;</span><span class="p">,</span> <span class="m">810</span><span class="p">,</span> <span class="m">20</span><span class="p">,</span> <span class="m">805</span><span class="p">,</span> <span class="m">322</span><span class="p">,</span> <span class="m">137</span><span class="p">,</span> <span class="m">127</span><span class="p">),</span>
    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">11</span><span class="p">,</span> <span class="s1">&#39;J&#39;</span><span class="p">,</span> <span class="m">15</span><span class="p">,</span> <span class="m">170</span><span class="p">,</span> <span class="m">469</span><span class="p">,</span> <span class="m">167</span><span class="p">,</span> <span class="m">56</span><span class="p">,</span> <span class="m">126</span><span class="p">),</span>
    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">12</span><span class="p">,</span> <span class="s1">&#39;Q&#39;</span><span class="p">,</span> <span class="m">92</span><span class="p">,</span> <span class="m">168</span><span class="p">,</span> <span class="m">547</span><span class="p">,</span> <span class="m">165</span><span class="p">,</span> <span class="m">132</span><span class="p">,</span> <span class="m">128</span><span class="p">),</span>
    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">13</span><span class="p">,</span> <span class="s1">&#39;K&#39;</span><span class="p">,</span> <span class="m">243</span><span class="p">,</span> <span class="m">170</span><span class="p">,</span> <span class="m">696</span><span class="p">,</span> <span class="m">167</span><span class="p">,</span> <span class="m">92</span><span class="p">,</span> <span class="m">123</span><span class="p">),</span>
  <span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="card-component">
<h2>Card component<a class="headerlink" href="#card-component" title="Permalink to this heading">¶</a></h2>
<p>Now that we have the <code class="docutils literal notranslate"><span class="pre">Rank</span></code> and the <code class="docutils literal notranslate"><span class="pre">Suit</span></code> classes, we can finally start
implementing the <strong>Card</strong> component. Create file <code class="docutils literal notranslate"><span class="pre">components/card.dart</span></code> and
declare the <code class="docutils literal notranslate"><span class="pre">Card</span></code> class extending from the <code class="docutils literal notranslate"><span class="pre">PositionComponent</span></code>:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Card</span> <span class="kd">extends</span> <span class="n">PositionComponent</span> <span class="p">{}</span>
</pre></div>
</div>
<p>The constructor of the class will take integer rank and suit, and make the
card initially facing down. Also, we initialize the size of the component to
be equal to the <code class="docutils literal notranslate"><span class="pre">cardSize</span></code> constant defined in the <code class="docutils literal notranslate"><span class="pre">KlondikeGame</span></code> class:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>  <span class="n">Card</span><span class="p">(</span><span class="kt">int</span> <span class="n">intRank</span><span class="p">,</span> <span class="kt">int</span> <span class="n">intSuit</span><span class="p">)</span>
      <span class="o">:</span> <span class="n">rank</span> <span class="o">=</span> <span class="n">Rank</span><span class="p">.</span><span class="n">fromInt</span><span class="p">(</span><span class="n">intRank</span><span class="p">),</span>
        <span class="n">suit</span> <span class="o">=</span> <span class="n">Suit</span><span class="p">.</span><span class="n">fromInt</span><span class="p">(</span><span class="n">intSuit</span><span class="p">),</span>
        <span class="n">_faceUp</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
        <span class="k">super</span><span class="p">(</span><span class="nl">size:</span> <span class="n">KlondikeGame</span><span class="p">.</span><span class="n">cardSize</span><span class="p">);</span>

  <span class="kd">final</span> <span class="n">Rank</span> <span class="n">rank</span><span class="p">;</span>
  <span class="kd">final</span> <span class="n">Suit</span> <span class="n">suit</span><span class="p">;</span>
  <span class="kt">bool</span> <span class="n">_faceUp</span><span class="p">;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">_faceUp</span></code> property is private (indicated by the underscore) and non-final,
meaning that it can change during the lifetime of a card. We should create some
public accessors and mutators for this variable:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>  <span class="kt">bool</span> <span class="kd">get</span> <span class="n">isFaceUp</span> <span class="o">=&gt;</span> <span class="n">_faceUp</span><span class="p">;</span>
  <span class="kt">void</span> <span class="n">flip</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="n">_faceUp</span> <span class="o">=</span> <span class="o">!</span><span class="n">_faceUp</span><span class="p">;</span>
</pre></div>
</div>
<p>Lastly, let’s add a simple <code class="docutils literal notranslate"><span class="pre">toString()</span></code> implementation, which may turn out to
be useful when we need to debug the game:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>  <span class="nd">@override</span>
  <span class="kt">String</span> <span class="n">toString</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="n">rank</span><span class="p">.</span><span class="n">label</span> <span class="o">+</span> <span class="n">suit</span><span class="p">.</span><span class="n">label</span><span class="p">;</span> <span class="c1">// e.g. &quot;Q♠&quot; or &quot;10♦&quot;</span>
</pre></div>
</div>
<p>Before we proceed with implementing the rendering, we need to add some cards
into the game. Head over to the <code class="docutils literal notranslate"><span class="pre">KlondikeGame</span></code> class and add the following at
the bottom of the <code class="docutils literal notranslate"><span class="pre">onLoad</span></code> method:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>    <span class="kd">final</span> <span class="n">random</span> <span class="o">=</span> <span class="n">Random</span><span class="p">();</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="n">i</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="m">7</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="n">j</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="m">4</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">final</span> <span class="n">card</span> <span class="o">=</span> <span class="n">Card</span><span class="p">(</span><span class="n">random</span><span class="p">.</span><span class="n">nextInt</span><span class="p">(</span><span class="m">13</span><span class="p">)</span> <span class="o">+</span> <span class="m">1</span><span class="p">,</span> <span class="n">random</span><span class="p">.</span><span class="n">nextInt</span><span class="p">(</span><span class="m">4</span><span class="p">))</span>
          <span class="p">..</span><span class="n">position</span> <span class="o">=</span> <span class="n">Vector2</span><span class="p">(</span><span class="m">100</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="m">1150</span><span class="p">,</span> <span class="m">100</span> <span class="o">+</span> <span class="n">j</span> <span class="o">*</span> <span class="m">1500</span><span class="p">)</span>
          <span class="p">..</span><span class="n">addToParent</span><span class="p">(</span><span class="n">world</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">random</span><span class="p">.</span><span class="n">nextDouble</span><span class="p">()</span> <span class="o">&lt;</span> <span class="m">0.9</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// flip face up with 90% probability</span>
          <span class="n">card</span><span class="p">.</span><span class="n">flip</span><span class="p">();</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>This snippet is a temporary code – we will remove it in the next chapter –
but for now it lays down 28 random cards on the table, most of them facing up.</p>
<section id="rendering">
<h3>Rendering<a class="headerlink" href="#rendering" title="Permalink to this heading">¶</a></h3>
<p>In order to be able to see a card, we need to implement its <code class="docutils literal notranslate"><span class="pre">render()</span></code> method.
Since the card has two distinct states – face up or down – we will
implement rendering for these two states separately. Add the following methods
into the <code class="docutils literal notranslate"><span class="pre">Card</span></code> class:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">render</span><span class="p">(</span><span class="n">Canvas</span> <span class="n">canvas</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">_faceUp</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">_renderFront</span><span class="p">(</span><span class="n">canvas</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="n">_renderBack</span><span class="p">(</span><span class="n">canvas</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="n">_renderFront</span><span class="p">(</span><span class="n">Canvas</span> <span class="n">canvas</span><span class="p">)</span> <span class="p">{}</span>
  <span class="kt">void</span> <span class="n">_renderBack</span><span class="p">(</span><span class="n">Canvas</span> <span class="n">canvas</span><span class="p">)</span> <span class="p">{}</span>
</pre></div>
</div>
</section>
<section id="renderback">
<h3>renderBack()<a class="headerlink" href="#renderback" title="Permalink to this heading">¶</a></h3>
<p>Since rendering the back of a card is simpler, we will do it first.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">render()</span></code> method of a <code class="docutils literal notranslate"><span class="pre">PositionComponent</span></code> operates in a local coordinate
system, which means we don’t need to worry about where the card is located on
the screen. This local coordinate system has the origin at the top-left corner
of the component, and extends to the right by <code class="docutils literal notranslate"><span class="pre">width</span></code> and down by <code class="docutils literal notranslate"><span class="pre">height</span></code>
pixels.</p>
<p>There is a lot of artistic freedom in how to draw the back of a card, but my
implementation contains a solid background, a border, a flame logo in the
middle, and another decorative border:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>  <span class="kt">void</span> <span class="n">_renderBack</span><span class="p">(</span><span class="n">Canvas</span> <span class="n">canvas</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">canvas</span><span class="p">.</span><span class="n">drawRRect</span><span class="p">(</span><span class="n">cardRRect</span><span class="p">,</span> <span class="n">backBackgroundPaint</span><span class="p">);</span>
    <span class="n">canvas</span><span class="p">.</span><span class="n">drawRRect</span><span class="p">(</span><span class="n">cardRRect</span><span class="p">,</span> <span class="n">backBorderPaint1</span><span class="p">);</span>
    <span class="n">canvas</span><span class="p">.</span><span class="n">drawRRect</span><span class="p">(</span><span class="n">backRRectInner</span><span class="p">,</span> <span class="n">backBorderPaint2</span><span class="p">);</span>
    <span class="n">flameSprite</span><span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="nl">position:</span> <span class="n">size</span> <span class="o">/</span> <span class="m">2</span><span class="p">,</span> <span class="nl">anchor:</span> <span class="n">Anchor</span><span class="p">.</span><span class="n">center</span><span class="p">);</span>
  <span class="p">}</span>
</pre></div>
</div>
<p>The most interesting part here is the rendering of a sprite: we want to
render it in the middle (<code class="docutils literal notranslate"><span class="pre">size/2</span></code>), and we use <code class="docutils literal notranslate"><span class="pre">Anchor.center</span></code> to tell the
engine that we want the <em>center</em> of the sprite to be at that point.</p>
<p>Various properties used in the <code class="docutils literal notranslate"><span class="pre">_renderBack()</span></code> method are defined as follows:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>  <span class="kd">static</span> <span class="kd">final</span> <span class="n">Paint</span> <span class="n">backBackgroundPaint</span> <span class="o">=</span> <span class="n">Paint</span><span class="p">()</span>
    <span class="p">..</span><span class="n">color</span> <span class="o">=</span> <span class="k">const</span> <span class="n">Color</span><span class="p">(</span><span class="mh">0xff380c02</span><span class="p">);</span>
  <span class="kd">static</span> <span class="kd">final</span> <span class="n">Paint</span> <span class="n">backBorderPaint1</span> <span class="o">=</span> <span class="n">Paint</span><span class="p">()</span>
    <span class="p">..</span><span class="n">color</span> <span class="o">=</span> <span class="k">const</span> <span class="n">Color</span><span class="p">(</span><span class="mh">0xffdbaf58</span><span class="p">)</span>
    <span class="p">..</span><span class="n">style</span> <span class="o">=</span> <span class="n">PaintingStyle</span><span class="p">.</span><span class="n">stroke</span>
    <span class="p">..</span><span class="n">strokeWidth</span> <span class="o">=</span> <span class="m">10</span><span class="p">;</span>
  <span class="kd">static</span> <span class="kd">final</span> <span class="n">Paint</span> <span class="n">backBorderPaint2</span> <span class="o">=</span> <span class="n">Paint</span><span class="p">()</span>
    <span class="p">..</span><span class="n">color</span> <span class="o">=</span> <span class="k">const</span> <span class="n">Color</span><span class="p">(</span><span class="mh">0x5CEF971B</span><span class="p">)</span>
    <span class="p">..</span><span class="n">style</span> <span class="o">=</span> <span class="n">PaintingStyle</span><span class="p">.</span><span class="n">stroke</span>
    <span class="p">..</span><span class="n">strokeWidth</span> <span class="o">=</span> <span class="m">35</span><span class="p">;</span>
  <span class="kd">static</span> <span class="kd">final</span> <span class="n">RRect</span> <span class="n">cardRRect</span> <span class="o">=</span> <span class="n">RRect</span><span class="p">.</span><span class="n">fromRectAndRadius</span><span class="p">(</span>
    <span class="n">KlondikeGame</span><span class="p">.</span><span class="n">cardSize</span><span class="p">.</span><span class="n">toRect</span><span class="p">(),</span>
    <span class="k">const</span> <span class="n">Radius</span><span class="p">.</span><span class="n">circular</span><span class="p">(</span><span class="n">KlondikeGame</span><span class="p">.</span><span class="n">cardRadius</span><span class="p">),</span>
  <span class="p">);</span>
  <span class="kd">static</span> <span class="kd">final</span> <span class="n">RRect</span> <span class="n">backRRectInner</span> <span class="o">=</span> <span class="n">cardRRect</span><span class="p">.</span><span class="n">deflate</span><span class="p">(</span><span class="m">40</span><span class="p">);</span>
  <span class="kd">static</span> <span class="kd">late</span> <span class="kd">final</span> <span class="n">Sprite</span> <span class="n">flameSprite</span> <span class="o">=</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="m">1367</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">357</span><span class="p">,</span> <span class="m">501</span><span class="p">);</span>
</pre></div>
</div>
<p>I declared these properties as static because they will all be the same across
all 52 card objects, so we might as well save some resources by having them
initialized only once.</p>
</section>
<section id="renderfront">
<h3>renderFront()<a class="headerlink" href="#renderfront" title="Permalink to this heading">¶</a></h3>
<p>When rendering the face of a card, we will follow the standard card design: the
rank and the suit in two opposite corners, plus the number of pips equal to the
rank value. The court cards (jack, queen, king) will have special images in the
center.</p>
<p>As before, we begin by declaring some constants that will be used for rendering.
The background of a card will be black, whereas the border will be different
depending on whether the card is of a “red” suit or “black”:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>  <span class="kd">static</span> <span class="kd">final</span> <span class="n">Paint</span> <span class="n">frontBackgroundPaint</span> <span class="o">=</span> <span class="n">Paint</span><span class="p">()</span>
    <span class="p">..</span><span class="n">color</span> <span class="o">=</span> <span class="k">const</span> <span class="n">Color</span><span class="p">(</span><span class="mh">0xff000000</span><span class="p">);</span>
  <span class="kd">static</span> <span class="kd">final</span> <span class="n">Paint</span> <span class="n">redBorderPaint</span> <span class="o">=</span> <span class="n">Paint</span><span class="p">()</span>
    <span class="p">..</span><span class="n">color</span> <span class="o">=</span> <span class="k">const</span> <span class="n">Color</span><span class="p">(</span><span class="mh">0xffece8a3</span><span class="p">)</span>
    <span class="p">..</span><span class="n">style</span> <span class="o">=</span> <span class="n">PaintingStyle</span><span class="p">.</span><span class="n">stroke</span>
    <span class="p">..</span><span class="n">strokeWidth</span> <span class="o">=</span> <span class="m">10</span><span class="p">;</span>
  <span class="kd">static</span> <span class="kd">final</span> <span class="n">Paint</span> <span class="n">blackBorderPaint</span> <span class="o">=</span> <span class="n">Paint</span><span class="p">()</span>
    <span class="p">..</span><span class="n">color</span> <span class="o">=</span> <span class="k">const</span> <span class="n">Color</span><span class="p">(</span><span class="mh">0xff7ab2e8</span><span class="p">)</span>
    <span class="p">..</span><span class="n">style</span> <span class="o">=</span> <span class="n">PaintingStyle</span><span class="p">.</span><span class="n">stroke</span>
    <span class="p">..</span><span class="n">strokeWidth</span> <span class="o">=</span> <span class="m">10</span><span class="p">;</span>
</pre></div>
</div>
<p>Next, we also need the images for the court cards:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>  <span class="kd">static</span> <span class="kd">late</span> <span class="kd">final</span> <span class="n">Sprite</span> <span class="n">redJack</span> <span class="o">=</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="m">81</span><span class="p">,</span> <span class="m">565</span><span class="p">,</span> <span class="m">562</span><span class="p">,</span> <span class="m">488</span><span class="p">);</span>
  <span class="kd">static</span> <span class="kd">late</span> <span class="kd">final</span> <span class="n">Sprite</span> <span class="n">redQueen</span> <span class="o">=</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="m">717</span><span class="p">,</span> <span class="m">541</span><span class="p">,</span> <span class="m">486</span><span class="p">,</span> <span class="m">515</span><span class="p">);</span>
  <span class="kd">static</span> <span class="kd">late</span> <span class="kd">final</span> <span class="n">Sprite</span> <span class="n">redKing</span> <span class="o">=</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="m">1305</span><span class="p">,</span> <span class="m">532</span><span class="p">,</span> <span class="m">407</span><span class="p">,</span> <span class="m">549</span><span class="p">);</span>
</pre></div>
</div>
<p>Note that I’m calling these sprites <code class="docutils literal notranslate"><span class="pre">redJack</span></code>, <code class="docutils literal notranslate"><span class="pre">redQueen</span></code>, and <code class="docutils literal notranslate"><span class="pre">redKing</span></code>. This
is because, after some trial, I found that the images that I have don’t look
very well on black-suit cards. So what I decided to do is to take these images
and <em>tint</em> them with a blueish hue. Tinting of a sprite can be achieved by
using a paint with <code class="docutils literal notranslate"><span class="pre">colorFilter</span></code> set to the specified color and the <code class="docutils literal notranslate"><span class="pre">srcATop</span></code>
blending mode:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>  <span class="kd">static</span> <span class="kd">final</span> <span class="n">blueFilter</span> <span class="o">=</span> <span class="n">Paint</span><span class="p">()</span>
    <span class="p">..</span><span class="n">colorFilter</span> <span class="o">=</span> <span class="k">const</span> <span class="n">ColorFilter</span><span class="p">.</span><span class="n">mode</span><span class="p">(</span>
      <span class="n">Color</span><span class="p">(</span><span class="mh">0x880d8bff</span><span class="p">),</span>
      <span class="n">BlendMode</span><span class="p">.</span><span class="n">srcATop</span><span class="p">,</span>
    <span class="p">);</span>
  <span class="kd">static</span> <span class="kd">late</span> <span class="kd">final</span> <span class="n">Sprite</span> <span class="n">blackJack</span> <span class="o">=</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="m">81</span><span class="p">,</span> <span class="m">565</span><span class="p">,</span> <span class="m">562</span><span class="p">,</span> <span class="m">488</span><span class="p">)</span>
    <span class="p">..</span><span class="n">paint</span> <span class="o">=</span> <span class="n">blueFilter</span><span class="p">;</span>
  <span class="kd">static</span> <span class="kd">late</span> <span class="kd">final</span> <span class="n">Sprite</span> <span class="n">blackQueen</span> <span class="o">=</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="m">717</span><span class="p">,</span> <span class="m">541</span><span class="p">,</span> <span class="m">486</span><span class="p">,</span> <span class="m">515</span><span class="p">)</span>
    <span class="p">..</span><span class="n">paint</span> <span class="o">=</span> <span class="n">blueFilter</span><span class="p">;</span>
  <span class="kd">static</span> <span class="kd">late</span> <span class="kd">final</span> <span class="n">Sprite</span> <span class="n">blackKing</span> <span class="o">=</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="m">1305</span><span class="p">,</span> <span class="m">532</span><span class="p">,</span> <span class="m">407</span><span class="p">,</span> <span class="m">549</span><span class="p">)</span>
    <span class="p">..</span><span class="n">paint</span> <span class="o">=</span> <span class="n">blueFilter</span><span class="p">;</span>
</pre></div>
</div>
<p>Now we can start coding the render method itself. First, draw the background
and the card border:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>  <span class="kt">void</span> <span class="n">_renderFront</span><span class="p">(</span><span class="n">Canvas</span> <span class="n">canvas</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">canvas</span><span class="p">.</span><span class="n">drawRRect</span><span class="p">(</span><span class="n">cardRRect</span><span class="p">,</span> <span class="n">frontBackgroundPaint</span><span class="p">);</span>
    <span class="n">canvas</span><span class="p">.</span><span class="n">drawRRect</span><span class="p">(</span>
      <span class="n">cardRRect</span><span class="p">,</span>
      <span class="n">suit</span><span class="p">.</span><span class="n">isRed</span> <span class="o">?</span> <span class="n">redBorderPaint</span> <span class="o">:</span> <span class="n">blackBorderPaint</span><span class="p">,</span>
    <span class="p">);</span>
  <span class="p">}</span>
</pre></div>
</div>
<p>In order to draw the rest of the card, I need one more helper method. This
method will draw the provided sprite on the canvas at the specified place (the
location is relative to the dimensions of the card). The sprite can be
optionally scaled. In addition, if flag <code class="docutils literal notranslate"><span class="pre">rotate=true</span></code> is passed, the sprite
will be drawn as if it was rotated 180º around the center of the card:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>  <span class="kt">void</span> <span class="n">_drawSprite</span><span class="p">(</span>
    <span class="n">Canvas</span> <span class="n">canvas</span><span class="p">,</span>
    <span class="n">Sprite</span> <span class="n">sprite</span><span class="p">,</span>
    <span class="kt">double</span> <span class="n">relativeX</span><span class="p">,</span>
    <span class="kt">double</span> <span class="n">relativeY</span><span class="p">,</span> <span class="p">{</span>
    <span class="kt">double</span> <span class="n">scale</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span>
    <span class="kt">bool</span> <span class="n">rotate</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
  <span class="p">})</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">rotate</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">canvas</span><span class="p">.</span><span class="n">save</span><span class="p">();</span>
      <span class="n">canvas</span><span class="p">.</span><span class="n">translate</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">x</span> <span class="o">/</span> <span class="m">2</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">y</span> <span class="o">/</span> <span class="m">2</span><span class="p">);</span>
      <span class="n">canvas</span><span class="p">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">pi</span><span class="p">);</span>
      <span class="n">canvas</span><span class="p">.</span><span class="n">translate</span><span class="p">(</span><span class="o">-</span><span class="n">size</span><span class="p">.</span><span class="n">x</span> <span class="o">/</span> <span class="m">2</span><span class="p">,</span> <span class="o">-</span><span class="n">size</span><span class="p">.</span><span class="n">y</span> <span class="o">/</span> <span class="m">2</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">sprite</span><span class="p">.</span><span class="n">render</span><span class="p">(</span>
      <span class="n">canvas</span><span class="p">,</span>
      <span class="nl">position:</span> <span class="n">Vector2</span><span class="p">(</span><span class="n">relativeX</span> <span class="o">*</span> <span class="n">size</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">relativeY</span> <span class="o">*</span> <span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">),</span>
      <span class="nl">anchor:</span> <span class="n">Anchor</span><span class="p">.</span><span class="n">center</span><span class="p">,</span>
      <span class="nl">size:</span> <span class="n">sprite</span><span class="p">.</span><span class="n">srcSize</span><span class="p">.</span><span class="n">scaled</span><span class="p">(</span><span class="n">scale</span><span class="p">),</span>
    <span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">rotate</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">canvas</span><span class="p">.</span><span class="n">restore</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
</pre></div>
</div>
<p>Let’s draw the rank and the suit symbols in the corners of the card. Add the
following to the <code class="docutils literal notranslate"><span class="pre">_renderFront()</span></code> method:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>    <span class="kd">final</span> <span class="n">rankSprite</span> <span class="o">=</span> <span class="n">suit</span><span class="p">.</span><span class="n">isBlack</span> <span class="o">?</span> <span class="n">rank</span><span class="p">.</span><span class="n">blackSprite</span> <span class="o">:</span> <span class="n">rank</span><span class="p">.</span><span class="n">redSprite</span><span class="p">;</span>
    <span class="kd">final</span> <span class="n">suitSprite</span> <span class="o">=</span> <span class="n">suit</span><span class="p">.</span><span class="n">sprite</span><span class="p">;</span>
    <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">rankSprite</span><span class="p">,</span> <span class="m">0.1</span><span class="p">,</span> <span class="m">0.08</span><span class="p">);</span>
    <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">rankSprite</span><span class="p">,</span> <span class="m">0.1</span><span class="p">,</span> <span class="m">0.08</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
    <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.1</span><span class="p">,</span> <span class="m">0.18</span><span class="p">,</span> <span class="nl">scale:</span> <span class="m">0.5</span><span class="p">);</span>
    <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.1</span><span class="p">,</span> <span class="m">0.18</span><span class="p">,</span> <span class="nl">scale:</span> <span class="m">0.5</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
</pre></div>
</div>
<p>The middle of the card is rendered in the same manner: we will create a big
switch statement on the card’s rank, and draw pips accordingly. The code
below may seem long, but it is actually quite repetitive and consists only
of drawing various sprites in different places on the card’s face:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>    <span class="k">switch</span> <span class="p">(</span><span class="n">rank</span><span class="p">.</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">case</span> <span class="m">1</span><span class="o">:</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="nl">scale:</span> <span class="m">2.5</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="m">2</span><span class="o">:</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.25</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.25</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="m">3</span><span class="o">:</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.2</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.2</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="m">4</span><span class="o">:</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.25</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.25</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.25</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.25</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="m">5</span><span class="o">:</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.25</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.25</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.25</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.25</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="m">6</span><span class="o">:</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.25</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.25</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.25</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.25</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="m">7</span><span class="o">:</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.2</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.2</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.35</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.2</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.2</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="m">8</span><span class="o">:</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.2</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.2</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.35</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.2</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.2</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.35</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="m">9</span><span class="o">:</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.2</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.2</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.3</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.4</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.4</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.2</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.2</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.4</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.4</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="m">10</span><span class="o">:</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.2</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.2</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.3</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.4</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.4</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.2</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.2</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.4</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.4</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="m">11</span><span class="o">:</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suit</span><span class="p">.</span><span class="n">isRed</span><span class="o">?</span> <span class="n">redJack</span> <span class="o">:</span> <span class="n">blackJack</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="m">12</span><span class="o">:</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suit</span><span class="p">.</span><span class="n">isRed</span><span class="o">?</span> <span class="n">redQueen</span> <span class="o">:</span> <span class="n">blackQueen</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="m">13</span><span class="o">:</span>
        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suit</span><span class="p">.</span><span class="n">isRed</span><span class="o">?</span> <span class="n">redKing</span> <span class="o">:</span> <span class="n">blackKing</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>And this is it with the rendering of the <code class="docutils literal notranslate"><span class="pre">Card</span></code> component. If you run the code
now, you would see four rows of cards neatly spread on the table. Refreshing
the page will lay down a new set of cards. Remember that we have laid these
cards in this way only temporarily, in order to be able to check that rendering
works properly.</p>
<p>In the next chapter we will discuss how to implement interactions with the
cards, that is, how to make them draggable and tappable.</p>
<button class="flutter-app-button popup" onclick="run_flutter_app(&quot;/main/_static/apps/tutorials-klondike-app/index.html?step3&quot;)">Run</button><div class="flutter-app-code docutils container" id="tutorials-klondike-app-source">
<div class="filename docutils container">
components/card.dart</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="k">import</span> <span class="s1">&#39;dart:math&#39;</span><span class="p">;</span>
<span class="linenos">  2</span><span class="k">import</span> <span class="s1">&#39;dart:ui&#39;</span><span class="p">;</span>
<span class="linenos">  3</span>
<span class="linenos">  4</span><span class="k">import</span> <span class="s1">&#39;package:flame/components.dart&#39;</span><span class="p">;</span>
<span class="linenos">  5</span><span class="k">import</span> <span class="s1">&#39;../klondike_game.dart&#39;</span><span class="p">;</span>
<span class="linenos">  6</span><span class="k">import</span> <span class="s1">&#39;../rank.dart&#39;</span><span class="p">;</span>
<span class="linenos">  7</span><span class="k">import</span> <span class="s1">&#39;../suit.dart&#39;</span><span class="p">;</span>
<span class="linenos">  8</span>
<span class="linenos">  9</span><span class="kd">class</span> <span class="nc">Card</span> <span class="kd">extends</span> <span class="n">PositionComponent</span> <span class="p">{</span>
<span class="linenos"> 10</span>  <span class="n">Card</span><span class="p">(</span><span class="kt">int</span> <span class="n">intRank</span><span class="p">,</span> <span class="kt">int</span> <span class="n">intSuit</span><span class="p">)</span>
<span class="linenos"> 11</span>      <span class="o">:</span> <span class="n">rank</span> <span class="o">=</span> <span class="n">Rank</span><span class="p">.</span><span class="n">fromInt</span><span class="p">(</span><span class="n">intRank</span><span class="p">),</span>
<span class="linenos"> 12</span>        <span class="n">suit</span> <span class="o">=</span> <span class="n">Suit</span><span class="p">.</span><span class="n">fromInt</span><span class="p">(</span><span class="n">intSuit</span><span class="p">),</span>
<span class="linenos"> 13</span>        <span class="n">_faceUp</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
<span class="linenos"> 14</span>        <span class="k">super</span><span class="p">(</span><span class="nl">size:</span> <span class="n">KlondikeGame</span><span class="p">.</span><span class="n">cardSize</span><span class="p">);</span>
<span class="linenos"> 15</span>
<span class="linenos"> 16</span>  <span class="kd">final</span> <span class="n">Rank</span> <span class="n">rank</span><span class="p">;</span>
<span class="linenos"> 17</span>  <span class="kd">final</span> <span class="n">Suit</span> <span class="n">suit</span><span class="p">;</span>
<span class="linenos"> 18</span>  <span class="kt">bool</span> <span class="n">_faceUp</span><span class="p">;</span>
<span class="linenos"> 19</span>
<span class="linenos"> 20</span>  <span class="kt">bool</span> <span class="kd">get</span> <span class="n">isFaceUp</span> <span class="o">=&gt;</span> <span class="n">_faceUp</span><span class="p">;</span>
<span class="linenos"> 21</span>  <span class="kt">void</span> <span class="n">flip</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="n">_faceUp</span> <span class="o">=</span> <span class="o">!</span><span class="n">_faceUp</span><span class="p">;</span>
<span class="linenos"> 22</span>
<span class="linenos"> 23</span>  <span class="nd">@override</span>
<span class="linenos"> 24</span>  <span class="kt">String</span> <span class="n">toString</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="n">rank</span><span class="p">.</span><span class="n">label</span> <span class="o">+</span> <span class="n">suit</span><span class="p">.</span><span class="n">label</span><span class="p">;</span> <span class="c1">// e.g. &quot;Q♠&quot; or &quot;10♦&quot;</span>
<span class="linenos"> 25</span>
<span class="linenos"> 26</span>  <span class="nd">@override</span>
<span class="linenos"> 27</span>  <span class="kt">void</span> <span class="n">render</span><span class="p">(</span><span class="n">Canvas</span> <span class="n">canvas</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos"> 28</span>    <span class="k">if</span> <span class="p">(</span><span class="n">_faceUp</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos"> 29</span>      <span class="n">_renderFront</span><span class="p">(</span><span class="n">canvas</span><span class="p">);</span>
<span class="linenos"> 30</span>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="linenos"> 31</span>      <span class="n">_renderBack</span><span class="p">(</span><span class="n">canvas</span><span class="p">);</span>
<span class="linenos"> 32</span>    <span class="p">}</span>
<span class="linenos"> 33</span>  <span class="p">}</span>
<span class="linenos"> 34</span>
<span class="linenos"> 35</span>  <span class="kd">static</span> <span class="kd">final</span> <span class="n">Paint</span> <span class="n">backBackgroundPaint</span> <span class="o">=</span> <span class="n">Paint</span><span class="p">()</span>
<span class="linenos"> 36</span>    <span class="p">..</span><span class="n">color</span> <span class="o">=</span> <span class="k">const</span> <span class="n">Color</span><span class="p">(</span><span class="mh">0xff380c02</span><span class="p">);</span>
<span class="linenos"> 37</span>  <span class="kd">static</span> <span class="kd">final</span> <span class="n">Paint</span> <span class="n">backBorderPaint1</span> <span class="o">=</span> <span class="n">Paint</span><span class="p">()</span>
<span class="linenos"> 38</span>    <span class="p">..</span><span class="n">color</span> <span class="o">=</span> <span class="k">const</span> <span class="n">Color</span><span class="p">(</span><span class="mh">0xffdbaf58</span><span class="p">)</span>
<span class="linenos"> 39</span>    <span class="p">..</span><span class="n">style</span> <span class="o">=</span> <span class="n">PaintingStyle</span><span class="p">.</span><span class="n">stroke</span>
<span class="linenos"> 40</span>    <span class="p">..</span><span class="n">strokeWidth</span> <span class="o">=</span> <span class="m">10</span><span class="p">;</span>
<span class="linenos"> 41</span>  <span class="kd">static</span> <span class="kd">final</span> <span class="n">Paint</span> <span class="n">backBorderPaint2</span> <span class="o">=</span> <span class="n">Paint</span><span class="p">()</span>
<span class="linenos"> 42</span>    <span class="p">..</span><span class="n">color</span> <span class="o">=</span> <span class="k">const</span> <span class="n">Color</span><span class="p">(</span><span class="mh">0x5CEF971B</span><span class="p">)</span>
<span class="linenos"> 43</span>    <span class="p">..</span><span class="n">style</span> <span class="o">=</span> <span class="n">PaintingStyle</span><span class="p">.</span><span class="n">stroke</span>
<span class="linenos"> 44</span>    <span class="p">..</span><span class="n">strokeWidth</span> <span class="o">=</span> <span class="m">35</span><span class="p">;</span>
<span class="linenos"> 45</span>  <span class="kd">static</span> <span class="kd">final</span> <span class="n">RRect</span> <span class="n">cardRRect</span> <span class="o">=</span> <span class="n">RRect</span><span class="p">.</span><span class="n">fromRectAndRadius</span><span class="p">(</span>
<span class="linenos"> 46</span>    <span class="n">KlondikeGame</span><span class="p">.</span><span class="n">cardSize</span><span class="p">.</span><span class="n">toRect</span><span class="p">(),</span>
<span class="linenos"> 47</span>    <span class="k">const</span> <span class="n">Radius</span><span class="p">.</span><span class="n">circular</span><span class="p">(</span><span class="n">KlondikeGame</span><span class="p">.</span><span class="n">cardRadius</span><span class="p">),</span>
<span class="linenos"> 48</span>  <span class="p">);</span>
<span class="linenos"> 49</span>  <span class="kd">static</span> <span class="kd">final</span> <span class="n">RRect</span> <span class="n">backRRectInner</span> <span class="o">=</span> <span class="n">cardRRect</span><span class="p">.</span><span class="n">deflate</span><span class="p">(</span><span class="m">40</span><span class="p">);</span>
<span class="linenos"> 50</span>  <span class="kd">static</span> <span class="kd">late</span> <span class="kd">final</span> <span class="n">Sprite</span> <span class="n">flameSprite</span> <span class="o">=</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="m">1367</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">357</span><span class="p">,</span> <span class="m">501</span><span class="p">);</span>
<span class="linenos"> 51</span>
<span class="linenos"> 52</span>  <span class="kt">void</span> <span class="n">_renderBack</span><span class="p">(</span><span class="n">Canvas</span> <span class="n">canvas</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos"> 53</span>    <span class="n">canvas</span><span class="p">.</span><span class="n">drawRRect</span><span class="p">(</span><span class="n">cardRRect</span><span class="p">,</span> <span class="n">backBackgroundPaint</span><span class="p">);</span>
<span class="linenos"> 54</span>    <span class="n">canvas</span><span class="p">.</span><span class="n">drawRRect</span><span class="p">(</span><span class="n">cardRRect</span><span class="p">,</span> <span class="n">backBorderPaint1</span><span class="p">);</span>
<span class="linenos"> 55</span>    <span class="n">canvas</span><span class="p">.</span><span class="n">drawRRect</span><span class="p">(</span><span class="n">backRRectInner</span><span class="p">,</span> <span class="n">backBorderPaint2</span><span class="p">);</span>
<span class="linenos"> 56</span>    <span class="n">flameSprite</span><span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="nl">position:</span> <span class="n">size</span> <span class="o">/</span> <span class="m">2</span><span class="p">,</span> <span class="nl">anchor:</span> <span class="n">Anchor</span><span class="p">.</span><span class="n">center</span><span class="p">);</span>
<span class="linenos"> 57</span>  <span class="p">}</span>
<span class="linenos"> 58</span>
<span class="linenos"> 59</span>  <span class="kd">static</span> <span class="kd">final</span> <span class="n">Paint</span> <span class="n">frontBackgroundPaint</span> <span class="o">=</span> <span class="n">Paint</span><span class="p">()</span>
<span class="linenos"> 60</span>    <span class="p">..</span><span class="n">color</span> <span class="o">=</span> <span class="k">const</span> <span class="n">Color</span><span class="p">(</span><span class="mh">0xff000000</span><span class="p">);</span>
<span class="linenos"> 61</span>  <span class="kd">static</span> <span class="kd">final</span> <span class="n">Paint</span> <span class="n">redBorderPaint</span> <span class="o">=</span> <span class="n">Paint</span><span class="p">()</span>
<span class="linenos"> 62</span>    <span class="p">..</span><span class="n">color</span> <span class="o">=</span> <span class="k">const</span> <span class="n">Color</span><span class="p">(</span><span class="mh">0xffece8a3</span><span class="p">)</span>
<span class="linenos"> 63</span>    <span class="p">..</span><span class="n">style</span> <span class="o">=</span> <span class="n">PaintingStyle</span><span class="p">.</span><span class="n">stroke</span>
<span class="linenos"> 64</span>    <span class="p">..</span><span class="n">strokeWidth</span> <span class="o">=</span> <span class="m">10</span><span class="p">;</span>
<span class="linenos"> 65</span>  <span class="kd">static</span> <span class="kd">final</span> <span class="n">Paint</span> <span class="n">blackBorderPaint</span> <span class="o">=</span> <span class="n">Paint</span><span class="p">()</span>
<span class="linenos"> 66</span>    <span class="p">..</span><span class="n">color</span> <span class="o">=</span> <span class="k">const</span> <span class="n">Color</span><span class="p">(</span><span class="mh">0xff7ab2e8</span><span class="p">)</span>
<span class="linenos"> 67</span>    <span class="p">..</span><span class="n">style</span> <span class="o">=</span> <span class="n">PaintingStyle</span><span class="p">.</span><span class="n">stroke</span>
<span class="linenos"> 68</span>    <span class="p">..</span><span class="n">strokeWidth</span> <span class="o">=</span> <span class="m">10</span><span class="p">;</span>
<span class="linenos"> 69</span>  <span class="kd">static</span> <span class="kd">final</span> <span class="n">blueFilter</span> <span class="o">=</span> <span class="n">Paint</span><span class="p">()</span>
<span class="linenos"> 70</span>    <span class="p">..</span><span class="n">colorFilter</span> <span class="o">=</span> <span class="k">const</span> <span class="n">ColorFilter</span><span class="p">.</span><span class="n">mode</span><span class="p">(</span>
<span class="linenos"> 71</span>      <span class="n">Color</span><span class="p">(</span><span class="mh">0x880d8bff</span><span class="p">),</span>
<span class="linenos"> 72</span>      <span class="n">BlendMode</span><span class="p">.</span><span class="n">srcATop</span><span class="p">,</span>
<span class="linenos"> 73</span>    <span class="p">);</span>
<span class="linenos"> 74</span>  <span class="kd">static</span> <span class="kd">late</span> <span class="kd">final</span> <span class="n">Sprite</span> <span class="n">redJack</span> <span class="o">=</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="m">81</span><span class="p">,</span> <span class="m">565</span><span class="p">,</span> <span class="m">562</span><span class="p">,</span> <span class="m">488</span><span class="p">);</span>
<span class="linenos"> 75</span>  <span class="kd">static</span> <span class="kd">late</span> <span class="kd">final</span> <span class="n">Sprite</span> <span class="n">redQueen</span> <span class="o">=</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="m">717</span><span class="p">,</span> <span class="m">541</span><span class="p">,</span> <span class="m">486</span><span class="p">,</span> <span class="m">515</span><span class="p">);</span>
<span class="linenos"> 76</span>  <span class="kd">static</span> <span class="kd">late</span> <span class="kd">final</span> <span class="n">Sprite</span> <span class="n">redKing</span> <span class="o">=</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="m">1305</span><span class="p">,</span> <span class="m">532</span><span class="p">,</span> <span class="m">407</span><span class="p">,</span> <span class="m">549</span><span class="p">);</span>
<span class="linenos"> 77</span>  <span class="kd">static</span> <span class="kd">late</span> <span class="kd">final</span> <span class="n">Sprite</span> <span class="n">blackJack</span> <span class="o">=</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="m">81</span><span class="p">,</span> <span class="m">565</span><span class="p">,</span> <span class="m">562</span><span class="p">,</span> <span class="m">488</span><span class="p">)</span>
<span class="linenos"> 78</span>    <span class="p">..</span><span class="n">paint</span> <span class="o">=</span> <span class="n">blueFilter</span><span class="p">;</span>
<span class="linenos"> 79</span>  <span class="kd">static</span> <span class="kd">late</span> <span class="kd">final</span> <span class="n">Sprite</span> <span class="n">blackQueen</span> <span class="o">=</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="m">717</span><span class="p">,</span> <span class="m">541</span><span class="p">,</span> <span class="m">486</span><span class="p">,</span> <span class="m">515</span><span class="p">)</span>
<span class="linenos"> 80</span>    <span class="p">..</span><span class="n">paint</span> <span class="o">=</span> <span class="n">blueFilter</span><span class="p">;</span>
<span class="linenos"> 81</span>  <span class="kd">static</span> <span class="kd">late</span> <span class="kd">final</span> <span class="n">Sprite</span> <span class="n">blackKing</span> <span class="o">=</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="m">1305</span><span class="p">,</span> <span class="m">532</span><span class="p">,</span> <span class="m">407</span><span class="p">,</span> <span class="m">549</span><span class="p">)</span>
<span class="linenos"> 82</span>    <span class="p">..</span><span class="n">paint</span> <span class="o">=</span> <span class="n">blueFilter</span><span class="p">;</span>
<span class="linenos"> 83</span>
<span class="linenos"> 84</span>  <span class="kt">void</span> <span class="n">_renderFront</span><span class="p">(</span><span class="n">Canvas</span> <span class="n">canvas</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos"> 85</span>    <span class="n">canvas</span><span class="p">.</span><span class="n">drawRRect</span><span class="p">(</span><span class="n">cardRRect</span><span class="p">,</span> <span class="n">frontBackgroundPaint</span><span class="p">);</span>
<span class="linenos"> 86</span>    <span class="n">canvas</span><span class="p">.</span><span class="n">drawRRect</span><span class="p">(</span>
<span class="linenos"> 87</span>      <span class="n">cardRRect</span><span class="p">,</span>
<span class="linenos"> 88</span>      <span class="n">suit</span><span class="p">.</span><span class="n">isRed</span> <span class="o">?</span> <span class="n">redBorderPaint</span> <span class="o">:</span> <span class="n">blackBorderPaint</span><span class="p">,</span>
<span class="linenos"> 89</span>    <span class="p">);</span>
<span class="linenos"> 90</span>
<span class="linenos"> 91</span>    <span class="kd">final</span> <span class="n">rankSprite</span> <span class="o">=</span> <span class="n">suit</span><span class="p">.</span><span class="n">isBlack</span> <span class="o">?</span> <span class="n">rank</span><span class="p">.</span><span class="n">blackSprite</span> <span class="o">:</span> <span class="n">rank</span><span class="p">.</span><span class="n">redSprite</span><span class="p">;</span>
<span class="linenos"> 92</span>    <span class="kd">final</span> <span class="n">suitSprite</span> <span class="o">=</span> <span class="n">suit</span><span class="p">.</span><span class="n">sprite</span><span class="p">;</span>
<span class="linenos"> 93</span>    <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">rankSprite</span><span class="p">,</span> <span class="m">0.1</span><span class="p">,</span> <span class="m">0.08</span><span class="p">);</span>
<span class="linenos"> 94</span>    <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.1</span><span class="p">,</span> <span class="m">0.18</span><span class="p">,</span> <span class="nl">scale:</span> <span class="m">0.5</span><span class="p">);</span>
<span class="linenos"> 95</span>    <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">rankSprite</span><span class="p">,</span> <span class="m">0.1</span><span class="p">,</span> <span class="m">0.08</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos"> 96</span>    <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.1</span><span class="p">,</span> <span class="m">0.18</span><span class="p">,</span> <span class="nl">scale:</span> <span class="m">0.5</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos"> 97</span>    <span class="k">switch</span> <span class="p">(</span><span class="n">rank</span><span class="p">.</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos"> 98</span>      <span class="k">case</span> <span class="m">1</span><span class="o">:</span>
<span class="linenos"> 99</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="nl">scale:</span> <span class="m">2.5</span><span class="p">);</span>
<span class="linenos">100</span>        <span class="k">break</span><span class="p">;</span>
<span class="linenos">101</span>      <span class="k">case</span> <span class="m">2</span><span class="o">:</span>
<span class="linenos">102</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.25</span><span class="p">);</span>
<span class="linenos">103</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.25</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">104</span>        <span class="k">break</span><span class="p">;</span>
<span class="linenos">105</span>      <span class="k">case</span> <span class="m">3</span><span class="o">:</span>
<span class="linenos">106</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.2</span><span class="p">);</span>
<span class="linenos">107</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
<span class="linenos">108</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.2</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">109</span>        <span class="k">break</span><span class="p">;</span>
<span class="linenos">110</span>      <span class="k">case</span> <span class="m">4</span><span class="o">:</span>
<span class="linenos">111</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.25</span><span class="p">);</span>
<span class="linenos">112</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.25</span><span class="p">);</span>
<span class="linenos">113</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.25</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">114</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.25</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">115</span>        <span class="k">break</span><span class="p">;</span>
<span class="linenos">116</span>      <span class="k">case</span> <span class="m">5</span><span class="o">:</span>
<span class="linenos">117</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.25</span><span class="p">);</span>
<span class="linenos">118</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.25</span><span class="p">);</span>
<span class="linenos">119</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.25</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">120</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.25</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">121</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
<span class="linenos">122</span>        <span class="k">break</span><span class="p">;</span>
<span class="linenos">123</span>      <span class="k">case</span> <span class="m">6</span><span class="o">:</span>
<span class="linenos">124</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.25</span><span class="p">);</span>
<span class="linenos">125</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.25</span><span class="p">);</span>
<span class="linenos">126</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
<span class="linenos">127</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
<span class="linenos">128</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.25</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">129</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.25</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">130</span>        <span class="k">break</span><span class="p">;</span>
<span class="linenos">131</span>      <span class="k">case</span> <span class="m">7</span><span class="o">:</span>
<span class="linenos">132</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.2</span><span class="p">);</span>
<span class="linenos">133</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.2</span><span class="p">);</span>
<span class="linenos">134</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.35</span><span class="p">);</span>
<span class="linenos">135</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
<span class="linenos">136</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
<span class="linenos">137</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.2</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">138</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.2</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">139</span>        <span class="k">break</span><span class="p">;</span>
<span class="linenos">140</span>      <span class="k">case</span> <span class="m">8</span><span class="o">:</span>
<span class="linenos">141</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.2</span><span class="p">);</span>
<span class="linenos">142</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.2</span><span class="p">);</span>
<span class="linenos">143</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.35</span><span class="p">);</span>
<span class="linenos">144</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
<span class="linenos">145</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
<span class="linenos">146</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.2</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">147</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.2</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">148</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.35</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">149</span>        <span class="k">break</span><span class="p">;</span>
<span class="linenos">150</span>      <span class="k">case</span> <span class="m">9</span><span class="o">:</span>
<span class="linenos">151</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.2</span><span class="p">);</span>
<span class="linenos">152</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.2</span><span class="p">);</span>
<span class="linenos">153</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.3</span><span class="p">);</span>
<span class="linenos">154</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.4</span><span class="p">);</span>
<span class="linenos">155</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.4</span><span class="p">);</span>
<span class="linenos">156</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.2</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">157</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.2</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">158</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.4</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">159</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.4</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">160</span>        <span class="k">break</span><span class="p">;</span>
<span class="linenos">161</span>      <span class="k">case</span> <span class="m">10</span><span class="o">:</span>
<span class="linenos">162</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.2</span><span class="p">);</span>
<span class="linenos">163</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.2</span><span class="p">);</span>
<span class="linenos">164</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.3</span><span class="p">);</span>
<span class="linenos">165</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.4</span><span class="p">);</span>
<span class="linenos">166</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.4</span><span class="p">);</span>
<span class="linenos">167</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.2</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">168</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.2</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">169</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">170</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.4</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">171</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suitSprite</span><span class="p">,</span> <span class="m">0.7</span><span class="p">,</span> <span class="m">0.4</span><span class="p">,</span> <span class="nl">rotate:</span> <span class="kc">true</span><span class="p">);</span>
<span class="linenos">172</span>        <span class="k">break</span><span class="p">;</span>
<span class="linenos">173</span>      <span class="k">case</span> <span class="m">11</span><span class="o">:</span>
<span class="linenos">174</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suit</span><span class="p">.</span><span class="n">isRed</span> <span class="o">?</span> <span class="n">redJack</span> <span class="o">:</span> <span class="n">blackJack</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
<span class="linenos">175</span>        <span class="k">break</span><span class="p">;</span>
<span class="linenos">176</span>      <span class="k">case</span> <span class="m">12</span><span class="o">:</span>
<span class="linenos">177</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suit</span><span class="p">.</span><span class="n">isRed</span> <span class="o">?</span> <span class="n">redQueen</span> <span class="o">:</span> <span class="n">blackQueen</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
<span class="linenos">178</span>        <span class="k">break</span><span class="p">;</span>
<span class="linenos">179</span>      <span class="k">case</span> <span class="m">13</span><span class="o">:</span>
<span class="linenos">180</span>        <span class="n">_drawSprite</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">suit</span><span class="p">.</span><span class="n">isRed</span> <span class="o">?</span> <span class="n">redKing</span> <span class="o">:</span> <span class="n">blackKing</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
<span class="linenos">181</span>        <span class="k">break</span><span class="p">;</span>
<span class="linenos">182</span>    <span class="p">}</span>
<span class="linenos">183</span>  <span class="p">}</span>
<span class="linenos">184</span>
<span class="linenos">185</span>  <span class="kt">void</span> <span class="n">_drawSprite</span><span class="p">(</span>
<span class="linenos">186</span>    <span class="n">Canvas</span> <span class="n">canvas</span><span class="p">,</span>
<span class="linenos">187</span>    <span class="n">Sprite</span> <span class="n">sprite</span><span class="p">,</span>
<span class="linenos">188</span>    <span class="kt">double</span> <span class="n">relativeX</span><span class="p">,</span>
<span class="linenos">189</span>    <span class="kt">double</span> <span class="n">relativeY</span><span class="p">,</span> <span class="p">{</span>
<span class="linenos">190</span>    <span class="kt">double</span> <span class="n">scale</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span>
<span class="linenos">191</span>    <span class="kt">bool</span> <span class="n">rotate</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
<span class="linenos">192</span>  <span class="p">})</span> <span class="p">{</span>
<span class="linenos">193</span>    <span class="k">if</span> <span class="p">(</span><span class="n">rotate</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos">194</span>      <span class="n">canvas</span><span class="p">.</span><span class="n">save</span><span class="p">();</span>
<span class="linenos">195</span>      <span class="n">canvas</span><span class="p">.</span><span class="n">translate</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">x</span> <span class="o">/</span> <span class="m">2</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">y</span> <span class="o">/</span> <span class="m">2</span><span class="p">);</span>
<span class="linenos">196</span>      <span class="n">canvas</span><span class="p">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">pi</span><span class="p">);</span>
<span class="linenos">197</span>      <span class="n">canvas</span><span class="p">.</span><span class="n">translate</span><span class="p">(</span><span class="o">-</span><span class="n">size</span><span class="p">.</span><span class="n">x</span> <span class="o">/</span> <span class="m">2</span><span class="p">,</span> <span class="o">-</span><span class="n">size</span><span class="p">.</span><span class="n">y</span> <span class="o">/</span> <span class="m">2</span><span class="p">);</span>
<span class="linenos">198</span>    <span class="p">}</span>
<span class="linenos">199</span>    <span class="n">sprite</span><span class="p">.</span><span class="n">render</span><span class="p">(</span>
<span class="linenos">200</span>      <span class="n">canvas</span><span class="p">,</span>
<span class="linenos">201</span>      <span class="nl">position:</span> <span class="n">Vector2</span><span class="p">(</span><span class="n">relativeX</span> <span class="o">*</span> <span class="n">size</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">relativeY</span> <span class="o">*</span> <span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">),</span>
<span class="linenos">202</span>      <span class="nl">anchor:</span> <span class="n">Anchor</span><span class="p">.</span><span class="n">center</span><span class="p">,</span>
<span class="linenos">203</span>      <span class="nl">size:</span> <span class="n">sprite</span><span class="p">.</span><span class="n">srcSize</span><span class="p">.</span><span class="n">scaled</span><span class="p">(</span><span class="n">scale</span><span class="p">),</span>
<span class="linenos">204</span>    <span class="p">);</span>
<span class="linenos">205</span>    <span class="k">if</span> <span class="p">(</span><span class="n">rotate</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos">206</span>      <span class="n">canvas</span><span class="p">.</span><span class="n">restore</span><span class="p">();</span>
<span class="linenos">207</span>    <span class="p">}</span>
<span class="linenos">208</span>  <span class="p">}</span>
<span class="linenos">209</span><span class="p">}</span>
</pre></div>
</div>
<div class="filename docutils container">
components/foundation.dart</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">import</span> <span class="s1">&#39;package:flame/components.dart&#39;</span><span class="p">;</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="kd">class</span> <span class="nc">Foundation</span> <span class="kd">extends</span> <span class="n">PositionComponent</span> <span class="p">{</span>
<span class="linenos">4</span>  <span class="nd">@override</span>
<span class="linenos">5</span>  <span class="kt">bool</span> <span class="kd">get</span> <span class="n">debugMode</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">;</span>
<span class="linenos">6</span><span class="p">}</span>
</pre></div>
</div>
<div class="filename docutils container">
components/pile.dart</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">import</span> <span class="s1">&#39;package:flame/components.dart&#39;</span><span class="p">;</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="kd">class</span> <span class="nc">Pile</span> <span class="kd">extends</span> <span class="n">PositionComponent</span> <span class="p">{</span>
<span class="linenos">4</span>  <span class="nd">@override</span>
<span class="linenos">5</span>  <span class="kt">bool</span> <span class="kd">get</span> <span class="n">debugMode</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">;</span>
<span class="linenos">6</span><span class="p">}</span>
</pre></div>
</div>
<div class="filename docutils container">
components/stock.dart</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">import</span> <span class="s1">&#39;package:flame/components.dart&#39;</span><span class="p">;</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="kd">class</span> <span class="nc">Stock</span> <span class="kd">extends</span> <span class="n">PositionComponent</span> <span class="p">{</span>
<span class="linenos">4</span>  <span class="nd">@override</span>
<span class="linenos">5</span>  <span class="kt">bool</span> <span class="kd">get</span> <span class="n">debugMode</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">;</span>
<span class="linenos">6</span><span class="p">}</span>
</pre></div>
</div>
<div class="filename docutils container">
components/waste.dart</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">import</span> <span class="s1">&#39;package:flame/components.dart&#39;</span><span class="p">;</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="kd">class</span> <span class="nc">Waste</span> <span class="kd">extends</span> <span class="n">PositionComponent</span> <span class="p">{</span>
<span class="linenos">4</span>  <span class="nd">@override</span>
<span class="linenos">5</span>  <span class="kt">bool</span> <span class="kd">get</span> <span class="n">debugMode</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">;</span>
<span class="linenos">6</span><span class="p">}</span>
</pre></div>
</div>
<div class="filename docutils container">
klondike_game.dart</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">import</span> <span class="s1">&#39;dart:math&#39;</span><span class="p">;</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="k">import</span> <span class="s1">&#39;package:flame/components.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 4</span><span class="k">import</span> <span class="s1">&#39;package:flame/experimental.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 5</span><span class="k">import</span> <span class="s1">&#39;package:flame/flame.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 6</span><span class="k">import</span> <span class="s1">&#39;package:flame/game.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="k">import</span> <span class="s1">&#39;components/card.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 9</span><span class="k">import</span> <span class="s1">&#39;components/foundation.dart&#39;</span><span class="p">;</span>
<span class="linenos">10</span><span class="k">import</span> <span class="s1">&#39;components/pile.dart&#39;</span><span class="p">;</span>
<span class="linenos">11</span><span class="k">import</span> <span class="s1">&#39;components/stock.dart&#39;</span><span class="p">;</span>
<span class="linenos">12</span><span class="k">import</span> <span class="s1">&#39;components/waste.dart&#39;</span><span class="p">;</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="kd">class</span> <span class="nc">KlondikeGame</span> <span class="kd">extends</span> <span class="n">FlameGame</span> <span class="p">{</span>
<span class="linenos">15</span>  <span class="kd">static</span> <span class="k">const</span> <span class="kt">double</span> <span class="n">cardGap</span> <span class="o">=</span> <span class="m">175.0</span><span class="p">;</span>
<span class="linenos">16</span>  <span class="kd">static</span> <span class="k">const</span> <span class="kt">double</span> <span class="n">cardWidth</span> <span class="o">=</span> <span class="m">1000.0</span><span class="p">;</span>
<span class="linenos">17</span>  <span class="kd">static</span> <span class="k">const</span> <span class="kt">double</span> <span class="n">cardHeight</span> <span class="o">=</span> <span class="m">1400.0</span><span class="p">;</span>
<span class="linenos">18</span>  <span class="kd">static</span> <span class="k">const</span> <span class="kt">double</span> <span class="n">cardRadius</span> <span class="o">=</span> <span class="m">100.0</span><span class="p">;</span>
<span class="linenos">19</span>  <span class="kd">static</span> <span class="kd">final</span> <span class="n">Vector2</span> <span class="n">cardSize</span> <span class="o">=</span> <span class="n">Vector2</span><span class="p">(</span><span class="n">cardWidth</span><span class="p">,</span> <span class="n">cardHeight</span><span class="p">);</span>
<span class="linenos">20</span>
<span class="linenos">21</span>  <span class="nd">@override</span>
<span class="linenos">22</span>  <span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span> <span class="n">onLoad</span><span class="p">()</span> <span class="kd">async</span> <span class="p">{</span>
<span class="linenos">23</span>    <span class="kd">await</span> <span class="n">Flame</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;klondike-sprites.png&#39;</span><span class="p">);</span>
<span class="linenos">24</span>
<span class="linenos">25</span>    <span class="kd">final</span> <span class="n">stock</span> <span class="o">=</span> <span class="n">Stock</span><span class="p">()</span>
<span class="linenos">26</span>      <span class="p">..</span><span class="n">size</span> <span class="o">=</span> <span class="n">cardSize</span>
<span class="linenos">27</span>      <span class="p">..</span><span class="n">position</span> <span class="o">=</span> <span class="n">Vector2</span><span class="p">(</span><span class="n">cardGap</span><span class="p">,</span> <span class="n">cardGap</span><span class="p">);</span>
<span class="linenos">28</span>    <span class="kd">final</span> <span class="n">waste</span> <span class="o">=</span> <span class="n">Waste</span><span class="p">()</span>
<span class="linenos">29</span>      <span class="p">..</span><span class="n">size</span> <span class="o">=</span> <span class="n">cardSize</span>
<span class="linenos">30</span>      <span class="p">..</span><span class="n">position</span> <span class="o">=</span> <span class="n">Vector2</span><span class="p">(</span><span class="n">cardWidth</span> <span class="o">+</span> <span class="m">2</span> <span class="o">*</span> <span class="n">cardGap</span><span class="p">,</span> <span class="n">cardGap</span><span class="p">);</span>
<span class="linenos">31</span>    <span class="kd">final</span> <span class="n">foundations</span> <span class="o">=</span> <span class="n">List</span><span class="p">.</span><span class="n">generate</span><span class="p">(</span>
<span class="linenos">32</span>      <span class="m">4</span><span class="p">,</span>
<span class="linenos">33</span>      <span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">Foundation</span><span class="p">()</span>
<span class="linenos">34</span>        <span class="p">..</span><span class="n">size</span> <span class="o">=</span> <span class="n">cardSize</span>
<span class="linenos">35</span>        <span class="p">..</span><span class="n">position</span> <span class="o">=</span>
<span class="linenos">36</span>            <span class="n">Vector2</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="m">3</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">cardWidth</span> <span class="o">+</span> <span class="n">cardGap</span><span class="p">)</span> <span class="o">+</span> <span class="n">cardGap</span><span class="p">,</span> <span class="n">cardGap</span><span class="p">),</span>
<span class="linenos">37</span>    <span class="p">);</span>
<span class="linenos">38</span>    <span class="kd">final</span> <span class="n">piles</span> <span class="o">=</span> <span class="n">List</span><span class="p">.</span><span class="n">generate</span><span class="p">(</span>
<span class="linenos">39</span>      <span class="m">7</span><span class="p">,</span>
<span class="linenos">40</span>      <span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">Pile</span><span class="p">()</span>
<span class="linenos">41</span>        <span class="p">..</span><span class="n">size</span> <span class="o">=</span> <span class="n">cardSize</span>
<span class="linenos">42</span>        <span class="p">..</span><span class="n">position</span> <span class="o">=</span> <span class="n">Vector2</span><span class="p">(</span>
<span class="linenos">43</span>          <span class="n">cardGap</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="p">(</span><span class="n">cardWidth</span> <span class="o">+</span> <span class="n">cardGap</span><span class="p">),</span>
<span class="linenos">44</span>          <span class="n">cardHeight</span> <span class="o">+</span> <span class="m">2</span> <span class="o">*</span> <span class="n">cardGap</span><span class="p">,</span>
<span class="linenos">45</span>        <span class="p">),</span>
<span class="linenos">46</span>    <span class="p">);</span>
<span class="linenos">47</span>
<span class="linenos">48</span>    <span class="kd">final</span> <span class="n">world</span> <span class="o">=</span> <span class="n">World</span><span class="p">()</span>
<span class="linenos">49</span>      <span class="p">..</span><span class="n">add</span><span class="p">(</span><span class="n">stock</span><span class="p">)</span>
<span class="linenos">50</span>      <span class="p">..</span><span class="n">add</span><span class="p">(</span><span class="n">waste</span><span class="p">)</span>
<span class="linenos">51</span>      <span class="p">..</span><span class="n">addAll</span><span class="p">(</span><span class="n">foundations</span><span class="p">)</span>
<span class="linenos">52</span>      <span class="p">..</span><span class="n">addAll</span><span class="p">(</span><span class="n">piles</span><span class="p">);</span>
<span class="linenos">53</span>    <span class="n">add</span><span class="p">(</span><span class="n">world</span><span class="p">);</span>
<span class="linenos">54</span>
<span class="linenos">55</span>    <span class="kd">final</span> <span class="n">camera</span> <span class="o">=</span> <span class="n">CameraComponent</span><span class="p">(</span><span class="nl">world:</span> <span class="n">world</span><span class="p">)</span>
<span class="linenos">56</span>      <span class="p">..</span><span class="n">viewfinder</span><span class="p">.</span><span class="n">visibleGameSize</span> <span class="o">=</span>
<span class="linenos">57</span>          <span class="n">Vector2</span><span class="p">(</span><span class="n">cardWidth</span> <span class="o">*</span> <span class="m">7</span> <span class="o">+</span> <span class="n">cardGap</span> <span class="o">*</span> <span class="m">8</span><span class="p">,</span> <span class="m">4</span> <span class="o">*</span> <span class="n">cardHeight</span> <span class="o">+</span> <span class="m">3</span> <span class="o">*</span> <span class="n">cardGap</span><span class="p">)</span>
<span class="linenos">58</span>      <span class="p">..</span><span class="n">viewfinder</span><span class="p">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">Vector2</span><span class="p">(</span><span class="n">cardWidth</span> <span class="o">*</span> <span class="m">3.5</span> <span class="o">+</span> <span class="n">cardGap</span> <span class="o">*</span> <span class="m">4</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
<span class="linenos">59</span>      <span class="p">..</span><span class="n">viewfinder</span><span class="p">.</span><span class="n">anchor</span> <span class="o">=</span> <span class="n">Anchor</span><span class="p">.</span><span class="n">topCenter</span><span class="p">;</span>
<span class="linenos">60</span>    <span class="n">add</span><span class="p">(</span><span class="n">camera</span><span class="p">);</span>
<span class="linenos">61</span>
<span class="linenos">62</span>    <span class="kd">final</span> <span class="n">random</span> <span class="o">=</span> <span class="n">Random</span><span class="p">();</span>
<span class="linenos">63</span>    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="n">i</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="m">7</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos">64</span>      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="n">j</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="m">4</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos">65</span>        <span class="kd">final</span> <span class="n">card</span> <span class="o">=</span> <span class="n">Card</span><span class="p">(</span><span class="n">random</span><span class="p">.</span><span class="n">nextInt</span><span class="p">(</span><span class="m">13</span><span class="p">)</span> <span class="o">+</span> <span class="m">1</span><span class="p">,</span> <span class="n">random</span><span class="p">.</span><span class="n">nextInt</span><span class="p">(</span><span class="m">4</span><span class="p">))</span>
<span class="linenos">66</span>          <span class="p">..</span><span class="n">position</span> <span class="o">=</span> <span class="n">Vector2</span><span class="p">(</span><span class="m">100</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="m">1150</span><span class="p">,</span> <span class="m">100</span> <span class="o">+</span> <span class="n">j</span> <span class="o">*</span> <span class="m">1500</span><span class="p">)</span>
<span class="linenos">67</span>          <span class="p">..</span><span class="n">addToParent</span><span class="p">(</span><span class="n">world</span><span class="p">);</span>
<span class="linenos">68</span>        <span class="c1">// flip the card face-up with 90% probability</span>
<span class="linenos">69</span>        <span class="k">if</span> <span class="p">(</span><span class="n">random</span><span class="p">.</span><span class="n">nextDouble</span><span class="p">()</span> <span class="o">&lt;</span> <span class="m">0.9</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos">70</span>          <span class="n">card</span><span class="p">.</span><span class="n">flip</span><span class="p">();</span>
<span class="linenos">71</span>        <span class="p">}</span>
<span class="linenos">72</span>      <span class="p">}</span>
<span class="linenos">73</span>    <span class="p">}</span>
<span class="linenos">74</span>  <span class="p">}</span>
<span class="linenos">75</span><span class="p">}</span>
<span class="linenos">76</span>
<span class="linenos">77</span><span class="n">Sprite</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">,</span> <span class="kt">double</span> <span class="n">y</span><span class="p">,</span> <span class="kt">double</span> <span class="n">width</span><span class="p">,</span> <span class="kt">double</span> <span class="n">height</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos">78</span>  <span class="k">return</span> <span class="n">Sprite</span><span class="p">(</span>
<span class="linenos">79</span>    <span class="n">Flame</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">fromCache</span><span class="p">(</span><span class="s1">&#39;klondike-sprites.png&#39;</span><span class="p">),</span>
<span class="linenos">80</span>    <span class="nl">srcPosition:</span> <span class="n">Vector2</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span>
<span class="linenos">81</span>    <span class="nl">srcSize:</span> <span class="n">Vector2</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">),</span>
<span class="linenos">82</span>  <span class="p">);</span>
<span class="linenos">83</span><span class="p">}</span>
</pre></div>
</div>
<div class="filename docutils container">
main.dart</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">import</span> <span class="s1">&#39;package:flame/game.dart&#39;</span><span class="p">;</span>
<span class="linenos">2</span><span class="k">import</span> <span class="s1">&#39;package:flutter/widgets.dart&#39;</span><span class="p">;</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="k">import</span> <span class="s1">&#39;klondike_game.dart&#39;</span><span class="p">;</span>
<span class="linenos">5</span>
<span class="linenos">6</span><span class="kt">void</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos">7</span>  <span class="kd">final</span> <span class="n">game</span> <span class="o">=</span> <span class="n">KlondikeGame</span><span class="p">();</span>
<span class="linenos">8</span>  <span class="n">runApp</span><span class="p">(</span><span class="n">GameWidget</span><span class="p">(</span><span class="nl">game:</span> <span class="n">game</span><span class="p">));</span>
<span class="linenos">9</span><span class="p">}</span>
</pre></div>
</div>
<div class="filename docutils container">
rank.dart</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">import</span> <span class="s1">&#39;package:flame/components.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 2</span><span class="k">import</span> <span class="s1">&#39;package:flutter/foundation.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 3</span><span class="k">import</span> <span class="s1">&#39;klondike_game.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="nd">@immutable</span>
<span class="linenos"> 6</span><span class="kd">class</span> <span class="nc">Rank</span> <span class="p">{</span>
<span class="linenos"> 7</span>  <span class="kd">factory</span> <span class="n">Rank</span><span class="p">.</span><span class="n">fromInt</span><span class="p">(</span><span class="kt">int</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos"> 8</span>    <span class="k">assert</span><span class="p">(</span>
<span class="linenos"> 9</span>      <span class="n">value</span> <span class="o">&gt;=</span> <span class="m">1</span> <span class="o">&amp;&amp;</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="m">13</span><span class="p">,</span>
<span class="linenos">10</span>      <span class="s1">&#39;value is outside of the bounds of what a rank can be&#39;</span><span class="p">,</span>
<span class="linenos">11</span>    <span class="p">);</span>
<span class="linenos">12</span>    <span class="k">return</span> <span class="n">_singletons</span><span class="p">[</span><span class="n">value</span> <span class="o">-</span> <span class="m">1</span><span class="p">];</span>
<span class="linenos">13</span>  <span class="p">}</span>
<span class="linenos">14</span>
<span class="linenos">15</span>  <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span>
<span class="linenos">16</span>    <span class="k">this</span><span class="p">.</span><span class="n">value</span><span class="p">,</span>
<span class="linenos">17</span>    <span class="k">this</span><span class="p">.</span><span class="n">label</span><span class="p">,</span>
<span class="linenos">18</span>    <span class="kt">double</span> <span class="n">x1</span><span class="p">,</span>
<span class="linenos">19</span>    <span class="kt">double</span> <span class="n">y1</span><span class="p">,</span>
<span class="linenos">20</span>    <span class="kt">double</span> <span class="n">x2</span><span class="p">,</span>
<span class="linenos">21</span>    <span class="kt">double</span> <span class="n">y2</span><span class="p">,</span>
<span class="linenos">22</span>    <span class="kt">double</span> <span class="n">w</span><span class="p">,</span>
<span class="linenos">23</span>    <span class="kt">double</span> <span class="n">h</span><span class="p">,</span>
<span class="linenos">24</span>  <span class="p">)</span>   <span class="o">:</span> <span class="n">redSprite</span> <span class="o">=</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">),</span>
<span class="linenos">25</span>        <span class="n">blackSprite</span> <span class="o">=</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">);</span>
<span class="linenos">26</span>
<span class="linenos">27</span>  <span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="p">;</span>
<span class="linenos">28</span>  <span class="kd">final</span> <span class="kt">String</span> <span class="n">label</span><span class="p">;</span>
<span class="linenos">29</span>  <span class="kd">final</span> <span class="n">Sprite</span> <span class="n">redSprite</span><span class="p">;</span>
<span class="linenos">30</span>  <span class="kd">final</span> <span class="n">Sprite</span> <span class="n">blackSprite</span><span class="p">;</span>
<span class="linenos">31</span>
<span class="linenos">32</span>  <span class="kd">static</span> <span class="kd">late</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Rank</span><span class="o">&gt;</span> <span class="n">_singletons</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">33</span>    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="m">335</span><span class="p">,</span> <span class="m">164</span><span class="p">,</span> <span class="m">789</span><span class="p">,</span> <span class="m">161</span><span class="p">,</span> <span class="m">120</span><span class="p">,</span> <span class="m">129</span><span class="p">),</span>
<span class="linenos">34</span>    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="m">20</span><span class="p">,</span> <span class="m">19</span><span class="p">,</span> <span class="m">15</span><span class="p">,</span> <span class="m">322</span><span class="p">,</span> <span class="m">83</span><span class="p">,</span> <span class="m">125</span><span class="p">),</span>
<span class="linenos">35</span>    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="m">122</span><span class="p">,</span> <span class="m">19</span><span class="p">,</span> <span class="m">117</span><span class="p">,</span> <span class="m">322</span><span class="p">,</span> <span class="m">80</span><span class="p">,</span> <span class="m">127</span><span class="p">),</span>
<span class="linenos">36</span>    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="m">213</span><span class="p">,</span> <span class="m">12</span><span class="p">,</span> <span class="m">208</span><span class="p">,</span> <span class="m">315</span><span class="p">,</span> <span class="m">93</span><span class="p">,</span> <span class="m">132</span><span class="p">),</span>
<span class="linenos">37</span>    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="m">314</span><span class="p">,</span> <span class="m">21</span><span class="p">,</span> <span class="m">309</span><span class="p">,</span> <span class="m">324</span><span class="p">,</span> <span class="m">85</span><span class="p">,</span> <span class="m">125</span><span class="p">),</span>
<span class="linenos">38</span>    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">6</span><span class="p">,</span> <span class="s1">&#39;6&#39;</span><span class="p">,</span> <span class="m">419</span><span class="p">,</span> <span class="m">17</span><span class="p">,</span> <span class="m">414</span><span class="p">,</span> <span class="m">320</span><span class="p">,</span> <span class="m">84</span><span class="p">,</span> <span class="m">129</span><span class="p">),</span>
<span class="linenos">39</span>    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">7</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">,</span> <span class="m">509</span><span class="p">,</span> <span class="m">21</span><span class="p">,</span> <span class="m">505</span><span class="p">,</span> <span class="m">324</span><span class="p">,</span> <span class="m">92</span><span class="p">,</span> <span class="m">128</span><span class="p">),</span>
<span class="linenos">40</span>    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">8</span><span class="p">,</span> <span class="s1">&#39;8&#39;</span><span class="p">,</span> <span class="m">612</span><span class="p">,</span> <span class="m">19</span><span class="p">,</span> <span class="m">607</span><span class="p">,</span> <span class="m">322</span><span class="p">,</span> <span class="m">78</span><span class="p">,</span> <span class="m">127</span><span class="p">),</span>
<span class="linenos">41</span>    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">9</span><span class="p">,</span> <span class="s1">&#39;9&#39;</span><span class="p">,</span> <span class="m">709</span><span class="p">,</span> <span class="m">19</span><span class="p">,</span> <span class="m">704</span><span class="p">,</span> <span class="m">322</span><span class="p">,</span> <span class="m">84</span><span class="p">,</span> <span class="m">130</span><span class="p">),</span>
<span class="linenos">42</span>    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="s1">&#39;10&#39;</span><span class="p">,</span> <span class="m">810</span><span class="p">,</span> <span class="m">20</span><span class="p">,</span> <span class="m">805</span><span class="p">,</span> <span class="m">322</span><span class="p">,</span> <span class="m">137</span><span class="p">,</span> <span class="m">127</span><span class="p">),</span>
<span class="linenos">43</span>    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">11</span><span class="p">,</span> <span class="s1">&#39;J&#39;</span><span class="p">,</span> <span class="m">15</span><span class="p">,</span> <span class="m">170</span><span class="p">,</span> <span class="m">469</span><span class="p">,</span> <span class="m">167</span><span class="p">,</span> <span class="m">56</span><span class="p">,</span> <span class="m">126</span><span class="p">),</span>
<span class="linenos">44</span>    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">12</span><span class="p">,</span> <span class="s1">&#39;Q&#39;</span><span class="p">,</span> <span class="m">92</span><span class="p">,</span> <span class="m">168</span><span class="p">,</span> <span class="m">547</span><span class="p">,</span> <span class="m">165</span><span class="p">,</span> <span class="m">132</span><span class="p">,</span> <span class="m">128</span><span class="p">),</span>
<span class="linenos">45</span>    <span class="n">Rank</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">13</span><span class="p">,</span> <span class="s1">&#39;K&#39;</span><span class="p">,</span> <span class="m">243</span><span class="p">,</span> <span class="m">170</span><span class="p">,</span> <span class="m">696</span><span class="p">,</span> <span class="m">167</span><span class="p">,</span> <span class="m">92</span><span class="p">,</span> <span class="m">123</span><span class="p">),</span>
<span class="linenos">46</span>  <span class="p">];</span>
<span class="linenos">47</span><span class="p">}</span>
</pre></div>
</div>
<div class="filename docutils container">
suit.dart</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">import</span> <span class="s1">&#39;package:flame/sprite.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 2</span><span class="k">import</span> <span class="s1">&#39;package:flutter/foundation.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 3</span><span class="k">import</span> <span class="s1">&#39;klondike_game.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="nd">@immutable</span>
<span class="linenos"> 6</span><span class="kd">class</span> <span class="nc">Suit</span> <span class="p">{</span>
<span class="linenos"> 7</span>  <span class="kd">factory</span> <span class="n">Suit</span><span class="p">.</span><span class="n">fromInt</span><span class="p">(</span><span class="kt">int</span> <span class="n">index</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos"> 8</span>    <span class="k">assert</span><span class="p">(</span>
<span class="linenos"> 9</span>      <span class="n">index</span> <span class="o">&gt;=</span> <span class="m">0</span> <span class="o">&amp;&amp;</span> <span class="n">index</span> <span class="o">&lt;=</span> <span class="m">3</span><span class="p">,</span>
<span class="linenos">10</span>      <span class="s1">&#39;index is outside of the bounds of what a suit can be&#39;</span><span class="p">,</span>
<span class="linenos">11</span>    <span class="p">);</span>
<span class="linenos">12</span>    <span class="k">return</span> <span class="n">_singletons</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
<span class="linenos">13</span>  <span class="p">}</span>
<span class="linenos">14</span>
<span class="linenos">15</span>  <span class="n">Suit</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">value</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">label</span><span class="p">,</span> <span class="kt">double</span> <span class="n">x</span><span class="p">,</span> <span class="kt">double</span> <span class="n">y</span><span class="p">,</span> <span class="kt">double</span> <span class="n">w</span><span class="p">,</span> <span class="kt">double</span> <span class="n">h</span><span class="p">)</span>
<span class="linenos">16</span>      <span class="o">:</span> <span class="n">sprite</span> <span class="o">=</span> <span class="n">klondikeSprite</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">);</span>
<span class="linenos">17</span>
<span class="linenos">18</span>  <span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="p">;</span>
<span class="linenos">19</span>  <span class="kd">final</span> <span class="kt">String</span> <span class="n">label</span><span class="p">;</span>
<span class="linenos">20</span>  <span class="kd">final</span> <span class="n">Sprite</span> <span class="n">sprite</span><span class="p">;</span>
<span class="linenos">21</span>
<span class="linenos">22</span>  <span class="kd">static</span> <span class="kd">late</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Suit</span><span class="o">&gt;</span> <span class="n">_singletons</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">23</span>    <span class="n">Suit</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="s1">&#39;♥&#39;</span><span class="p">,</span> <span class="m">1176</span><span class="p">,</span> <span class="m">17</span><span class="p">,</span> <span class="m">172</span><span class="p">,</span> <span class="m">183</span><span class="p">),</span>
<span class="linenos">24</span>    <span class="n">Suit</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="s1">&#39;♦&#39;</span><span class="p">,</span> <span class="m">973</span><span class="p">,</span> <span class="m">14</span><span class="p">,</span> <span class="m">177</span><span class="p">,</span> <span class="m">182</span><span class="p">),</span>
<span class="linenos">25</span>    <span class="n">Suit</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="s1">&#39;♣&#39;</span><span class="p">,</span> <span class="m">974</span><span class="p">,</span> <span class="m">226</span><span class="p">,</span> <span class="m">184</span><span class="p">,</span> <span class="m">172</span><span class="p">),</span>
<span class="linenos">26</span>    <span class="n">Suit</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="s1">&#39;♠&#39;</span><span class="p">,</span> <span class="m">1178</span><span class="p">,</span> <span class="m">220</span><span class="p">,</span> <span class="m">176</span><span class="p">,</span> <span class="m">182</span><span class="p">),</span>
<span class="linenos">27</span>  <span class="p">];</span>
<span class="linenos">28</span>
<span class="linenos">29</span>  <span class="c1">/// Hearts and Diamonds are red, while Clubs and Spades are black.</span>
<span class="linenos">30</span>  <span class="kt">bool</span> <span class="kd">get</span> <span class="n">isRed</span> <span class="o">=&gt;</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="m">1</span><span class="p">;</span>
<span class="linenos">31</span>  <span class="kt">bool</span> <span class="kd">get</span> <span class="n">isBlack</span> <span class="o">=&gt;</span> <span class="n">value</span> <span class="o">&gt;=</span> <span class="m">2</span><span class="p">;</span>
<span class="linenos">32</span><span class="p">}</span>
</pre></div>
</div>
</div>
<button class="flutter-app-button code" onclick="open_code_listings(&quot;tutorials-klondike-app-source&quot;)">Code</button></section>
</section>
</section>


    </div>
    <div class="copyright">
      The content on this page is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0 License</a>,
      and code samples under the <a href="https://raw.githubusercontent.com/flame-engine/flame/main/LICENSE">MIT License</a>.
    </div>
    <div class="prev-next-area">
      <a class="left-prev" id="prev-link" href="step2.html" title="previous page">
        <i class="fa fa-angle-left"></i>
        <div class="prev-next-info">
          <p class="prev-next-subtitle">Previous:</p>
          <p class="prev-next-title">2. Scaffolding</p>
        </div>
      </a>
      <div class='expander'></div>
      <a class="right-next" id="next-link" href="step4.html" title="next page">
        <div class="prev-next-info">
          <p class="prev-next-subtitle">Next:</p>
          <p class="prev-next-title">Gameplay</p>
        </div>
        <i class="fa fa-angle-right"></i>
      </a>
    </div>
  </div>

  <div class="sidebar-right">
    
    <div class="nav-right" role="navigation" aria-label="table of contents">
      <div id='toc-local' class='list-group'>
 <div class='header'><i class='fa fa-list'></i> Contents</div>
  <a href='#suit' class='list-group-item level-1'>Suit</a>
  <a href='#rank' class='list-group-item level-1'>Rank</a>
  <a href='#card-component' class='list-group-item level-1'>Card component</a>
  <a href='#rendering' class='list-group-item level-2'>Rendering</a>
  <a href='#renderback' class='list-group-item level-2'>renderBack()</a>
  <a href='#renderfront' class='list-group-item level-2'>renderFront()</a>
</div>

    </div>
  </div>

  <div class="expander"></div>
</div>




</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
<meta name="robots" content="noindex">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Joints &#8212; Flame</title>
  <!-- Stylesheets -->
  <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b20cc3f5" />
  <link rel="stylesheet" type="text/css" href="../../_static/basic.css?v=eeb27264" />
  <link rel="stylesheet" type="text/css" href="../../_static/dart_domain.css" />
  <link rel="stylesheet" type="text/css" href="../../_static/flutter_app.css?v=6984c178" />
  <link rel="stylesheet" type="text/css" href="../../_static/package.css?v=7889e545" />
  <link rel="stylesheet" type="text/css" href="../../_static/yarn_lexer.css?v=932ca0ec" />
  <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
  <link rel="stylesheet" type="text/css" href="../../_static/flames.css?v=37920019" />
  <link rel="stylesheet" type="text/css" href="../../_static/copy-button.css?v=deecb4da" />
  <!-- Scripts -->
  <script src="../../_static/jquery.js?v=5d32c60e"></script>
  <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
  <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
  <script src="../../_static/doctools.js?v=0b60eaae"></script>
  <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
  <script src="../../_static/flutter_app.js?v=3619378f"></script>
  <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
  <script src="../../_static/copybutton.js?v=f281be69"></script>
  <script src="../../_static/versions.js?v=58484017"></script>
  <script src="../../_static/menu-expand.js?v=8e297497"></script>
  <!--script src="searchindex.js" defer></script-->
  <!-- Links -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,400;0,700;1,400;1,700&display=swap">
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../../_static/fontawesome/fa-brands-400.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../../_static/fontawesome/fa-solid-900.woff2">
  <link rel="stylesheet" href="../../_static/fontawesome/all.min.css">
  <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <link rel="index" title="Index" href="../../genindex.html" />
  <link rel="search" title="Search" href="../../search.html" />
  <link rel="next" title="flame_isolate" href="../flame_isolate/flame_isolate.html" />
  <link rel="prev" title="Forge2D" href="forge2d.html" />
</head>

<body data-spy="scroll" data-target="#toc-local" data-offset="80">

<div class="top-bar">
  <button id="menu-button" class="btn" title="Toggle menu"><i class="fa fa-bars"></i></button>
  <script type="text/javascript">
    jQuery(function(){
      $("#menu-button").click(function() {
        $(this).toggleClass("active");
        $(".sidebar-left-area").toggleClass("active");
      });

      $('div.nav-left li > a:not(:only-child)').wrap('<div class=submenu></div>');
      $('div.nav-left div.submenu').prepend('<a class=arrow>&nbsp;</a>');
      $('div.nav-left div.submenu > a.arrow')
        .click(function() {
          $(this.parentElement.parentElement).toggleClass('current');
        });

      // This function ensures that when navigating to internal targets within the page (such as
      // a section header), those targets will be visible to the user and not obscured by the menu
      // bar at the top of the page.
      function scrollToHashTarget() {
        if (location.hash !== location.oldHash) {
          window.scrollBy(0, -60);
          location.oldHash = location.hash;
        }
      }
      window.location.oldHash = '';
      window.addEventListener('hashchange', scrollToHashTarget);
      scrollToHashTarget();
    });
  </script>

  <a href="../../index.html" class="logo_image">
    <img src="../../_static/logo_flame.png">
  </a>  
  <div class="highlight-box" role="alert" style="display:none">
    <div>
      <div class="title">highlighted:</div>
      <div class="content" id="highlight-content"></div>
    </div>
    <button type="button" class="close" data-dismiss="alert" aria-label="Dismiss">×</button>
  </div>
  <div class="expander"></div>

  <div class="versions-placeholder"></div>
  <a href="https://discord.com/invite/pxrBmy4" id="discord-button" class="btn"
     title="Blue Fire Discord server">
    <i class="fab fa-discord"></i>
  </a>
  <a href="https://github.com/flame-engine/flame/" id="github-button" class="btn"
     title="GitHub repository">
    <i class="fab fa-github"></i>
  </a>
</div>

<div class="sidebar-left-area">
  <div class="sidebar-left-bg"></div>
  <div class="sidebar-left">
    <div class="searchbox" role="search">
      <form id="search-form" action="../../search.html" method="get">
        <i class="icon fa fa-search"></i>
        <input type="search" class="form-control" id="search-input" name="q"
               placeholder="Search the docs..." autocomplete="off" />
      </form>
    </div>
    <div class="nav-left" role="navigation" aria-label="Main">
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../flame/flame.html">Flame</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../flame/structure.html">File Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/game_widget.html">Game Widget</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/game.html">Game Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/components.html">Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/router.html">Router</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/platforms.html">Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/collision_detection.html">Collision Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/effects.html">Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/camera_component.html">Camera Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/inputs/inputs.html">Inputs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../flame/inputs/drag_events.html">Drag Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/inputs/gesture_input.html">Gesture Input</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/inputs/keyboard_input.html">Keyboard Input</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/inputs/other_inputs.html">Other Inputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/inputs/tap_events.html">Tap Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/inputs/hardware_keyboard_detector.html">HardwareKeyboardDetector</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/rendering/rendering.html">Rendering</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../flame/rendering/palette.html">Colors and Palette</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/rendering/decorators.html">Decorators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/rendering/images.html">Images, Sprites and Animations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/rendering/layers.html">Layers and Snapshots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/rendering/particles.html">Particles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/rendering/text_rendering.html">Text Rendering</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/layout/layout.html">Layout</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../flame/layout/align_component.html">AlignComponent</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/overlays.html">Overlays</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flame/other/other.html">Other</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../flame/other/debug.html">Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/other/util.html">Utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flame/other/widgets.html">Widgets</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../bridge_packages.html">Bridge Packages</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../flame_audio/flame_audio.html">flame_audio</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../flame_audio/audio.html">General audio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flame_audio/bgm.html">Background music</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flame_audio/audio_pool.html">AudioPool</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../flame_bloc/flame_bloc.html">flame_bloc</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../flame_bloc/bloc.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flame_bloc/bloc_components.html">Components</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../flame_fire_atlas/flame_fire_atlas.html">flame_fire_atlas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../flame_fire_atlas/fire_atlas.html">Overview</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="flame_forge2d.html">flame_forge2d</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="forge2d.html">Overview</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Joints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../flame_isolate/flame_isolate.html">flame_isolate</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../flame_isolate/isolate.html">Overview</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../flame_lottie/flame_lottie.html">flame_lottie</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flame_network_assets/flame_network_assets.html">flame_network_assets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flame_oxygen/flame_oxygen.html">flame_oxygen</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../flame_rive/flame_rive.html">flame_rive</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../flame_rive/rive.html">Overview</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../flame_riverpod/flame_riverpod.html">flame_riverpod</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../flame_riverpod/riverpod.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flame_riverpod/component.html">Component</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flame_riverpod/widget.html">Widget</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../flame_splash_screen/flame_splash_screen.html">flame_splash_screen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flame_spine/flame_spine.html">flame_spine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flame_svg/flame_svg.html">flame_svg</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../flame_svg/svg.html">Overview</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../flame_tiled/flame_tiled.html">flame_tiled</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../flame_tiled/tiled.html">Tiled</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flame_tiled/layers.html">Layers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../other_modules/other_modules.html">Other Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../other_modules/jenny/jenny.html">jenny</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../other_modules/jenny/language/language.html">YarnSpinner language</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../other_modules/jenny/language/nodes.html">Nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../other_modules/jenny/language/lines.html">Lines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../other_modules/jenny/language/options.html">Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../other_modules/jenny/language/commands/commands.html">Commands</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../other_modules/jenny/language/commands/character.html">&lt;&lt;character&gt;&gt;</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../other_modules/jenny/language/commands/declare.html">&lt;&lt;declare&gt;&gt;</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../other_modules/jenny/language/commands/if.html">&lt;&lt;if&gt;&gt;</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../other_modules/jenny/language/commands/jump.html">&lt;&lt;jump&gt;&gt;</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../other_modules/jenny/language/commands/local.html">&lt;&lt;local&gt;&gt;</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../other_modules/jenny/language/commands/set.html">&lt;&lt;set&gt;&gt;</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../other_modules/jenny/language/commands/stop.html">&lt;&lt;stop&gt;&gt;</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../other_modules/jenny/language/commands/visit.html">&lt;&lt;visit&gt;&gt;</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../other_modules/jenny/language/commands/wait.html">&lt;&lt;wait&gt;&gt;</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../other_modules/jenny/language/commands/user_defined_commands.html">User-defined commands</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../other_modules/jenny/language/expressions/expressions.html">Expressions</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../other_modules/jenny/language/expressions/variables.html">Variables</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../other_modules/jenny/language/expressions/operators.html">Operators</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../other_modules/jenny/language/expressions/functions/functions.html">Functions</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../other_modules/jenny/language/expressions/functions/random.html">Random functions</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../other_modules/jenny/language/expressions/functions/numeric.html">Numeric functions</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../other_modules/jenny/language/expressions/functions/type.html">Type conversion functions</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../other_modules/jenny/language/expressions/functions/misc.html">Miscellaneous functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../other_modules/jenny/language/markup.html">Markup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../other_modules/jenny/runtime/jenny_runtime.html">Jenny API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../other_modules/jenny/runtime/character.html">Character</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../other_modules/jenny/runtime/character_storage.html">CharacterStorage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../other_modules/jenny/runtime/command_storage.html">CommandStorage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../other_modules/jenny/runtime/dialogue_choice.html">DialogueChoice</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../other_modules/jenny/runtime/dialogue_line.html">DialogueLine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../other_modules/jenny/runtime/dialogue_option.html">DialogueOption</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../other_modules/jenny/runtime/dialogue_runner.html">DialogueRunner</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../other_modules/jenny/runtime/dialogue_view.html">DialogueView</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../other_modules/jenny/runtime/function_storage.html">FunctionStorage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../other_modules/jenny/runtime/markup_attribute.html">MarkupAttribute</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../other_modules/jenny/runtime/node.html">Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../other_modules/jenny/runtime/user_defined_command.html">UserDefinedCommand</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../other_modules/jenny/runtime/variable_storage.html">VariableStorage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../other_modules/jenny/runtime/yarn_project.html">YarnProject</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../other_modules/oxygen/oxygen.html">oxygen</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../other_modules/oxygen/components.html">Components</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/tutorials.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/bare_flame_game.html">Bare Flame game</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/klondike/klondike.html">Klondike</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/klondike/step1.html">1. Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/klondike/step2.html">2. Scaffolding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/klondike/step3.html">3. Cards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/klondike/step4.html">4. Gameplay</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/klondike/step5.html">5. Additional features</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/platformer/platformer.html">Ember Quest</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/platformer/step_1.html">1. Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/platformer/step_2.html">2. Start Coding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/platformer/step_3.html">3. Building the World</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/platformer/step_4.html">4. Adding the Remaining Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/platformer/step_5.html">5. Controlling Movement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/platformer/step_6.html">6. Adding the HUD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/platformer/step_7.html">7. Adding Menus</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/space_shooter/space_shooter.html">Space Shooter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/space_shooter/step_1.html">1. Getting Started</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/space_shooter/step_2.html">2. Controlling the player and adding some graphics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../development/development.html">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../development/contributing.html">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/documentation.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/style_guide.html">Style Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/testing_guide.html">Tests Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../resources/resources.html">Resources</a><ul>
<li class="toctree-l2"><a class="reference external" href="https://pub.dev/documentation/flame/1.12.0/">Flame API</a></li>
<li class="toctree-l2"><a class="reference external" href="https://examples.flame-engine.org/#/">Flame Examples</a></li>
</ul>
</li>
</ul>

    </div>
  </div>
</div>

<div class="main-area">
  <div class="document-wrapper">
    <div class="warning hidden" id="version-warning">
      <p><strong>Warning:</strong> you are currently viewing the docs for an older
      version <span class="version"></span> of Flame.</p>
      <p>Please <a href="/">click here</a> to go see the documentation for the latest
      released version.</p>
    </div>
    <div class="document" role="main">
      
  <section class="tex2jax_ignore mathjax_ignore" id="joints">
<h1>Joints<a class="headerlink" href="#joints" title="Link to this heading">¶</a></h1>
<p>Joints are used to connect two different bodies together in various ways.
They help to simulate interactions between objects to create hinges, wheels, ropes, chains etc.</p>
<p>One <code class="docutils literal notranslate"><span class="pre">Body</span></code> in a joint may be of type <code class="docutils literal notranslate"><span class="pre">BodyType.static</span></code>. Joints between <code class="docutils literal notranslate"><span class="pre">BodyType.static</span></code> and/or
<code class="docutils literal notranslate"><span class="pre">BodyType.kinematic</span></code> are allowed, but have no effect and use some processing time.</p>
<p>To construct a <code class="docutils literal notranslate"><span class="pre">Joint</span></code>, you need to create a corresponding subclass of <code class="docutils literal notranslate"><span class="pre">JointDef</span></code>and initialize it
with its parameters.</p>
<p>To register a <code class="docutils literal notranslate"><span class="pre">Joint</span></code> use <code class="docutils literal notranslate"><span class="pre">world.createJoint</span></code>and later use <code class="docutils literal notranslate"><span class="pre">world.destroyJoint</span></code> when you want to
remove it.</p>
<section id="built-in-joints">
<h2>Built-in joints<a class="headerlink" href="#built-in-joints" title="Link to this heading">¶</a></h2>
<p>Currently, Forge2D supports the following joints:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#constantvolumejoint"><code class="docutils literal notranslate"><span class="pre">ConstantVolumeJoint</span></code></a></p></li>
<li><p><a class="reference internal" href="#distancejoint"><code class="docutils literal notranslate"><span class="pre">DistanceJoint</span></code></a></p></li>
<li><p><a class="reference internal" href="#frictionjoint"><code class="docutils literal notranslate"><span class="pre">FrictionJoint</span></code></a></p></li>
<li><p><a class="reference internal" href="#gearjoint"><code class="docutils literal notranslate"><span class="pre">GearJoint</span></code></a></p></li>
<li><p><a class="reference internal" href="#motorjoint"><code class="docutils literal notranslate"><span class="pre">MotorJoint</span></code></a></p></li>
<li><p><a class="reference internal" href="#mousejoint"><code class="docutils literal notranslate"><span class="pre">MouseJoint</span></code></a></p></li>
<li><p><a class="reference internal" href="#prismaticjoint"><code class="docutils literal notranslate"><span class="pre">PrismaticJoint</span></code></a></p></li>
<li><p><a class="reference internal" href="#pulleyjoint"><code class="docutils literal notranslate"><span class="pre">PulleyJoint</span></code></a></p></li>
<li><p><a class="reference internal" href="#revolutejoint"><code class="docutils literal notranslate"><span class="pre">RevoluteJoint</span></code></a></p></li>
<li><p><a class="reference internal" href="#ropejoint"><code class="docutils literal notranslate"><span class="pre">RopeJoint</span></code></a></p></li>
<li><p><a class="reference internal" href="#weldjoint"><code class="docutils literal notranslate"><span class="pre">WeldJoint</span></code></a></p></li>
<li><p>WheelJoint</p></li>
</ul>
<section id="constantvolumejoint">
<h3><code class="docutils literal notranslate"><span class="pre">ConstantVolumeJoint</span></code><a class="headerlink" href="#constantvolumejoint" title="Link to this heading">¶</a></h3>
<p>This type of joint connects a group of bodies together and maintains a constant volume within them.
Essentially, it is a set of <a class="reference internal" href="#distancejoint"><code class="docutils literal notranslate"><span class="pre">DistanceJoint</span></code></a>s, that connects all bodies one after
another.</p>
<p>It can for example be useful when simulating “soft-bodies”.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">constantVolumeJoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ConstantVolumeJointDef</span><span class="p">()</span>
<span class="w">    </span><span class="p">..</span><span class="n">frequencyHz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span>
<span class="w">    </span><span class="p">..</span><span class="n">dampingRatio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.8</span><span class="p">;</span>

<span class="w">  </span><span class="n">bodies</span><span class="p">.</span><span class="n">forEach</span><span class="p">((</span><span class="n">body</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">constantVolumeJoint</span><span class="p">.</span><span class="n">addBody</span><span class="p">(</span><span class="n">body</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>
<span class="w">    </span>
<span class="w">  </span><span class="n">world</span><span class="p">.</span><span class="n">createJoint</span><span class="p">(</span><span class="n">ConstantVolumeJoint</span><span class="p">(</span><span class="n">world</span><span class="p">,</span><span class="w"> </span><span class="n">constantVolumeJoint</span><span class="p">));</span>
</pre></div>
</div>
<button class="flutter-app-button popup" onclick="run_flutter_app(&quot;/1.12.0/_static/apps/examples/index.html?constant_volume_joint&quot;)">Run</button><div class="flutter-app-code docutils container" id="examples-source-constant_volume_joint">
<div class="filename docutils container">
constant_volume_joint.dart</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;dart:math&#39;</span><span class="p">;</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/balls.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 4</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/boundaries.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 5</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame/components.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 6</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame/events.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 7</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame_forge2d/flame_forge2d.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="kd">class</span><span class="w"> </span><span class="nc">ConstantVolumeJointExample</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Forge2DGame</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">10</span><span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;&#39;</span>
<span class="linenos">11</span><span class="s1">    This example shows how to use a `ConstantVolumeJoint`. Tap the screen to add</span>
<span class="linenos">12</span><span class="s1">    a bunch off balls, that maintain a constant volume within them.</span>
<span class="linenos">13</span><span class="s1">  &#39;&#39;&#39;</span><span class="p">;</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="w">  </span><span class="n">ConstantVolumeJointExample</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">super</span><span class="p">(</span><span class="nl">world:</span><span class="w"> </span><span class="n">SpriteBodyWorld</span><span class="p">());</span>
<span class="linenos">16</span><span class="p">}</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="kd">class</span><span class="w"> </span><span class="nc">SpriteBodyWorld</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Forge2DWorld</span>
<span class="linenos">19</span><span class="w">    </span><span class="kd">with</span><span class="w"> </span><span class="n">TapCallbacks</span><span class="p">,</span><span class="w"> </span><span class="n">HasGameReference</span><span class="o">&lt;</span><span class="n">Forge2DGame</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">20</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">21</span><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">onLoad</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">22</span><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">onLoad</span><span class="p">();</span>
<span class="linenos">23</span><span class="w">    </span><span class="n">addAll</span><span class="p">(</span><span class="n">createBoundaries</span><span class="p">(</span><span class="n">game</span><span class="p">));</span>
<span class="linenos">24</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">25</span>
<span class="linenos">26</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">27</span><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">onTapDown</span><span class="p">(</span><span class="n">TapDownEvent</span><span class="w"> </span><span class="n">info</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">28</span><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">onTapDown</span><span class="p">(</span><span class="n">info</span><span class="p">);</span>
<span class="linenos">29</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">center</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">info</span><span class="p">.</span><span class="n">localPosition</span><span class="p">;</span>
<span class="linenos">30</span>
<span class="linenos">31</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">numPieces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20</span><span class="p">;</span>
<span class="linenos">32</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">radius</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5.0</span><span class="p">;</span>
<span class="linenos">33</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">balls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Ball</span><span class="o">&gt;</span><span class="p">[];</span>
<span class="linenos">34</span>
<span class="linenos">35</span><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">numPieces</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">36</span><span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">radius</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cos</span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">numPieces</span><span class="p">));</span>
<span class="linenos">37</span><span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">radius</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">numPieces</span><span class="p">));</span>
<span class="linenos">38</span>
<span class="linenos">39</span><span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">ball</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Ball</span><span class="p">(</span><span class="n">Vector2</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">center</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">center</span><span class="p">.</span><span class="n">y</span><span class="p">),</span><span class="w"> </span><span class="nl">radius:</span><span class="w"> </span><span class="m">0.5</span><span class="p">);</span>
<span class="linenos">40</span>
<span class="linenos">41</span><span class="w">      </span><span class="n">add</span><span class="p">(</span><span class="n">ball</span><span class="p">);</span>
<span class="linenos">42</span><span class="w">      </span><span class="n">balls</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">ball</span><span class="p">);</span>
<span class="linenos">43</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="w">    </span><span class="kd">await</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">wait</span><span class="p">(</span><span class="n">balls</span><span class="p">.</span><span class="n">map</span><span class="p">((</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">loaded</span><span class="p">));</span>
<span class="linenos">46</span>
<span class="linenos">47</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">constantVolumeJoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ConstantVolumeJointDef</span><span class="p">()</span>
<span class="linenos">48</span><span class="w">      </span><span class="p">..</span><span class="n">frequencyHz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span>
<span class="linenos">49</span><span class="w">      </span><span class="p">..</span><span class="n">dampingRatio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.8</span><span class="p">;</span>
<span class="linenos">50</span>
<span class="linenos">51</span><span class="w">    </span><span class="n">balls</span><span class="p">.</span><span class="n">forEach</span><span class="p">((</span><span class="n">ball</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">52</span><span class="w">      </span><span class="n">constantVolumeJoint</span><span class="p">.</span><span class="n">addBody</span><span class="p">(</span><span class="n">ball</span><span class="p">.</span><span class="n">body</span><span class="p">);</span>
<span class="linenos">53</span><span class="w">    </span><span class="p">});</span>
<span class="linenos">54</span>
<span class="linenos">55</span><span class="w">    </span><span class="n">createJoint</span><span class="p">(</span>
<span class="linenos">56</span><span class="w">      </span><span class="n">ConstantVolumeJoint</span><span class="p">(</span>
<span class="linenos">57</span><span class="w">        </span><span class="n">physicsWorld</span><span class="p">,</span>
<span class="linenos">58</span><span class="w">        </span><span class="n">constantVolumeJoint</span><span class="p">,</span>
<span class="linenos">59</span><span class="w">      </span><span class="p">),</span>
<span class="linenos">60</span><span class="w">    </span><span class="p">);</span>
<span class="linenos">61</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">62</span><span class="p">}</span>
</pre></div>
</div>
</div>
<button class="flutter-app-button code" onclick="open_code_listings(&quot;examples-source-constant_volume_joint&quot;)">Code</button><p><code class="docutils literal notranslate"><span class="pre">ConstantVolumeJointDef</span></code> requires at least 3 bodies to be added using the <code class="docutils literal notranslate"><span class="pre">addBody</span></code> method. It also
has two optional parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">frequencyHz</span></code>: This parameter sets the frequency of oscillation of the joint. If it is not set to
0, the higher the value, the less springy each of the compound <code class="docutils literal notranslate"><span class="pre">DistantJoint</span></code>s are.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dampingRatio</span></code>: This parameter defines how quickly the oscillation comes to rest. It ranges from
0 to 1, where 0 means no damping and 1 indicates critical damping.</p></li>
</ul>
</section>
<section id="distancejoint">
<h3><code class="docutils literal notranslate"><span class="pre">DistanceJoint</span></code><a class="headerlink" href="#distancejoint" title="Link to this heading">¶</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">DistanceJoint</span></code> constrains two points on two bodies to remain at a fixed distance from each other.</p>
<p>You can view this as a massless, rigid rod.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">final</span><span class="w"> </span><span class="n">distanceJointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DistanceJointDef</span><span class="p">()</span>
<span class="w">  </span><span class="p">..</span><span class="n">initialize</span><span class="p">(</span><span class="n">firstBody</span><span class="p">,</span><span class="w"> </span><span class="n">secondBody</span><span class="p">,</span><span class="w"> </span><span class="n">firstBody</span><span class="p">.</span><span class="n">worldCenter</span><span class="p">,</span><span class="w"> </span><span class="n">secondBody</span><span class="p">.</span><span class="n">worldCenter</span><span class="p">)</span>
<span class="w">  </span><span class="p">..</span><span class="n">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span>
<span class="w">  </span><span class="p">..</span><span class="n">frequencyHz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span>
<span class="w">  </span><span class="p">..</span><span class="n">dampingRatio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.2</span><span class="p">;</span>

<span class="n">world</span><span class="p">.</span><span class="n">createJoint</span><span class="p">(</span><span class="n">DistanceJoint</span><span class="p">(</span><span class="n">distanceJointDef</span><span class="p">));</span>
</pre></div>
</div>
<button class="flutter-app-button popup" onclick="run_flutter_app(&quot;/1.12.0/_static/apps/examples/index.html?distance_joint&quot;)">Run</button><div class="flutter-app-code docutils container" id="examples-source-distance_joint">
<div class="filename docutils container">
distance_joint.dart</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/balls.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 2</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/boundaries.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 3</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame/components.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 4</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame/events.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 5</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame_forge2d/flame_forge2d.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="kd">class</span><span class="w"> </span><span class="nc">DistanceJointExample</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Forge2DGame</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 8</span><span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;&#39;</span>
<span class="linenos"> 9</span><span class="s1">    This example shows how to use a `DistanceJoint`. Tap the screen to add a</span>
<span class="linenos">10</span><span class="s1">    pair of balls joined with a `DistanceJoint`.</span>
<span class="linenos">11</span><span class="s1">  &#39;&#39;&#39;</span><span class="p">;</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="w">  </span><span class="n">DistanceJointExample</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">super</span><span class="p">(</span><span class="nl">world:</span><span class="w"> </span><span class="n">DistanceJointWorld</span><span class="p">());</span>
<span class="linenos">14</span><span class="p">}</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="kd">class</span><span class="w"> </span><span class="nc">DistanceJointWorld</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Forge2DWorld</span>
<span class="linenos">17</span><span class="w">    </span><span class="kd">with</span><span class="w"> </span><span class="n">TapCallbacks</span><span class="p">,</span><span class="w"> </span><span class="n">HasGameReference</span><span class="o">&lt;</span><span class="n">Forge2DGame</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">18</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">19</span><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">onLoad</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">20</span><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">onLoad</span><span class="p">();</span>
<span class="linenos">21</span><span class="w">    </span><span class="n">addAll</span><span class="p">(</span><span class="n">createBoundaries</span><span class="p">(</span><span class="n">game</span><span class="p">));</span>
<span class="linenos">22</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">23</span>
<span class="linenos">24</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">25</span><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">onTapDown</span><span class="p">(</span><span class="n">TapDownEvent</span><span class="w"> </span><span class="n">info</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">26</span><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">onTapDown</span><span class="p">(</span><span class="n">info</span><span class="p">);</span>
<span class="linenos">27</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">tap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">info</span><span class="p">.</span><span class="n">localPosition</span><span class="p">;</span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Ball</span><span class="p">(</span><span class="n">tap</span><span class="p">);</span>
<span class="linenos">30</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Ball</span><span class="p">(</span><span class="n">Vector2</span><span class="p">(</span><span class="n">tap</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">tap</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">3</span><span class="p">));</span>
<span class="linenos">31</span><span class="w">    </span><span class="n">addAll</span><span class="p">([</span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">second</span><span class="p">]);</span>
<span class="linenos">32</span>
<span class="linenos">33</span><span class="w">    </span><span class="kd">await</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">wait</span><span class="p">([</span><span class="n">first</span><span class="p">.</span><span class="n">loaded</span><span class="p">,</span><span class="w"> </span><span class="n">second</span><span class="p">.</span><span class="n">loaded</span><span class="p">]);</span>
<span class="linenos">34</span>
<span class="linenos">35</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">distanceJointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DistanceJointDef</span><span class="p">()</span>
<span class="linenos">36</span><span class="w">      </span><span class="p">..</span><span class="n">initialize</span><span class="p">(</span>
<span class="linenos">37</span><span class="w">        </span><span class="n">first</span><span class="p">.</span><span class="n">body</span><span class="p">,</span>
<span class="linenos">38</span><span class="w">        </span><span class="n">second</span><span class="p">.</span><span class="n">body</span><span class="p">,</span>
<span class="linenos">39</span><span class="w">        </span><span class="n">first</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">worldCenter</span><span class="p">,</span>
<span class="linenos">40</span><span class="w">        </span><span class="n">second</span><span class="p">.</span><span class="n">center</span><span class="p">,</span>
<span class="linenos">41</span><span class="w">      </span><span class="p">)</span>
<span class="linenos">42</span><span class="w">      </span><span class="p">..</span><span class="n">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span>
<span class="linenos">43</span><span class="w">      </span><span class="p">..</span><span class="n">frequencyHz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span>
<span class="linenos">44</span><span class="w">      </span><span class="p">..</span><span class="n">dampingRatio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.2</span><span class="p">;</span>
<span class="linenos">45</span>
<span class="linenos">46</span><span class="w">    </span><span class="n">createJoint</span><span class="p">(</span><span class="n">DistanceJoint</span><span class="p">(</span><span class="n">distanceJointDef</span><span class="p">));</span>
<span class="linenos">47</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">48</span><span class="p">}</span>
</pre></div>
</div>
</div>
<button class="flutter-app-button code" onclick="open_code_listings(&quot;examples-source-distance_joint&quot;)">Code</button><p>To create a <code class="docutils literal notranslate"><span class="pre">DistanceJointDef</span></code>, you can use the <code class="docutils literal notranslate"><span class="pre">initialize</span></code> method, which requires two bodies and a
world anchor point on each body. The definition uses local anchor points, allowing for a slight
violation of the constraint in the initial configuration. This is useful when saving and
loading a game.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">DistanceJointDef</span></code> has three optional parameters that you can set:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">length</span></code>: This parameter determines the distance between the two anchor points and must be greater
than 0. The default value is 1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frequencyHz</span></code>: This parameter sets the frequency of oscillation of the joint. If it is not set
to 0, the higher the value, the less springy the joint becomes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dampingRatio</span></code>: This parameter defines how quickly the oscillation comes to rest. It ranges from
0 to 1, where 0 means no damping and 1 indicates critical damping.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not use a zero or short length.</p>
</div>
</section>
<section id="frictionjoint">
<h3><code class="docutils literal notranslate"><span class="pre">FrictionJoint</span></code><a class="headerlink" href="#frictionjoint" title="Link to this heading">¶</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">FrictionJoint</span></code> is used for simulating friction in a top-down game. It provides 2D translational
friction and angular friction.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">FrictionJoint</span></code> isn’t related to the friction that occurs when two shapes collide in the x-y plane
of the screen. Instead, it’s designed to simulate friction along the z-axis, which is perpendicular
to the screen. The most common use-case for it is applying the friction force between a moving body
and the game floor.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">initialize</span></code> method of the <code class="docutils literal notranslate"><span class="pre">FrictionJointDef</span></code> method requires two bodies that will have friction
force applied to them, and an anchor.</p>
<p>The third parameter is the <code class="docutils literal notranslate"><span class="pre">anchor</span></code> point in the world coordinates where the friction force will be
applied. In most cases, it would be the center of the first object. However, for more complex
physics interactions between bodies, you can set the <code class="docutils literal notranslate"><span class="pre">anchor</span></code> point to a specific location on one or
both of the bodies.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">final</span><span class="w"> </span><span class="n">frictionJointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FrictionJointDef</span><span class="p">()</span>
<span class="w">  </span><span class="p">..</span><span class="n">initialize</span><span class="p">(</span><span class="n">ballBody</span><span class="p">,</span><span class="w"> </span><span class="n">floorBody</span><span class="p">,</span><span class="w"> </span><span class="n">ballBody</span><span class="p">.</span><span class="n">worldCenter</span><span class="p">)</span>
<span class="w">  </span><span class="p">..</span><span class="n">maxForce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">50</span>
<span class="w">  </span><span class="p">..</span><span class="n">maxTorque</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">50</span><span class="p">;</span>

<span class="w">  </span><span class="n">world</span><span class="p">.</span><span class="n">createJoint</span><span class="p">(</span><span class="n">FrictionJoint</span><span class="p">(</span><span class="n">frictionJointDef</span><span class="p">));</span>
</pre></div>
</div>
<button class="flutter-app-button popup" onclick="run_flutter_app(&quot;/1.12.0/_static/apps/examples/index.html?friction_joint&quot;)">Run</button><div class="flutter-app-code docutils container" id="examples-source-friction_joint">
<div class="filename docutils container">
friction_joint.dart</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/balls.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 2</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/boundaries.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 3</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame/components.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 4</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame/events.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 5</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame_forge2d/flame_forge2d.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="kd">class</span><span class="w"> </span><span class="nc">FrictionJointExample</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Forge2DGame</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 8</span><span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;&#39;</span>
<span class="linenos"> 9</span><span class="s1">    This example shows how to use a `FrictionJoint`. Tap the screen to move the</span>
<span class="linenos">10</span><span class="s1">    ball around and observe it slows down due to the friction force.</span>
<span class="linenos">11</span><span class="s1">  &#39;&#39;&#39;</span><span class="p">;</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="w">  </span><span class="n">FrictionJointExample</span><span class="p">()</span>
<span class="linenos">14</span><span class="w">      </span><span class="o">:</span><span class="w"> </span><span class="k">super</span><span class="p">(</span><span class="nl">gravity:</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">all</span><span class="p">(</span><span class="m">0</span><span class="p">),</span><span class="w"> </span><span class="nl">world:</span><span class="w"> </span><span class="n">FrictionJointWorld</span><span class="p">());</span>
<span class="linenos">15</span><span class="p">}</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="kd">class</span><span class="w"> </span><span class="nc">FrictionJointWorld</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Forge2DWorld</span>
<span class="linenos">18</span><span class="w">    </span><span class="kd">with</span><span class="w"> </span><span class="n">TapCallbacks</span><span class="p">,</span><span class="w"> </span><span class="n">HasGameReference</span><span class="o">&lt;</span><span class="n">Forge2DGame</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">19</span><span class="w">  </span><span class="kd">late</span><span class="w"> </span><span class="n">Wall</span><span class="w"> </span><span class="n">border</span><span class="p">;</span>
<span class="linenos">20</span><span class="w">  </span><span class="kd">late</span><span class="w"> </span><span class="n">Ball</span><span class="w"> </span><span class="n">ball</span><span class="p">;</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">23</span><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">onLoad</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">24</span><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">onLoad</span><span class="p">();</span>
<span class="linenos">25</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">boundaries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createBoundaries</span><span class="p">(</span><span class="n">game</span><span class="p">);</span>
<span class="linenos">26</span><span class="w">    </span><span class="n">border</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">boundaries</span><span class="p">.</span><span class="n">first</span><span class="p">;</span>
<span class="linenos">27</span><span class="w">    </span><span class="n">addAll</span><span class="p">(</span><span class="n">boundaries</span><span class="p">);</span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="w">    </span><span class="n">ball</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Ball</span><span class="p">(</span><span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">(),</span><span class="w"> </span><span class="nl">radius:</span><span class="w"> </span><span class="m">3</span><span class="p">);</span>
<span class="linenos">30</span><span class="w">    </span><span class="n">add</span><span class="p">(</span><span class="n">ball</span><span class="p">);</span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="w">    </span><span class="kd">await</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">wait</span><span class="p">([</span><span class="n">ball</span><span class="p">.</span><span class="n">loaded</span><span class="p">,</span><span class="w"> </span><span class="n">border</span><span class="p">.</span><span class="n">loaded</span><span class="p">]);</span>
<span class="linenos">33</span>
<span class="linenos">34</span><span class="w">    </span><span class="n">createFrictionJoint</span><span class="p">(</span><span class="n">ball</span><span class="p">.</span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="n">border</span><span class="p">.</span><span class="n">body</span><span class="p">);</span>
<span class="linenos">35</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">36</span>
<span class="linenos">37</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">38</span><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">onTapDown</span><span class="p">(</span><span class="n">TapDownEvent</span><span class="w"> </span><span class="n">info</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">39</span><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">onTapDown</span><span class="p">(</span><span class="n">info</span><span class="p">);</span>
<span class="linenos">40</span><span class="w">    </span><span class="n">ball</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">applyLinearImpulse</span><span class="p">(</span><span class="n">Vector2</span><span class="p">.</span><span class="n">random</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">5000</span><span class="p">);</span>
<span class="linenos">41</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">42</span>
<span class="linenos">43</span><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">createFrictionJoint</span><span class="p">(</span><span class="n">Body</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">Body</span><span class="w"> </span><span class="n">second</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">44</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">frictionJointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FrictionJointDef</span><span class="p">()</span>
<span class="linenos">45</span><span class="w">      </span><span class="p">..</span><span class="n">initialize</span><span class="p">(</span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">second</span><span class="p">,</span><span class="w"> </span><span class="n">first</span><span class="p">.</span><span class="n">worldCenter</span><span class="p">)</span>
<span class="linenos">46</span><span class="w">      </span><span class="p">..</span><span class="n">collideConnected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="linenos">47</span><span class="w">      </span><span class="p">..</span><span class="n">maxForce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">500</span>
<span class="linenos">48</span><span class="w">      </span><span class="p">..</span><span class="n">maxTorque</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">500</span><span class="p">;</span>
<span class="linenos">49</span>
<span class="linenos">50</span><span class="w">    </span><span class="n">createJoint</span><span class="p">(</span><span class="n">FrictionJoint</span><span class="p">(</span><span class="n">frictionJointDef</span><span class="p">));</span>
<span class="linenos">51</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">52</span><span class="p">}</span>
</pre></div>
</div>
</div>
<button class="flutter-app-button code" onclick="open_code_listings(&quot;examples-source-friction_joint&quot;)">Code</button><p>When creating a <code class="docutils literal notranslate"><span class="pre">FrictionJoint</span></code>, simulated friction can be applied via maximum force and torque
values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">maxForce</span></code>: the maximum translational friction which applied to the joined body. A higher value</p></li>
<li><p>simulates higher friction.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxTorque</span></code>: the maximum angular friction which may be applied to the joined body. A higher value</p></li>
<li><p>simulates higher friction.</p></li>
</ul>
<p>In other words, the former simulates the friction, when the body is sliding and the latter simulates
the friction when the body is spinning.</p>
</section>
<section id="gearjoint">
<h3><code class="docutils literal notranslate"><span class="pre">GearJoint</span></code><a class="headerlink" href="#gearjoint" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">GearJoint</span></code> is used to connect two joints together. Joints are required to be a
<a class="reference internal" href="#revolutejoint"><code class="docutils literal notranslate"><span class="pre">RevoluteJoint</span></code></a> or a <a class="reference internal" href="#prismaticjoint"><code class="docutils literal notranslate"><span class="pre">PrismaticJoint</span></code></a> in any combination.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The connected joints must attach a dynamic body to a static body.
The static body is expected to be a bodyA on those joints</p>
</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">final</span><span class="w"> </span><span class="n">gearJointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GearJointDef</span><span class="p">()</span>
<span class="w">  </span><span class="p">..</span><span class="n">bodyA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">firstJoint</span><span class="p">.</span><span class="n">bodyA</span>
<span class="w">  </span><span class="p">..</span><span class="n">bodyB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">secondJoint</span><span class="p">.</span><span class="n">bodyA</span>
<span class="w">  </span><span class="p">..</span><span class="n">joint1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">firstJoint</span>
<span class="w">  </span><span class="p">..</span><span class="n">joint2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">secondJoint</span>
<span class="w">  </span><span class="p">..</span><span class="n">ratio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">;</span>

<span class="n">world</span><span class="p">.</span><span class="n">createJoint</span><span class="p">(</span><span class="n">GearJoint</span><span class="p">(</span><span class="n">gearJointDef</span><span class="p">));</span>
</pre></div>
</div>
<button class="flutter-app-button popup" onclick="run_flutter_app(&quot;/1.12.0/_static/apps/examples/index.html?gear_joint&quot;)">Run</button><div class="flutter-app-code docutils container" id="examples-source-gear_joint">
<div class="filename docutils container">
gear_joint.dart</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;dart:ui&#39;</span><span class="p">;</span>
<span class="linenos">  2</span>
<span class="linenos">  3</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/balls.dart&#39;</span><span class="p">;</span>
<span class="linenos">  4</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/boxes.dart&#39;</span><span class="p">;</span>
<span class="linenos">  5</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame/components.dart&#39;</span><span class="p">;</span>
<span class="linenos">  6</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame_forge2d/flame_forge2d.dart&#39;</span><span class="p">;</span>
<span class="linenos">  7</span>
<span class="linenos">  8</span><span class="kd">class</span><span class="w"> </span><span class="nc">GearJointExample</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Forge2DGame</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">  9</span><span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;&#39;</span>
<span class="linenos"> 10</span><span class="s1">    This example shows how to use a `GearJoint`.</span>
<span class="linenos"> 11</span>
<span class="linenos"> 12</span><span class="s1">    Drag the box along the specified axis and observe gears respond to the</span>
<span class="linenos"> 13</span><span class="s1">    translation.</span>
<span class="linenos"> 14</span><span class="s1">  &#39;&#39;&#39;</span><span class="p">;</span>
<span class="linenos"> 15</span>
<span class="linenos"> 16</span><span class="w">  </span><span class="n">GearJointExample</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">super</span><span class="p">(</span><span class="nl">world:</span><span class="w"> </span><span class="n">GearJointWorld</span><span class="p">());</span>
<span class="linenos"> 17</span><span class="p">}</span>
<span class="linenos"> 18</span>
<span class="linenos"> 19</span><span class="kd">class</span><span class="w"> </span><span class="nc">GearJointWorld</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Forge2DWorld</span><span class="w"> </span><span class="kd">with</span><span class="w"> </span><span class="n">HasGameReference</span><span class="o">&lt;</span><span class="n">Forge2DGame</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 20</span><span class="w">  </span><span class="kd">late</span><span class="w"> </span><span class="n">PrismaticJoint</span><span class="w"> </span><span class="n">prismaticJoint</span><span class="p">;</span>
<span class="linenos"> 21</span><span class="w">  </span><span class="n">Vector2</span><span class="w"> </span><span class="n">boxAnchor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">();</span>
<span class="linenos"> 22</span>
<span class="linenos"> 23</span><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">boxWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">;</span>
<span class="linenos"> 24</span><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">ball1Radius</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">;</span>
<span class="linenos"> 25</span><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">ball2Radius</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">;</span>
<span class="linenos"> 26</span>
<span class="linenos"> 27</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos"> 28</span><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">onLoad</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 29</span><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">onLoad</span><span class="p">();</span>
<span class="linenos"> 30</span>
<span class="linenos"> 31</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">box</span><span class="w"> </span><span class="o">=</span>
<span class="linenos"> 32</span><span class="w">        </span><span class="n">DraggableBox</span><span class="p">(</span><span class="nl">startPosition:</span><span class="w"> </span><span class="n">boxAnchor</span><span class="p">,</span><span class="w"> </span><span class="nl">width:</span><span class="w"> </span><span class="n">boxWidth</span><span class="p">,</span><span class="w"> </span><span class="nl">height:</span><span class="w"> </span><span class="m">20</span><span class="p">);</span>
<span class="linenos"> 33</span><span class="w">    </span><span class="n">add</span><span class="p">(</span><span class="n">box</span><span class="p">);</span>
<span class="linenos"> 34</span>
<span class="linenos"> 35</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">ball1Anchor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">boxAnchor</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Vector2</span><span class="p">(</span><span class="n">boxWidth</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ball1Radius</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">);</span>
<span class="linenos"> 36</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">ball1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Ball</span><span class="p">(</span><span class="n">ball1Anchor</span><span class="p">,</span><span class="w"> </span><span class="nl">radius:</span><span class="w"> </span><span class="n">ball1Radius</span><span class="p">);</span>
<span class="linenos"> 37</span><span class="w">    </span><span class="n">add</span><span class="p">(</span><span class="n">ball1</span><span class="p">);</span>
<span class="linenos"> 38</span>
<span class="linenos"> 39</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">ball2Anchor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ball1Anchor</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Vector2</span><span class="p">(</span><span class="n">ball1Radius</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ball2Radius</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">);</span>
<span class="linenos"> 40</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">ball2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Ball</span><span class="p">(</span><span class="n">ball2Anchor</span><span class="p">,</span><span class="w"> </span><span class="nl">radius:</span><span class="w"> </span><span class="n">ball2Radius</span><span class="p">);</span>
<span class="linenos"> 41</span><span class="w">    </span><span class="n">add</span><span class="p">(</span><span class="n">ball2</span><span class="p">);</span>
<span class="linenos"> 42</span>
<span class="linenos"> 43</span><span class="w">    </span><span class="kd">await</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">wait</span><span class="p">([</span><span class="n">box</span><span class="p">.</span><span class="n">loaded</span><span class="p">,</span><span class="w"> </span><span class="n">ball1</span><span class="p">.</span><span class="n">loaded</span><span class="p">,</span><span class="w"> </span><span class="n">ball2</span><span class="p">.</span><span class="n">loaded</span><span class="p">]);</span>
<span class="linenos"> 44</span>
<span class="linenos"> 45</span><span class="w">    </span><span class="n">prismaticJoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createPrismaticJoint</span><span class="p">(</span><span class="n">box</span><span class="p">.</span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="n">boxAnchor</span><span class="p">);</span>
<span class="linenos"> 46</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">revoluteJoint1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createRevoluteJoint</span><span class="p">(</span><span class="n">ball1</span><span class="p">.</span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="n">ball1Anchor</span><span class="p">);</span>
<span class="linenos"> 47</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">revoluteJoint2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createRevoluteJoint</span><span class="p">(</span><span class="n">ball2</span><span class="p">.</span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="n">ball2Anchor</span><span class="p">);</span>
<span class="linenos"> 48</span>
<span class="linenos"> 49</span><span class="w">    </span><span class="n">createGearJoint</span><span class="p">(</span><span class="n">prismaticJoint</span><span class="p">,</span><span class="w"> </span><span class="n">revoluteJoint1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">);</span>
<span class="linenos"> 50</span><span class="w">    </span><span class="n">createGearJoint</span><span class="p">(</span><span class="n">revoluteJoint1</span><span class="p">,</span><span class="w"> </span><span class="n">revoluteJoint2</span><span class="p">,</span><span class="w"> </span><span class="m">0.5</span><span class="p">);</span>
<span class="linenos"> 51</span><span class="w">    </span><span class="n">add</span><span class="p">(</span><span class="n">JointRenderer</span><span class="p">(</span><span class="nl">joint:</span><span class="w"> </span><span class="n">prismaticJoint</span><span class="p">,</span><span class="w"> </span><span class="nl">anchor:</span><span class="w"> </span><span class="n">boxAnchor</span><span class="p">));</span>
<span class="linenos"> 52</span><span class="w">  </span><span class="p">}</span>
<span class="linenos"> 53</span>
<span class="linenos"> 54</span><span class="w">  </span><span class="n">PrismaticJoint</span><span class="w"> </span><span class="n">createPrismaticJoint</span><span class="p">(</span><span class="n">Body</span><span class="w"> </span><span class="n">box</span><span class="p">,</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">anchor</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 55</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">groundBody</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createBody</span><span class="p">(</span><span class="n">BodyDef</span><span class="p">());</span>
<span class="linenos"> 56</span>
<span class="linenos"> 57</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">prismaticJointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PrismaticJointDef</span><span class="p">()</span>
<span class="linenos"> 58</span><span class="w">      </span><span class="p">..</span><span class="n">initialize</span><span class="p">(</span>
<span class="linenos"> 59</span><span class="w">        </span><span class="n">groundBody</span><span class="p">,</span>
<span class="linenos"> 60</span><span class="w">        </span><span class="n">box</span><span class="p">,</span>
<span class="linenos"> 61</span><span class="w">        </span><span class="n">anchor</span><span class="p">,</span>
<span class="linenos"> 62</span><span class="w">        </span><span class="n">Vector2</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span>
<span class="linenos"> 63</span><span class="w">      </span><span class="p">)</span>
<span class="linenos"> 64</span><span class="w">      </span><span class="p">..</span><span class="n">enableLimit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="linenos"> 65</span><span class="w">      </span><span class="p">..</span><span class="n">lowerTranslation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="m">10</span>
<span class="linenos"> 66</span><span class="w">      </span><span class="p">..</span><span class="n">upperTranslation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">;</span>
<span class="linenos"> 67</span>
<span class="linenos"> 68</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">joint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PrismaticJoint</span><span class="p">(</span><span class="n">prismaticJointDef</span><span class="p">);</span>
<span class="linenos"> 69</span><span class="w">    </span><span class="n">createJoint</span><span class="p">(</span><span class="n">joint</span><span class="p">);</span>
<span class="linenos"> 70</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">joint</span><span class="p">;</span>
<span class="linenos"> 71</span><span class="w">  </span><span class="p">}</span>
<span class="linenos"> 72</span>
<span class="linenos"> 73</span><span class="w">  </span><span class="n">RevoluteJoint</span><span class="w"> </span><span class="n">createRevoluteJoint</span><span class="p">(</span><span class="n">Body</span><span class="w"> </span><span class="n">ball</span><span class="p">,</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">anchor</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 74</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">groundBody</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createBody</span><span class="p">(</span><span class="n">BodyDef</span><span class="p">());</span>
<span class="linenos"> 75</span>
<span class="linenos"> 76</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">revoluteJointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RevoluteJointDef</span><span class="p">()</span>
<span class="linenos"> 77</span><span class="w">      </span><span class="p">..</span><span class="n">initialize</span><span class="p">(</span>
<span class="linenos"> 78</span><span class="w">        </span><span class="n">groundBody</span><span class="p">,</span>
<span class="linenos"> 79</span><span class="w">        </span><span class="n">ball</span><span class="p">,</span>
<span class="linenos"> 80</span><span class="w">        </span><span class="n">anchor</span><span class="p">,</span>
<span class="linenos"> 81</span><span class="w">      </span><span class="p">);</span>
<span class="linenos"> 82</span>
<span class="linenos"> 83</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">joint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RevoluteJoint</span><span class="p">(</span><span class="n">revoluteJointDef</span><span class="p">);</span>
<span class="linenos"> 84</span><span class="w">    </span><span class="n">createJoint</span><span class="p">(</span><span class="n">joint</span><span class="p">);</span>
<span class="linenos"> 85</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">joint</span><span class="p">;</span>
<span class="linenos"> 86</span><span class="w">  </span><span class="p">}</span>
<span class="linenos"> 87</span>
<span class="linenos"> 88</span><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">createGearJoint</span><span class="p">(</span><span class="n">Joint</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">Joint</span><span class="w"> </span><span class="n">second</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">gearRatio</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 89</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">gearJointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GearJointDef</span><span class="p">()</span>
<span class="linenos"> 90</span><span class="w">      </span><span class="p">..</span><span class="n">bodyA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">first</span><span class="p">.</span><span class="n">bodyA</span>
<span class="linenos"> 91</span><span class="w">      </span><span class="p">..</span><span class="n">bodyB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">second</span><span class="p">.</span><span class="n">bodyA</span>
<span class="linenos"> 92</span><span class="w">      </span><span class="p">..</span><span class="n">joint1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">first</span>
<span class="linenos"> 93</span><span class="w">      </span><span class="p">..</span><span class="n">joint2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">second</span>
<span class="linenos"> 94</span><span class="w">      </span><span class="p">..</span><span class="n">ratio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gearRatio</span><span class="p">;</span>
<span class="linenos"> 95</span>
<span class="linenos"> 96</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">joint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GearJoint</span><span class="p">(</span><span class="n">gearJointDef</span><span class="p">);</span>
<span class="linenos"> 97</span><span class="w">    </span><span class="n">createJoint</span><span class="p">(</span><span class="n">joint</span><span class="p">);</span>
<span class="linenos"> 98</span><span class="w">  </span><span class="p">}</span>
<span class="linenos"> 99</span><span class="p">}</span>
<span class="linenos">100</span>
<span class="linenos">101</span><span class="kd">class</span><span class="w"> </span><span class="nc">JointRenderer</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">102</span><span class="w">  </span><span class="n">JointRenderer</span><span class="p">({</span><span class="kd">required</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">joint</span><span class="p">,</span><span class="w"> </span><span class="kd">required</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">anchor</span><span class="p">});</span>
<span class="linenos">103</span>
<span class="linenos">104</span><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">PrismaticJoint</span><span class="w"> </span><span class="n">joint</span><span class="p">;</span>
<span class="linenos">105</span><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">anchor</span><span class="p">;</span>
<span class="linenos">106</span><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">();</span>
<span class="linenos">107</span><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">();</span>
<span class="linenos">108</span>
<span class="linenos">109</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">110</span><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">render</span><span class="p">(</span><span class="n">Canvas</span><span class="w"> </span><span class="n">canvas</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">111</span><span class="w">    </span><span class="n">p1</span>
<span class="linenos">112</span><span class="w">      </span><span class="p">..</span><span class="n">setFrom</span><span class="p">(</span><span class="n">joint</span><span class="p">.</span><span class="n">getLocalAxisA</span><span class="p">())</span>
<span class="linenos">113</span><span class="w">      </span><span class="p">..</span><span class="n">scale</span><span class="p">(</span><span class="n">joint</span><span class="p">.</span><span class="n">getLowerLimit</span><span class="p">())</span>
<span class="linenos">114</span><span class="w">      </span><span class="p">..</span><span class="n">add</span><span class="p">(</span><span class="n">anchor</span><span class="p">);</span>
<span class="linenos">115</span><span class="w">    </span><span class="n">p2</span>
<span class="linenos">116</span><span class="w">      </span><span class="p">..</span><span class="n">setFrom</span><span class="p">(</span><span class="n">joint</span><span class="p">.</span><span class="n">getLocalAxisA</span><span class="p">())</span>
<span class="linenos">117</span><span class="w">      </span><span class="p">..</span><span class="n">scale</span><span class="p">(</span><span class="n">joint</span><span class="p">.</span><span class="n">getUpperLimit</span><span class="p">())</span>
<span class="linenos">118</span><span class="w">      </span><span class="p">..</span><span class="n">add</span><span class="p">(</span><span class="n">anchor</span><span class="p">);</span>
<span class="linenos">119</span>
<span class="linenos">120</span><span class="w">    </span><span class="n">canvas</span><span class="p">.</span><span class="n">drawLine</span><span class="p">(</span><span class="n">p1</span><span class="p">.</span><span class="n">toOffset</span><span class="p">(),</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="n">toOffset</span><span class="p">(),</span><span class="w"> </span><span class="n">debugPaint</span><span class="p">);</span>
<span class="linenos">121</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">122</span><span class="p">}</span>
</pre></div>
</div>
</div>
<button class="flutter-app-button code" onclick="open_code_listings(&quot;examples-source-gear_joint&quot;)">Code</button><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">joint1</span></code>, <code class="docutils literal notranslate"><span class="pre">joint2</span></code>: Connected revolute or prismatic joints</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bodyA</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyB</span></code>: Any bodies form the connected joints, as long as they are not the same body.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ratio</span></code>: Gear ratio</p></li>
</ul>
<p>Similarly to <a class="reference internal" href="#pulleyjoint"><code class="docutils literal notranslate"><span class="pre">PulleyJoint</span></code></a>, you can specify a gear ratio to bind the motions
together:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>coordinate1 + ratio * coordinate2 == constant 
</pre></div>
</div>
<p>The ratio can be negative or positive. If one joint is a <code class="docutils literal notranslate"><span class="pre">RevoluteJoint</span></code> and the other joint is a
<code class="docutils literal notranslate"><span class="pre">PrismaticJoint</span></code>, then the ratio will have units of length or units of 1/length.</p>
<p>Since the <code class="docutils literal notranslate"><span class="pre">GearJoint</span></code> depends on two other joints, if these are destroyed, the <code class="docutils literal notranslate"><span class="pre">GearJoint</span></code> needs to
be destroyed as well.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Manually destroy the <code class="docutils literal notranslate"><span class="pre">GearJoint</span></code> if joint1 or joint2 is destroyed</p>
</div>
</section>
<section id="motorjoint">
<h3><code class="docutils literal notranslate"><span class="pre">MotorJoint</span></code><a class="headerlink" href="#motorjoint" title="Link to this heading">¶</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">MotorJoint</span></code> is used to control the relative motion between two bodies. A typical usage is to
control the movement of a dynamic body with respect to the fixed point, for example to create
animations.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">MotorJoint</span></code> lets you control the motion of a body by specifying target position and rotation
offsets. You can set the maximum motor force and torque that will be applied to reach the target
position and rotation. If the body is blocked, it will stop and the contact forces will be
proportional the maximum motor force and torque.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">final</span><span class="w"> </span><span class="n">motorJointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MotorJointDef</span><span class="p">()</span>
<span class="w">  </span><span class="p">..</span><span class="n">initialize</span><span class="p">(</span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">second</span><span class="p">)</span>
<span class="w">  </span><span class="p">..</span><span class="n">maxTorque</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1000</span>
<span class="w">  </span><span class="p">..</span><span class="n">maxForce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1000</span>
<span class="w">  </span><span class="p">..</span><span class="n">correctionFactor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.1</span><span class="p">;</span>

<span class="w">  </span><span class="n">world</span><span class="p">.</span><span class="n">createJoint</span><span class="p">(</span><span class="n">MotorJoint</span><span class="p">(</span><span class="n">motorJointDef</span><span class="p">));</span>
</pre></div>
</div>
<button class="flutter-app-button popup" onclick="run_flutter_app(&quot;/1.12.0/_static/apps/examples/index.html?motor_joint&quot;)">Run</button><div class="flutter-app-code docutils container" id="examples-source-motor_joint">
<div class="filename docutils container">
motor_joint.dart</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;dart:ui&#39;</span><span class="p">;</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/balls.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 4</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/boxes.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 5</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame/components.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 6</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame/events.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 7</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame_forge2d/flame_forge2d.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="kd">class</span><span class="w"> </span><span class="nc">MotorJointExample</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Forge2DGame</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">10</span><span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;&#39;</span>
<span class="linenos">11</span><span class="s1">    This example shows how to use a `MotorJoint`. The ball spins around the</span>
<span class="linenos">12</span><span class="s1">    center point. Tap the screen to change the direction.</span>
<span class="linenos">13</span><span class="s1">  &#39;&#39;&#39;</span><span class="p">;</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="w">  </span><span class="n">MotorJointExample</span><span class="p">()</span>
<span class="linenos">16</span><span class="w">      </span><span class="o">:</span><span class="w"> </span><span class="k">super</span><span class="p">(</span><span class="nl">gravity:</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">(),</span><span class="w"> </span><span class="nl">world:</span><span class="w"> </span><span class="n">MotorJointWorld</span><span class="p">());</span>
<span class="linenos">17</span><span class="p">}</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="kd">class</span><span class="w"> </span><span class="nc">MotorJointWorld</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Forge2DWorld</span><span class="w"> </span><span class="kd">with</span><span class="w"> </span><span class="n">TapCallbacks</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">20</span><span class="w">  </span><span class="kd">late</span><span class="w"> </span><span class="n">Ball</span><span class="w"> </span><span class="n">ball</span><span class="p">;</span>
<span class="linenos">21</span><span class="w">  </span><span class="kd">late</span><span class="w"> </span><span class="n">MotorJoint</span><span class="w"> </span><span class="n">joint</span><span class="p">;</span>
<span class="linenos">22</span><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">motorSpeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">;</span>
<span class="linenos">23</span>
<span class="linenos">24</span><span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">clockWise</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="linenos">25</span>
<span class="linenos">26</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">27</span><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">onLoad</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">28</span><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">onLoad</span><span class="p">();</span>
<span class="linenos">29</span>
<span class="linenos">30</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">box</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Box</span><span class="p">(</span>
<span class="linenos">31</span><span class="w">      </span><span class="nl">startPosition:</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">(),</span>
<span class="linenos">32</span><span class="w">      </span><span class="nl">width:</span><span class="w"> </span><span class="m">2</span><span class="p">,</span>
<span class="linenos">33</span><span class="w">      </span><span class="nl">height:</span><span class="w"> </span><span class="m">1</span><span class="p">,</span>
<span class="linenos">34</span><span class="w">      </span><span class="nl">bodyType:</span><span class="w"> </span><span class="n">BodyType</span><span class="p">.</span><span class="kd">static</span><span class="p">,</span>
<span class="linenos">35</span><span class="w">    </span><span class="p">);</span>
<span class="linenos">36</span><span class="w">    </span><span class="n">add</span><span class="p">(</span><span class="n">box</span><span class="p">);</span>
<span class="linenos">37</span>
<span class="linenos">38</span><span class="w">    </span><span class="n">ball</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Ball</span><span class="p">(</span><span class="n">Vector2</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">5</span><span class="p">));</span>
<span class="linenos">39</span><span class="w">    </span><span class="n">add</span><span class="p">(</span><span class="n">ball</span><span class="p">);</span>
<span class="linenos">40</span>
<span class="linenos">41</span><span class="w">    </span><span class="kd">await</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">wait</span><span class="p">([</span><span class="n">ball</span><span class="p">.</span><span class="n">loaded</span><span class="p">,</span><span class="w"> </span><span class="n">box</span><span class="p">.</span><span class="n">loaded</span><span class="p">]);</span>
<span class="linenos">42</span>
<span class="linenos">43</span><span class="w">    </span><span class="n">joint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createMotorJoint</span><span class="p">(</span><span class="n">ball</span><span class="p">.</span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="n">box</span><span class="p">.</span><span class="n">body</span><span class="p">);</span>
<span class="linenos">44</span><span class="w">    </span><span class="n">add</span><span class="p">(</span><span class="n">JointRenderer</span><span class="p">(</span><span class="nl">joint:</span><span class="w"> </span><span class="n">joint</span><span class="p">));</span>
<span class="linenos">45</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">46</span>
<span class="linenos">47</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">48</span><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">onTapDown</span><span class="p">(</span><span class="n">TapDownEvent</span><span class="w"> </span><span class="n">info</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">49</span><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">onTapDown</span><span class="p">(</span><span class="n">info</span><span class="p">);</span>
<span class="linenos">50</span><span class="w">    </span><span class="n">clockWise</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">clockWise</span><span class="p">;</span>
<span class="linenos">51</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">52</span>
<span class="linenos">53</span><span class="w">  </span><span class="n">MotorJoint</span><span class="w"> </span><span class="n">createMotorJoint</span><span class="p">(</span><span class="n">Body</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">Body</span><span class="w"> </span><span class="n">second</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">54</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">motorJointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MotorJointDef</span><span class="p">()</span>
<span class="linenos">55</span><span class="w">      </span><span class="p">..</span><span class="n">initialize</span><span class="p">(</span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">second</span><span class="p">)</span>
<span class="linenos">56</span><span class="w">      </span><span class="p">..</span><span class="n">maxForce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1000</span>
<span class="linenos">57</span><span class="w">      </span><span class="p">..</span><span class="n">maxTorque</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1000</span>
<span class="linenos">58</span><span class="w">      </span><span class="p">..</span><span class="n">correctionFactor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.1</span><span class="p">;</span>
<span class="linenos">59</span>
<span class="linenos">60</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">joint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MotorJoint</span><span class="p">(</span><span class="n">motorJointDef</span><span class="p">);</span>
<span class="linenos">61</span><span class="w">    </span><span class="n">createJoint</span><span class="p">(</span><span class="n">joint</span><span class="p">);</span>
<span class="linenos">62</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">joint</span><span class="p">;</span>
<span class="linenos">63</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">64</span>
<span class="linenos">65</span><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">linearOffset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">();</span>
<span class="linenos">66</span>
<span class="linenos">67</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">68</span><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">update</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">dt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">69</span><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">);</span>
<span class="linenos">70</span>
<span class="linenos">71</span><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="n">deltaOffset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">motorSpeed</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">dt</span><span class="p">;</span>
<span class="linenos">72</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">clockWise</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">73</span><span class="w">      </span><span class="n">deltaOffset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">deltaOffset</span><span class="p">;</span>
<span class="linenos">74</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">75</span>
<span class="linenos">76</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">linearOffsetX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">joint</span><span class="p">.</span><span class="n">getLinearOffset</span><span class="p">().</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">deltaOffset</span><span class="p">;</span>
<span class="linenos">77</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">linearOffsetY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">joint</span><span class="p">.</span><span class="n">getLinearOffset</span><span class="p">().</span><span class="n">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">deltaOffset</span><span class="p">;</span>
<span class="linenos">78</span><span class="w">    </span><span class="n">linearOffset</span><span class="p">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">linearOffsetX</span><span class="p">,</span><span class="w"> </span><span class="n">linearOffsetY</span><span class="p">);</span>
<span class="linenos">79</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">angularOffset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">joint</span><span class="p">.</span><span class="n">getAngularOffset</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">deltaOffset</span><span class="p">;</span>
<span class="linenos">80</span>
<span class="linenos">81</span><span class="w">    </span><span class="n">joint</span><span class="p">.</span><span class="n">setLinearOffset</span><span class="p">(</span><span class="n">linearOffset</span><span class="p">);</span>
<span class="linenos">82</span><span class="w">    </span><span class="n">joint</span><span class="p">.</span><span class="n">setAngularOffset</span><span class="p">(</span><span class="n">angularOffset</span><span class="p">);</span>
<span class="linenos">83</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">84</span><span class="p">}</span>
<span class="linenos">85</span>
<span class="linenos">86</span><span class="kd">class</span><span class="w"> </span><span class="nc">JointRenderer</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">87</span><span class="w">  </span><span class="n">JointRenderer</span><span class="p">({</span><span class="kd">required</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">joint</span><span class="p">});</span>
<span class="linenos">88</span>
<span class="linenos">89</span><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">MotorJoint</span><span class="w"> </span><span class="n">joint</span><span class="p">;</span>
<span class="linenos">90</span>
<span class="linenos">91</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">92</span><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">render</span><span class="p">(</span><span class="n">Canvas</span><span class="w"> </span><span class="n">canvas</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">93</span><span class="w">    </span><span class="n">canvas</span><span class="p">.</span><span class="n">drawLine</span><span class="p">(</span>
<span class="linenos">94</span><span class="w">      </span><span class="n">joint</span><span class="p">.</span><span class="n">anchorA</span><span class="p">.</span><span class="n">toOffset</span><span class="p">(),</span>
<span class="linenos">95</span><span class="w">      </span><span class="n">joint</span><span class="p">.</span><span class="n">anchorB</span><span class="p">.</span><span class="n">toOffset</span><span class="p">(),</span>
<span class="linenos">96</span><span class="w">      </span><span class="n">debugPaint</span><span class="p">,</span>
<span class="linenos">97</span><span class="w">    </span><span class="p">);</span>
<span class="linenos">98</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">99</span><span class="p">}</span>
</pre></div>
</div>
</div>
<button class="flutter-app-button code" onclick="open_code_listings(&quot;examples-source-motor_joint&quot;)">Code</button><p>A <code class="docutils literal notranslate"><span class="pre">MotorJointDef</span></code> has three optional parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">maxForce</span></code>: the maximum translational force which will be applied to the joined body to reach the
target position.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxTorque</span></code>: the maximum angular force which will be applied to the joined body to reach the
target rotation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">correctionFactor</span></code>: position correction factor in range [0, 1]. It adjusts the joint’s response to
deviation from target position. A higher value makes the joint respond faster, while a lower value
makes it respond slower. If the value is set too high, the joint may overcompensate and oscillate,
becoming unstable. If set too low, it may respond too slowly.</p></li>
</ul>
<p>The linear and angular offsets are the target distance and angle that the bodies should achieve
relative to each other’s position and rotation. By default, the linear target will be the distance
between the two body centers and the angular target will be the relative rotation of the bodies.
Use the <code class="docutils literal notranslate"><span class="pre">setLinearOffset(Vector2)</span></code> and <code class="docutils literal notranslate"><span class="pre">setLinearOffset(double)</span></code> methods of the <code class="docutils literal notranslate"><span class="pre">MotorJoint</span></code> to set
the desired relative translation and rotate between the bodies.</p>
<p>For example, this code increments the angular offset of the joint every update cycle, causing the
body to rotate.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="nd">@override</span>
<span class="kt">void</span><span class="w"> </span><span class="n">update</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">dt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">super</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">);</span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">angularOffset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">joint</span><span class="p">.</span><span class="n">getAngularOffset</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">motorSpeed</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">dt</span><span class="p">;</span>
<span class="w">  </span><span class="n">joint</span><span class="p">.</span><span class="n">setAngularOffset</span><span class="p">(</span><span class="n">angularOffset</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="mousejoint">
<h3><code class="docutils literal notranslate"><span class="pre">MouseJoint</span></code><a class="headerlink" href="#mousejoint" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">MouseJoint</span></code> is used to manipulate bodies with the mouse. It attempts to drive a point on a body
towards the current position of the cursor. There is no restriction on rotation.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">MouseJoint</span></code> definition has a target point, maximum force, frequency, and damping ratio. The
target point initially coincides with the body’s anchor point. The maximum force is used to prevent
violent reactions when multiple dynamic bodies interact. You can make this as large as you like.
The frequency and damping ratio are used to create a spring/damper effect similar to the distance
joint.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Many users have tried to adapt the mouse joint for game play. Users often want
to achieve precise positioning and instantaneous response. The mouse joint
doesn’t work very well in that context. You may wish to consider using
kinematic bodies instead.</p>
</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">final</span><span class="w"> </span><span class="n">mouseJointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MouseJointDef</span><span class="p">()</span>
<span class="w">  </span><span class="p">..</span><span class="n">maxForce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3000</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ballBody</span><span class="p">.</span><span class="n">mass</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">10</span>
<span class="w">  </span><span class="p">..</span><span class="n">dampingRatio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>
<span class="w">  </span><span class="p">..</span><span class="n">frequencyHz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span>
<span class="w">  </span><span class="p">..</span><span class="n">target</span><span class="p">.</span><span class="n">setFrom</span><span class="p">(</span><span class="n">ballBody</span><span class="p">.</span><span class="n">position</span><span class="p">)</span>
<span class="w">  </span><span class="p">..</span><span class="n">collideConnected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="w">  </span><span class="p">..</span><span class="n">bodyA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">groundBody</span>
<span class="w">  </span><span class="p">..</span><span class="n">bodyB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ballBody</span><span class="p">;</span>

<span class="w">  </span><span class="n">mouseJoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MouseJoint</span><span class="p">(</span><span class="n">mouseJointDef</span><span class="p">);</span>
<span class="w">  </span><span class="n">world</span><span class="p">.</span><span class="n">createJoint</span><span class="p">(</span><span class="n">mouseJoint</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<button class="flutter-app-button popup" onclick="run_flutter_app(&quot;/1.12.0/_static/apps/examples/index.html?mouse_joint&quot;)">Run</button><div class="flutter-app-code docutils container" id="examples-source-mouse_joint">
<div class="filename docutils container">
mouse_joint.dart</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/revolute_joint_with_motor_example.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 2</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/balls.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 3</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/boundaries.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 4</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame/components.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 5</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame/events.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 6</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame_forge2d/flame_forge2d.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="kd">class</span><span class="w"> </span><span class="nc">MouseJointExample</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Forge2DGame</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 9</span><span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;&#39;</span>
<span class="linenos">10</span><span class="s1">    In this example we use a `MouseJoint` to make the ball follow the mouse</span>
<span class="linenos">11</span><span class="s1">    when you drag it around.</span>
<span class="linenos">12</span><span class="s1">  &#39;&#39;&#39;</span><span class="p">;</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="w">  </span><span class="n">MouseJointExample</span><span class="p">()</span>
<span class="linenos">15</span><span class="w">      </span><span class="o">:</span><span class="w"> </span><span class="k">super</span><span class="p">(</span><span class="nl">gravity:</span><span class="w"> </span><span class="n">Vector2</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">10.0</span><span class="p">),</span><span class="w"> </span><span class="nl">world:</span><span class="w"> </span><span class="n">MouseJointWorld</span><span class="p">());</span>
<span class="linenos">16</span><span class="p">}</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="kd">class</span><span class="w"> </span><span class="nc">MouseJointWorld</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Forge2DWorld</span>
<span class="linenos">19</span><span class="w">    </span><span class="kd">with</span><span class="w"> </span><span class="n">DragCallbacks</span><span class="p">,</span><span class="w"> </span><span class="n">HasGameReference</span><span class="o">&lt;</span><span class="n">Forge2DGame</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">20</span><span class="w">  </span><span class="kd">late</span><span class="w"> </span><span class="n">Ball</span><span class="w"> </span><span class="n">ball</span><span class="p">;</span>
<span class="linenos">21</span><span class="w">  </span><span class="kd">late</span><span class="w"> </span><span class="n">Body</span><span class="w"> </span><span class="n">groundBody</span><span class="p">;</span>
<span class="linenos">22</span><span class="w">  </span><span class="n">MouseJoint</span><span class="o">?</span><span class="w"> </span><span class="n">mouseJoint</span><span class="p">;</span>
<span class="linenos">23</span>
<span class="linenos">24</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">25</span><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">onLoad</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">26</span><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">onLoad</span><span class="p">();</span>
<span class="linenos">27</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">boundaries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createBoundaries</span><span class="p">(</span><span class="n">game</span><span class="p">);</span>
<span class="linenos">28</span><span class="w">    </span><span class="n">addAll</span><span class="p">(</span><span class="n">boundaries</span><span class="p">);</span>
<span class="linenos">29</span>
<span class="linenos">30</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">center</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">();</span>
<span class="linenos">31</span><span class="w">    </span><span class="n">groundBody</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createBody</span><span class="p">(</span><span class="n">BodyDef</span><span class="p">());</span>
<span class="linenos">32</span><span class="w">    </span><span class="n">ball</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Ball</span><span class="p">(</span><span class="n">center</span><span class="p">,</span><span class="w"> </span><span class="nl">radius:</span><span class="w"> </span><span class="m">5</span><span class="p">);</span>
<span class="linenos">33</span><span class="w">    </span><span class="n">add</span><span class="p">(</span><span class="n">ball</span><span class="p">);</span>
<span class="linenos">34</span><span class="w">    </span><span class="n">add</span><span class="p">(</span><span class="n">CornerRamp</span><span class="p">(</span><span class="n">center</span><span class="p">));</span>
<span class="linenos">35</span><span class="w">    </span><span class="n">add</span><span class="p">(</span><span class="n">CornerRamp</span><span class="p">(</span><span class="n">center</span><span class="p">,</span><span class="w"> </span><span class="nl">isMirrored:</span><span class="w"> </span><span class="kc">true</span><span class="p">));</span>
<span class="linenos">36</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">37</span>
<span class="linenos">38</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">39</span><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">onDragStart</span><span class="p">(</span><span class="n">DragStartEvent</span><span class="w"> </span><span class="n">info</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">40</span><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">onDragStart</span><span class="p">(</span><span class="n">info</span><span class="p">);</span>
<span class="linenos">41</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">mouseJointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MouseJointDef</span><span class="p">()</span>
<span class="linenos">42</span><span class="w">      </span><span class="p">..</span><span class="n">maxForce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3000</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ball</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">mass</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">10</span>
<span class="linenos">43</span><span class="w">      </span><span class="p">..</span><span class="n">dampingRatio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.1</span>
<span class="linenos">44</span><span class="w">      </span><span class="p">..</span><span class="n">frequencyHz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span>
<span class="linenos">45</span><span class="w">      </span><span class="p">..</span><span class="n">target</span><span class="p">.</span><span class="n">setFrom</span><span class="p">(</span><span class="n">ball</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">position</span><span class="p">)</span>
<span class="linenos">46</span><span class="w">      </span><span class="p">..</span><span class="n">collideConnected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="linenos">47</span><span class="w">      </span><span class="p">..</span><span class="n">bodyA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">groundBody</span>
<span class="linenos">48</span><span class="w">      </span><span class="p">..</span><span class="n">bodyB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ball</span><span class="p">.</span><span class="n">body</span><span class="p">;</span>
<span class="linenos">49</span>
<span class="linenos">50</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mouseJoint</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">51</span><span class="w">      </span><span class="n">mouseJoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MouseJoint</span><span class="p">(</span><span class="n">mouseJointDef</span><span class="p">);</span>
<span class="linenos">52</span><span class="w">      </span><span class="n">createJoint</span><span class="p">(</span><span class="n">mouseJoint</span><span class="o">!</span><span class="p">);</span>
<span class="linenos">53</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">54</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">55</span>
<span class="linenos">56</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">57</span><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">onDragUpdate</span><span class="p">(</span><span class="n">DragUpdateEvent</span><span class="w"> </span><span class="n">info</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">58</span><span class="w">    </span><span class="n">mouseJoint</span><span class="o">?</span><span class="p">.</span><span class="n">setTarget</span><span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="n">localEndPosition</span><span class="p">);</span>
<span class="linenos">59</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">60</span>
<span class="linenos">61</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">62</span><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">onDragEnd</span><span class="p">(</span><span class="n">DragEndEvent</span><span class="w"> </span><span class="n">info</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">63</span><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">onDragEnd</span><span class="p">(</span><span class="n">info</span><span class="p">);</span>
<span class="linenos">64</span><span class="w">    </span><span class="n">destroyJoint</span><span class="p">(</span><span class="n">mouseJoint</span><span class="o">!</span><span class="p">);</span>
<span class="linenos">65</span><span class="w">    </span><span class="n">mouseJoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="linenos">66</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">67</span><span class="p">}</span>
</pre></div>
</div>
</div>
<button class="flutter-app-button code" onclick="open_code_listings(&quot;examples-source-mouse_joint&quot;)">Code</button><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">maxForce</span></code>: This parameter defines the maximum constraint force that can be exerted to move the
candidate body. Usually you will express as some multiple of the weight
(multiplier <em>mass</em> gravity).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dampingRatio</span></code>: This parameter defines how quickly the oscillation comes to rest. It ranges from
0 to 1, where 0 means no damping and 1 indicates critical damping.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frequencyHz</span></code>: This parameter defines the response speed of the body, i.e. how quickly it tries to
reach the target position</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">target</span></code>: The initial world target point. This is assumed to coincide with the body anchor
initially.</p></li>
</ul>
</section>
<section id="prismaticjoint">
<h3><code class="docutils literal notranslate"><span class="pre">PrismaticJoint</span></code><a class="headerlink" href="#prismaticjoint" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">PrismaticJoint</span></code> provides a single degree of freedom, allowing for a relative translation of two
bodies along an axis fixed in bodyA. Relative rotation is prevented.</p>
<p><code class="docutils literal notranslate"><span class="pre">PrismaticJointDef</span></code> requires defining a line of motion using an axis and an anchor point.
The definition uses local anchor points and a local axis so that the initial configuration
can violate the constraint slightly.</p>
<p>The joint translation is zero when the local anchor points coincide in world space.
Using local anchors and a local axis helps when saving and loading a game.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>At least one body should by dynamic with a non-fixed rotation.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">PrismaticJoint</span></code> definition is similar to the <a class="reference internal" href="#revolutejoint"><code class="docutils literal notranslate"><span class="pre">RevoluteJoint</span></code></a> definition, but
instead of rotation, it uses translation.</p>
<button class="flutter-app-button popup" onclick="run_flutter_app(&quot;/1.12.0/_static/apps/examples/index.html?prismatic_joint&quot;)">Run</button><div class="flutter-app-code docutils container" id="examples-source-prismatic_joint">
<div class="filename docutils container">
prismatic_joint.dart</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;dart:ui&#39;</span><span class="p">;</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/boxes.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 4</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame/components.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 5</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame_forge2d/flame_forge2d.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="kd">class</span><span class="w"> </span><span class="nc">PrismaticJointExample</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Forge2DGame</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 8</span><span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;&#39;</span>
<span class="linenos"> 9</span><span class="s1">    This example shows how to use a `PrismaticJoint`.</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="s1">    Drag the box along the specified axis, bound between lower and upper limits.</span>
<span class="linenos">12</span><span class="s1">    Also, there&#39;s a motor enabled that&#39;s pulling the box to the lower limit.</span>
<span class="linenos">13</span><span class="s1">  &#39;&#39;&#39;</span><span class="p">;</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">anchor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">();</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">18</span><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">onLoad</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">19</span><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">onLoad</span><span class="p">();</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">box</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DraggableBox</span><span class="p">(</span><span class="nl">startPosition:</span><span class="w"> </span><span class="n">anchor</span><span class="p">,</span><span class="w"> </span><span class="nl">width:</span><span class="w"> </span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="nl">height:</span><span class="w"> </span><span class="m">6</span><span class="p">);</span>
<span class="linenos">22</span><span class="w">    </span><span class="n">world</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">box</span><span class="p">);</span>
<span class="linenos">23</span><span class="w">    </span><span class="kd">await</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">wait</span><span class="p">([</span><span class="n">box</span><span class="p">.</span><span class="n">loaded</span><span class="p">]);</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">joint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createJoint</span><span class="p">(</span><span class="n">box</span><span class="p">.</span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="n">anchor</span><span class="p">);</span>
<span class="linenos">26</span><span class="w">    </span><span class="n">world</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">JointRenderer</span><span class="p">(</span><span class="nl">joint:</span><span class="w"> </span><span class="n">joint</span><span class="p">,</span><span class="w"> </span><span class="nl">anchor:</span><span class="w"> </span><span class="n">anchor</span><span class="p">));</span>
<span class="linenos">27</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="w">  </span><span class="n">PrismaticJoint</span><span class="w"> </span><span class="n">createJoint</span><span class="p">(</span><span class="n">Body</span><span class="w"> </span><span class="n">box</span><span class="p">,</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">anchor</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">30</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">groundBody</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">world</span><span class="p">.</span><span class="n">createBody</span><span class="p">(</span><span class="n">BodyDef</span><span class="p">());</span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">prismaticJointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PrismaticJointDef</span><span class="p">()</span>
<span class="linenos">33</span><span class="w">      </span><span class="p">..</span><span class="n">initialize</span><span class="p">(</span>
<span class="linenos">34</span><span class="w">        </span><span class="n">box</span><span class="p">,</span>
<span class="linenos">35</span><span class="w">        </span><span class="n">groundBody</span><span class="p">,</span>
<span class="linenos">36</span><span class="w">        </span><span class="n">anchor</span><span class="p">,</span>
<span class="linenos">37</span><span class="w">        </span><span class="n">Vector2</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span>
<span class="linenos">38</span><span class="w">      </span><span class="p">)</span>
<span class="linenos">39</span><span class="w">      </span><span class="p">..</span><span class="n">enableLimit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="linenos">40</span><span class="w">      </span><span class="p">..</span><span class="n">lowerTranslation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="m">20</span>
<span class="linenos">41</span><span class="w">      </span><span class="p">..</span><span class="n">upperTranslation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20</span>
<span class="linenos">42</span><span class="w">      </span><span class="p">..</span><span class="n">enableMotor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="linenos">43</span><span class="w">      </span><span class="p">..</span><span class="n">motorSpeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>
<span class="linenos">44</span><span class="w">      </span><span class="p">..</span><span class="n">maxMotorForce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100</span><span class="p">;</span>
<span class="linenos">45</span>
<span class="linenos">46</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">joint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PrismaticJoint</span><span class="p">(</span><span class="n">prismaticJointDef</span><span class="p">);</span>
<span class="linenos">47</span><span class="w">    </span><span class="n">world</span><span class="p">.</span><span class="n">createJoint</span><span class="p">(</span><span class="n">joint</span><span class="p">);</span>
<span class="linenos">48</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">joint</span><span class="p">;</span>
<span class="linenos">49</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">50</span><span class="p">}</span>
<span class="linenos">51</span>
<span class="linenos">52</span><span class="kd">class</span><span class="w"> </span><span class="nc">JointRenderer</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">53</span><span class="w">  </span><span class="n">JointRenderer</span><span class="p">({</span><span class="kd">required</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">joint</span><span class="p">,</span><span class="w"> </span><span class="kd">required</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">anchor</span><span class="p">});</span>
<span class="linenos">54</span>
<span class="linenos">55</span><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">PrismaticJoint</span><span class="w"> </span><span class="n">joint</span><span class="p">;</span>
<span class="linenos">56</span><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">anchor</span><span class="p">;</span>
<span class="linenos">57</span><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">();</span>
<span class="linenos">58</span><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">();</span>
<span class="linenos">59</span>
<span class="linenos">60</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">61</span><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">render</span><span class="p">(</span><span class="n">Canvas</span><span class="w"> </span><span class="n">canvas</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">62</span><span class="w">    </span><span class="n">p1</span>
<span class="linenos">63</span><span class="w">      </span><span class="p">..</span><span class="n">setFrom</span><span class="p">(</span><span class="n">joint</span><span class="p">.</span><span class="n">getLocalAxisA</span><span class="p">())</span>
<span class="linenos">64</span><span class="w">      </span><span class="p">..</span><span class="n">scale</span><span class="p">(</span><span class="n">joint</span><span class="p">.</span><span class="n">getLowerLimit</span><span class="p">())</span>
<span class="linenos">65</span><span class="w">      </span><span class="p">..</span><span class="n">add</span><span class="p">(</span><span class="n">anchor</span><span class="p">);</span>
<span class="linenos">66</span><span class="w">    </span><span class="n">p2</span>
<span class="linenos">67</span><span class="w">      </span><span class="p">..</span><span class="n">setFrom</span><span class="p">(</span><span class="n">joint</span><span class="p">.</span><span class="n">getLocalAxisA</span><span class="p">())</span>
<span class="linenos">68</span><span class="w">      </span><span class="p">..</span><span class="n">scale</span><span class="p">(</span><span class="n">joint</span><span class="p">.</span><span class="n">getUpperLimit</span><span class="p">())</span>
<span class="linenos">69</span><span class="w">      </span><span class="p">..</span><span class="n">add</span><span class="p">(</span><span class="n">anchor</span><span class="p">);</span>
<span class="linenos">70</span>
<span class="linenos">71</span><span class="w">    </span><span class="n">canvas</span><span class="p">.</span><span class="n">drawLine</span><span class="p">(</span><span class="n">p1</span><span class="p">.</span><span class="n">toOffset</span><span class="p">(),</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="n">toOffset</span><span class="p">(),</span><span class="w"> </span><span class="n">debugPaint</span><span class="p">);</span>
<span class="linenos">72</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">73</span><span class="p">}</span>
</pre></div>
</div>
</div>
<button class="flutter-app-button code" onclick="open_code_listings(&quot;examples-source-prismatic_joint&quot;)">Code</button><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">b1</span></code>, <code class="docutils literal notranslate"><span class="pre">b2</span></code>: Bodies connected by the joint.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">anchor</span></code>: World anchor point, to put the axis through. Usually the center of the first body.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">axis</span></code>: World translation axis, along which the translation will be fixed.</p></li>
</ul>
<p>In some cases you might wish to control the range of motion. For this, the <code class="docutils literal notranslate"><span class="pre">PrismaticJointDef</span></code> has
optional parameters that allow you to simulate a joint limit and/or a motor.</p>
<section id="prismatic-joint-limit">
<h4>Prismatic Joint Limit<a class="headerlink" href="#prismatic-joint-limit" title="Link to this heading">¶</a></h4>
<p>You can limit the relative rotation with a joint limit that specifies a lower and upper translation.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">jointDef</span>
<span class="w">  </span><span class="p">..</span><span class="n">enableLimit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="w">  </span><span class="p">..</span><span class="n">lowerTranslation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="m">20</span>
<span class="w">  </span><span class="p">..</span><span class="n">upperTranslation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">enableLimit</span></code>: Set to true to enable translation limits</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lowerTranslation</span></code>: The lower translation limit in meters</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">upperTranslation</span></code>: The upper translation limit in meters</p></li>
</ul>
<p>You change the limits after the joint was created with this method:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">prismaticJoint</span><span class="p">.</span><span class="n">setLimits</span><span class="p">(</span><span class="o">-</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="prismatic-joint-motor">
<h4>Prismatic Joint Motor<a class="headerlink" href="#prismatic-joint-motor" title="Link to this heading">¶</a></h4>
<p>You can use a motor to drive the motion or to model joint friction. A maximum motor force is
provided so that infinite forces are not generated.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">jointDef</span>
<span class="w">  </span><span class="p">..</span><span class="n">enableMotor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="w">  </span><span class="p">..</span><span class="n">motorSpeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>
<span class="w">  </span><span class="p">..</span><span class="n">maxMotorForce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">enableMotor</span></code>: Set to true to enable the motor</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">motorSpeed</span></code>: The desired motor speed in radians per second</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxMotorForce</span></code>: The maximum motor torque used to achieve the desired motor speed in N-m.</p></li>
</ul>
<p>You change the motor’s speed and force after the joint was created using these methods:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">prismaticJoint</span><span class="p">.</span><span class="n">setMotorSpeed</span><span class="p">(</span><span class="m">2</span><span class="p">);</span>
<span class="n">prismaticJoint</span><span class="p">.</span><span class="n">setMaxMotorForce</span><span class="p">(</span><span class="m">200</span><span class="p">);</span>
</pre></div>
</div>
<p>Also, you can get the joint angle and speed using the following methods:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">prismaticJoint</span><span class="p">.</span><span class="n">getJointTranslation</span><span class="p">();</span>
<span class="n">prismaticJoint</span><span class="p">.</span><span class="n">getJointSpeed</span><span class="p">();</span>
</pre></div>
</div>
</section>
</section>
<section id="pulleyjoint">
<h3><code class="docutils literal notranslate"><span class="pre">PulleyJoint</span></code><a class="headerlink" href="#pulleyjoint" title="Link to this heading">¶</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">PulleyJoint</span></code> is used to create an idealized pulley. The pulley connects two bodies to the ground
and to each other. As one body goes up, the other goes down. The total length of the pulley rope is
conserved according to the initial configuration:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>length1 + length2 == constant
</pre></div>
</div>
<p>You can supply a ratio that simulates a block and tackle. This causes one side of the pulley to
extend faster than the other. At the same time the constraint force is smaller on one side than the
other. You can use this to create a mechanical leverage.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>length1 + ratio * length2 == constant
</pre></div>
</div>
<p>For example, if the ratio is 2, then <code class="docutils literal notranslate"><span class="pre">length1</span></code> will vary at twice the rate of <code class="docutils literal notranslate"><span class="pre">length2</span></code>. Also the
force in the rope attached to the first body will have half the constraint force as the rope
attached to the second body.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">final</span><span class="w"> </span><span class="n">pulleyJointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PulleyJointDef</span><span class="p">()</span>
<span class="w">  </span><span class="p">..</span><span class="n">initialize</span><span class="p">(</span>
<span class="w">    </span><span class="n">firstBody</span><span class="p">,</span>
<span class="w">    </span><span class="n">secondBody</span><span class="p">,</span>
<span class="w">    </span><span class="n">firstPulley</span><span class="p">.</span><span class="n">worldCenter</span><span class="p">,</span>
<span class="w">    </span><span class="n">secondPulley</span><span class="p">.</span><span class="n">worldCenter</span><span class="p">,</span>
<span class="w">    </span><span class="n">firstBody</span><span class="p">.</span><span class="n">worldCenter</span><span class="p">,</span><span class="w">     </span>
<span class="w">    </span><span class="n">secondBody</span><span class="p">.</span><span class="n">worldCenter</span><span class="p">,</span>
<span class="w">    </span><span class="m">1</span><span class="p">,</span>
<span class="w">  </span><span class="p">);</span>

<span class="n">world</span><span class="p">.</span><span class="n">createJoint</span><span class="p">(</span><span class="n">PulleyJoint</span><span class="p">(</span><span class="n">pulleyJointDef</span><span class="p">));</span>
</pre></div>
</div>
<button class="flutter-app-button popup" onclick="run_flutter_app(&quot;/1.12.0/_static/apps/examples/index.html?pulley_joint&quot;)">Run</button><div class="flutter-app-code docutils container" id="examples-source-pulley_joint">
<div class="filename docutils container">
pulley_joint.dart</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;dart:ui&#39;</span><span class="p">;</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/balls.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 4</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/boxes.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 5</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame/components.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 6</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame_forge2d/flame_forge2d.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="kd">class</span><span class="w"> </span><span class="nc">PulleyJointExample</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Forge2DGame</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 9</span><span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;&#39;</span>
<span class="linenos">10</span><span class="s1">    This example shows how to use a `PulleyJoint`. Drag one of the boxes and see</span>
<span class="linenos">11</span><span class="s1">    how the other one gets moved by the pulley</span>
<span class="linenos">12</span><span class="s1">  &#39;&#39;&#39;</span><span class="p">;</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">15</span><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">onLoad</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">16</span><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">onLoad</span><span class="p">();</span>
<span class="linenos">17</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">distanceFromCenter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">camera</span><span class="p">.</span><span class="n">visibleWorldRect</span><span class="p">.</span><span class="n">width</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">5</span><span class="p">;</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">firstPulley</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Ball</span><span class="p">(</span>
<span class="linenos">20</span><span class="w">      </span><span class="n">Vector2</span><span class="p">(</span><span class="o">-</span><span class="n">distanceFromCenter</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">10</span><span class="p">),</span>
<span class="linenos">21</span><span class="w">      </span><span class="nl">bodyType:</span><span class="w"> </span><span class="n">BodyType</span><span class="p">.</span><span class="kd">static</span><span class="p">,</span>
<span class="linenos">22</span><span class="w">    </span><span class="p">);</span>
<span class="linenos">23</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">secondPulley</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Ball</span><span class="p">(</span>
<span class="linenos">24</span><span class="w">      </span><span class="n">Vector2</span><span class="p">(</span><span class="n">distanceFromCenter</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">10</span><span class="p">),</span>
<span class="linenos">25</span><span class="w">      </span><span class="nl">bodyType:</span><span class="w"> </span><span class="n">BodyType</span><span class="p">.</span><span class="kd">static</span><span class="p">,</span>
<span class="linenos">26</span><span class="w">    </span><span class="p">);</span>
<span class="linenos">27</span>
<span class="linenos">28</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">firstBox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DraggableBox</span><span class="p">(</span>
<span class="linenos">29</span><span class="w">      </span><span class="nl">startPosition:</span><span class="w"> </span><span class="n">Vector2</span><span class="p">(</span><span class="o">-</span><span class="n">distanceFromCenter</span><span class="p">,</span><span class="w"> </span><span class="m">20</span><span class="p">),</span>
<span class="linenos">30</span><span class="w">      </span><span class="nl">width:</span><span class="w"> </span><span class="m">5</span><span class="p">,</span>
<span class="linenos">31</span><span class="w">      </span><span class="nl">height:</span><span class="w"> </span><span class="m">10</span><span class="p">,</span>
<span class="linenos">32</span><span class="w">    </span><span class="p">);</span>
<span class="linenos">33</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">secondBox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DraggableBox</span><span class="p">(</span>
<span class="linenos">34</span><span class="w">      </span><span class="nl">startPosition:</span><span class="w"> </span><span class="n">Vector2</span><span class="p">(</span><span class="n">distanceFromCenter</span><span class="p">,</span><span class="w"> </span><span class="m">20</span><span class="p">),</span>
<span class="linenos">35</span><span class="w">      </span><span class="nl">width:</span><span class="w"> </span><span class="m">7</span><span class="p">,</span>
<span class="linenos">36</span><span class="w">      </span><span class="nl">height:</span><span class="w"> </span><span class="m">10</span><span class="p">,</span>
<span class="linenos">37</span><span class="w">    </span><span class="p">);</span>
<span class="linenos">38</span><span class="w">    </span><span class="n">world</span><span class="p">.</span><span class="n">addAll</span><span class="p">([</span><span class="n">firstBox</span><span class="p">,</span><span class="w"> </span><span class="n">secondBox</span><span class="p">,</span><span class="w"> </span><span class="n">firstPulley</span><span class="p">,</span><span class="w"> </span><span class="n">secondPulley</span><span class="p">]);</span>
<span class="linenos">39</span>
<span class="linenos">40</span><span class="w">    </span><span class="kd">await</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">wait</span><span class="p">([</span>
<span class="linenos">41</span><span class="w">      </span><span class="n">firstBox</span><span class="p">.</span><span class="n">loaded</span><span class="p">,</span>
<span class="linenos">42</span><span class="w">      </span><span class="n">secondBox</span><span class="p">.</span><span class="n">loaded</span><span class="p">,</span>
<span class="linenos">43</span><span class="w">      </span><span class="n">firstPulley</span><span class="p">.</span><span class="n">loaded</span><span class="p">,</span>
<span class="linenos">44</span><span class="w">      </span><span class="n">secondPulley</span><span class="p">.</span><span class="n">loaded</span><span class="p">,</span>
<span class="linenos">45</span><span class="w">    </span><span class="p">]);</span>
<span class="linenos">46</span>
<span class="linenos">47</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">joint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createJoint</span><span class="p">(</span><span class="n">firstBox</span><span class="p">,</span><span class="w"> </span><span class="n">secondBox</span><span class="p">,</span><span class="w"> </span><span class="n">firstPulley</span><span class="p">,</span><span class="w"> </span><span class="n">secondPulley</span><span class="p">);</span>
<span class="linenos">48</span><span class="w">    </span><span class="n">world</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">PulleyRenderer</span><span class="p">(</span><span class="nl">joint:</span><span class="w"> </span><span class="n">joint</span><span class="p">));</span>
<span class="linenos">49</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">50</span>
<span class="linenos">51</span><span class="w">  </span><span class="n">PulleyJoint</span><span class="w"> </span><span class="n">createJoint</span><span class="p">(</span>
<span class="linenos">52</span><span class="w">    </span><span class="n">Box</span><span class="w"> </span><span class="n">firstBox</span><span class="p">,</span>
<span class="linenos">53</span><span class="w">    </span><span class="n">Box</span><span class="w"> </span><span class="n">secondBox</span><span class="p">,</span>
<span class="linenos">54</span><span class="w">    </span><span class="n">Ball</span><span class="w"> </span><span class="n">firstPulley</span><span class="p">,</span>
<span class="linenos">55</span><span class="w">    </span><span class="n">Ball</span><span class="w"> </span><span class="n">secondPulley</span><span class="p">,</span>
<span class="linenos">56</span><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">57</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">pulleyJointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PulleyJointDef</span><span class="p">()</span>
<span class="linenos">58</span><span class="w">      </span><span class="p">..</span><span class="n">initialize</span><span class="p">(</span>
<span class="linenos">59</span><span class="w">        </span><span class="n">firstBox</span><span class="p">.</span><span class="n">body</span><span class="p">,</span>
<span class="linenos">60</span><span class="w">        </span><span class="n">secondBox</span><span class="p">.</span><span class="n">body</span><span class="p">,</span>
<span class="linenos">61</span><span class="w">        </span><span class="n">firstPulley</span><span class="p">.</span><span class="n">center</span><span class="p">,</span>
<span class="linenos">62</span><span class="w">        </span><span class="n">secondPulley</span><span class="p">.</span><span class="n">center</span><span class="p">,</span>
<span class="linenos">63</span><span class="w">        </span><span class="n">firstBox</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">worldPoint</span><span class="p">(</span><span class="n">Vector2</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="n">firstBox</span><span class="p">.</span><span class="n">height</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">)),</span>
<span class="linenos">64</span><span class="w">        </span><span class="n">secondBox</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">worldPoint</span><span class="p">(</span><span class="n">Vector2</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="n">secondBox</span><span class="p">.</span><span class="n">height</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">)),</span>
<span class="linenos">65</span><span class="w">        </span><span class="m">1</span><span class="p">,</span>
<span class="linenos">66</span><span class="w">      </span><span class="p">);</span>
<span class="linenos">67</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">joint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PulleyJoint</span><span class="p">(</span><span class="n">pulleyJointDef</span><span class="p">);</span>
<span class="linenos">68</span><span class="w">    </span><span class="n">world</span><span class="p">.</span><span class="n">createJoint</span><span class="p">(</span><span class="n">joint</span><span class="p">);</span>
<span class="linenos">69</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">joint</span><span class="p">;</span>
<span class="linenos">70</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">71</span><span class="p">}</span>
<span class="linenos">72</span>
<span class="linenos">73</span><span class="kd">class</span><span class="w"> </span><span class="nc">PulleyRenderer</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">74</span><span class="w">  </span><span class="n">PulleyRenderer</span><span class="p">({</span><span class="kd">required</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">joint</span><span class="p">});</span>
<span class="linenos">75</span>
<span class="linenos">76</span><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">PulleyJoint</span><span class="w"> </span><span class="n">joint</span><span class="p">;</span>
<span class="linenos">77</span>
<span class="linenos">78</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">79</span><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">render</span><span class="p">(</span><span class="n">Canvas</span><span class="w"> </span><span class="n">canvas</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">80</span><span class="w">    </span><span class="n">canvas</span><span class="p">.</span><span class="n">drawLine</span><span class="p">(</span>
<span class="linenos">81</span><span class="w">      </span><span class="n">joint</span><span class="p">.</span><span class="n">anchorA</span><span class="p">.</span><span class="n">toOffset</span><span class="p">(),</span>
<span class="linenos">82</span><span class="w">      </span><span class="n">joint</span><span class="p">.</span><span class="n">getGroundAnchorA</span><span class="p">().</span><span class="n">toOffset</span><span class="p">(),</span>
<span class="linenos">83</span><span class="w">      </span><span class="n">debugPaint</span><span class="p">,</span>
<span class="linenos">84</span><span class="w">    </span><span class="p">);</span>
<span class="linenos">85</span>
<span class="linenos">86</span><span class="w">    </span><span class="n">canvas</span><span class="p">.</span><span class="n">drawLine</span><span class="p">(</span>
<span class="linenos">87</span><span class="w">      </span><span class="n">joint</span><span class="p">.</span><span class="n">anchorB</span><span class="p">.</span><span class="n">toOffset</span><span class="p">(),</span>
<span class="linenos">88</span><span class="w">      </span><span class="n">joint</span><span class="p">.</span><span class="n">getGroundAnchorB</span><span class="p">().</span><span class="n">toOffset</span><span class="p">(),</span>
<span class="linenos">89</span><span class="w">      </span><span class="n">debugPaint</span><span class="p">,</span>
<span class="linenos">90</span><span class="w">    </span><span class="p">);</span>
<span class="linenos">91</span>
<span class="linenos">92</span><span class="w">    </span><span class="n">canvas</span><span class="p">.</span><span class="n">drawLine</span><span class="p">(</span>
<span class="linenos">93</span><span class="w">      </span><span class="n">joint</span><span class="p">.</span><span class="n">getGroundAnchorA</span><span class="p">().</span><span class="n">toOffset</span><span class="p">(),</span>
<span class="linenos">94</span><span class="w">      </span><span class="n">joint</span><span class="p">.</span><span class="n">getGroundAnchorB</span><span class="p">().</span><span class="n">toOffset</span><span class="p">(),</span>
<span class="linenos">95</span><span class="w">      </span><span class="n">debugPaint</span><span class="p">,</span>
<span class="linenos">96</span><span class="w">    </span><span class="p">);</span>
<span class="linenos">97</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">98</span><span class="p">}</span>
</pre></div>
</div>
</div>
<button class="flutter-app-button code" onclick="open_code_listings(&quot;examples-source-pulley_joint&quot;)">Code</button><p>The <code class="docutils literal notranslate"><span class="pre">initialize</span></code> method of <code class="docutils literal notranslate"><span class="pre">PulleyJointDef</span></code> requires two ground anchors, two dynamic bodies and
their anchor points, and a pulley ratio.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">b1</span></code>, <code class="docutils literal notranslate"><span class="pre">b2</span></code>: Two dynamic bodies connected with the joint</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ga1</span></code>, <code class="docutils literal notranslate"><span class="pre">ga2</span></code>: Two ground anchors</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">anchor1</span></code>, <code class="docutils literal notranslate"><span class="pre">anchor2</span></code>: Anchors on the dynamic bodies the joint will be attached to</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">r</span></code>: Pulley ratio to simulate a block and tackle</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">PulleyJoint</span></code> also provides the current lengths:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">joint</span><span class="p">.</span><span class="n">getCurrentLengthA</span><span class="p">()</span>
<span class="n">joint</span><span class="p">.</span><span class="n">getCurrentLengthB</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">PulleyJoint</span></code> can get a bit troublesome by itself. They often work better when
combined with prismatic joints. You should also cover the the anchor points
with static shapes to prevent one side from going to zero length.</p>
</div>
</section>
<section id="revolutejoint">
<h3><code class="docutils literal notranslate"><span class="pre">RevoluteJoint</span></code><a class="headerlink" href="#revolutejoint" title="Link to this heading">¶</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">RevoluteJoint</span></code> forces two bodies to share a common anchor point, often called a hinge point.
The revolute joint has a single degree of freedom: the relative rotation of the two bodies.</p>
<p>To create a <code class="docutils literal notranslate"><span class="pre">RevoluteJoint</span></code>, provide two bodies and a common point to the <code class="docutils literal notranslate"><span class="pre">initialize</span></code> method.
The definition uses local anchor points so that the initial configuration can violate the
constraint slightly.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">final</span><span class="w"> </span><span class="n">jointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RevoluteJointDef</span><span class="p">()</span>
<span class="w">  </span><span class="p">..</span><span class="n">initialize</span><span class="p">(</span><span class="n">firstBody</span><span class="p">,</span><span class="w"> </span><span class="n">secondBody</span><span class="p">,</span><span class="w"> </span><span class="n">firstBody</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
<span class="n">world</span><span class="p">.</span><span class="n">createJoint</span><span class="p">(</span><span class="n">RevoluteJoint</span><span class="p">(</span><span class="n">jointDef</span><span class="p">));</span>
</pre></div>
</div>
<button class="flutter-app-button popup" onclick="run_flutter_app(&quot;/1.12.0/_static/apps/examples/index.html?revolute_joint&quot;)">Run</button><div class="flutter-app-code docutils container" id="examples-source-revolute_joint">
<div class="filename docutils container">
revolute_joint.dart</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;dart:math&#39;</span><span class="p">;</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/balls.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 4</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/boundaries.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 5</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame/components.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 6</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame/events.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 7</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame_forge2d/flame_forge2d.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="kd">class</span><span class="w"> </span><span class="nc">RevoluteJointExample</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Forge2DGame</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">10</span><span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;&#39;</span>
<span class="linenos">11</span><span class="s1">    In this example we use a joint to keep a body with several fixtures stuck</span>
<span class="linenos">12</span><span class="s1">    to another body.</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="s1">    Tap the screen to add more of these combined bodies.</span>
<span class="linenos">15</span><span class="s1">  &#39;&#39;&#39;</span><span class="p">;</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="w">  </span><span class="n">RevoluteJointExample</span><span class="p">()</span>
<span class="linenos">18</span><span class="w">      </span><span class="o">:</span><span class="w"> </span><span class="k">super</span><span class="p">(</span><span class="nl">gravity:</span><span class="w"> </span><span class="n">Vector2</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">10.0</span><span class="p">),</span><span class="w"> </span><span class="nl">world:</span><span class="w"> </span><span class="n">RevoluteJointWorld</span><span class="p">());</span>
<span class="linenos">19</span><span class="p">}</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="kd">class</span><span class="w"> </span><span class="nc">RevoluteJointWorld</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Forge2DWorld</span>
<span class="linenos">22</span><span class="w">    </span><span class="kd">with</span><span class="w"> </span><span class="n">TapCallbacks</span><span class="p">,</span><span class="w"> </span><span class="n">HasGameReference</span><span class="o">&lt;</span><span class="n">Forge2DGame</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">23</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">24</span><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">onLoad</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">25</span><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">onLoad</span><span class="p">();</span>
<span class="linenos">26</span><span class="w">    </span><span class="n">addAll</span><span class="p">(</span><span class="n">createBoundaries</span><span class="p">(</span><span class="n">game</span><span class="p">));</span>
<span class="linenos">27</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">30</span><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">onTapDown</span><span class="p">(</span><span class="n">TapDownEvent</span><span class="w"> </span><span class="n">info</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">31</span><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">onTapDown</span><span class="p">(</span><span class="n">info</span><span class="p">);</span>
<span class="linenos">32</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">ball</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Ball</span><span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="n">localPosition</span><span class="p">);</span>
<span class="linenos">33</span><span class="w">    </span><span class="n">add</span><span class="p">(</span><span class="n">ball</span><span class="p">);</span>
<span class="linenos">34</span><span class="w">    </span><span class="n">add</span><span class="p">(</span><span class="n">CircleShuffler</span><span class="p">(</span><span class="n">ball</span><span class="p">));</span>
<span class="linenos">35</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">36</span><span class="p">}</span>
<span class="linenos">37</span>
<span class="linenos">38</span><span class="kd">class</span><span class="w"> </span><span class="nc">CircleShuffler</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">BodyComponent</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">39</span><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">Ball</span><span class="w"> </span><span class="n">ball</span><span class="p">;</span>
<span class="linenos">40</span>
<span class="linenos">41</span><span class="w">  </span><span class="n">CircleShuffler</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">ball</span><span class="p">);</span>
<span class="linenos">42</span>
<span class="linenos">43</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">44</span><span class="w">  </span><span class="n">Body</span><span class="w"> </span><span class="n">createBody</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">45</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">bodyDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BodyDef</span><span class="p">(</span>
<span class="linenos">46</span><span class="w">      </span><span class="nl">type:</span><span class="w"> </span><span class="n">BodyType</span><span class="p">.</span><span class="kt">dynamic</span><span class="p">,</span>
<span class="linenos">47</span><span class="w">      </span><span class="nl">position:</span><span class="w"> </span><span class="n">ball</span><span class="p">.</span><span class="n">body</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">clone</span><span class="p">(),</span>
<span class="linenos">48</span><span class="w">    </span><span class="p">);</span>
<span class="linenos">49</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">numPieces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="p">;</span>
<span class="linenos">50</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">radius</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">6.0</span><span class="p">;</span>
<span class="linenos">51</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">world</span><span class="p">.</span><span class="n">createBody</span><span class="p">(</span><span class="n">bodyDef</span><span class="p">);</span>
<span class="linenos">52</span>
<span class="linenos">53</span><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">numPieces</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">54</span><span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">xPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">radius</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cos</span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">numPieces</span><span class="p">));</span>
<span class="linenos">55</span><span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">yPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">radius</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">numPieces</span><span class="p">));</span>
<span class="linenos">56</span>
<span class="linenos">57</span><span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CircleShape</span><span class="p">()</span>
<span class="linenos">58</span><span class="w">        </span><span class="p">..</span><span class="n">radius</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1.2</span>
<span class="linenos">59</span><span class="w">        </span><span class="p">..</span><span class="n">position</span><span class="p">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">xPos</span><span class="p">,</span><span class="w"> </span><span class="n">yPos</span><span class="p">);</span>
<span class="linenos">60</span>
<span class="linenos">61</span><span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">fixtureDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FixtureDef</span><span class="p">(</span>
<span class="linenos">62</span><span class="w">        </span><span class="n">shape</span><span class="p">,</span>
<span class="linenos">63</span><span class="w">        </span><span class="nl">density:</span><span class="w"> </span><span class="m">50.0</span><span class="p">,</span>
<span class="linenos">64</span><span class="w">        </span><span class="nl">friction:</span><span class="w"> </span><span class="m">0.1</span><span class="p">,</span>
<span class="linenos">65</span><span class="w">        </span><span class="nl">restitution:</span><span class="w"> </span><span class="m">0.9</span><span class="p">,</span>
<span class="linenos">66</span><span class="w">      </span><span class="p">);</span>
<span class="linenos">67</span>
<span class="linenos">68</span><span class="w">      </span><span class="n">body</span><span class="p">.</span><span class="n">createFixture</span><span class="p">(</span><span class="n">fixtureDef</span><span class="p">);</span>
<span class="linenos">69</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">70</span>
<span class="linenos">71</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">jointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RevoluteJointDef</span><span class="p">()</span>
<span class="linenos">72</span><span class="w">      </span><span class="p">..</span><span class="n">initialize</span><span class="p">(</span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="n">ball</span><span class="p">.</span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="n">body</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
<span class="linenos">73</span><span class="w">    </span><span class="n">world</span><span class="p">.</span><span class="n">createJoint</span><span class="p">(</span><span class="n">RevoluteJoint</span><span class="p">(</span><span class="n">jointDef</span><span class="p">));</span>
<span class="linenos">74</span>
<span class="linenos">75</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">body</span><span class="p">;</span>
<span class="linenos">76</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">77</span><span class="p">}</span>
</pre></div>
</div>
</div>
<button class="flutter-app-button code" onclick="open_code_listings(&quot;examples-source-revolute_joint&quot;)">Code</button><p>In some cases you might wish to control the joint angle. For this, the <code class="docutils literal notranslate"><span class="pre">RevoluteJointDef</span></code> has
optional parameters that allow you to simulate a joint limit and/or a motor.</p>
<section id="revolute-joint-limit">
<h4>Revolute Joint Limit<a class="headerlink" href="#revolute-joint-limit" title="Link to this heading">¶</a></h4>
<p>You can limit the relative rotation with a joint limit that specifies a lower and upper angle.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">jointDef</span>
<span class="w">  </span><span class="p">..</span><span class="n">enableLimit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="w">  </span><span class="p">..</span><span class="n">lowerAngle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="w">  </span><span class="p">..</span><span class="n">upperAngle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">enableLimit</span></code>: Set to true to enable angle limits</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lowerAngle</span></code>: The lower angle in radians</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">upperAngle</span></code>: The upper angle in radians</p></li>
</ul>
<p>You change the limits after the joint was created with this method:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">revoluteJoint</span><span class="p">.</span><span class="n">setLimits</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">pi</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="revolute-joint-motor">
<h4>Revolute Joint Motor<a class="headerlink" href="#revolute-joint-motor" title="Link to this heading">¶</a></h4>
<p>You can use a motor to drive the relative rotation about the shared point. A maximum motor torque is
provided so that infinite forces are not generated.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">jointDef</span>
<span class="w">  </span><span class="p">..</span><span class="n">enableMotor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="w">  </span><span class="p">..</span><span class="n">motorSpeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span>
<span class="w">  </span><span class="p">..</span><span class="n">maxMotorTorque</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">enableMotor</span></code>: Set to true to enable the motor</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">motorSpeed</span></code>: The desired motor speed in radians per second</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxMotorTorque</span></code>: The maximum motor torque used to achieve the desired motor speed in N-m.</p></li>
</ul>
<p>You change the motor’s speed and torque after the joint was created using these methods:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">revoluteJoint</span><span class="p">.</span><span class="n">setMotorSpeed</span><span class="p">(</span><span class="m">2</span><span class="p">);</span>
<span class="n">revoluteJoint</span><span class="p">.</span><span class="n">setMaxMotorTorque</span><span class="p">(</span><span class="m">200</span><span class="p">);</span>
</pre></div>
</div>
<p>Also, you can get the joint angle and speed using the following methods:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">revoluteJoint</span><span class="p">.</span><span class="n">jointAngle</span><span class="p">();</span>
<span class="n">revoluteJoint</span><span class="p">.</span><span class="n">jointSpeed</span><span class="p">();</span>
</pre></div>
</div>
</section>
</section>
<section id="ropejoint">
<h3><code class="docutils literal notranslate"><span class="pre">RopeJoint</span></code><a class="headerlink" href="#ropejoint" title="Link to this heading">¶</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">RopeJoint</span></code> restricts the maximum distance between two points on two bodies.</p>
<p><code class="docutils literal notranslate"><span class="pre">RopeJointDef</span></code> requires two body anchor points and the maximum length.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">final</span><span class="w"> </span><span class="n">ropeJointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RopeJointDef</span><span class="p">()</span>
<span class="w">  </span><span class="p">..</span><span class="n">bodyA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">firstBody</span>
<span class="w">  </span><span class="p">..</span><span class="n">localAnchorA</span><span class="p">.</span><span class="n">setFrom</span><span class="p">(</span><span class="n">firstBody</span><span class="p">.</span><span class="n">getLocalCenter</span><span class="p">())</span>
<span class="w">  </span><span class="p">..</span><span class="n">bodyB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">secondBody</span>
<span class="w">  </span><span class="p">..</span><span class="n">localAnchorB</span><span class="p">.</span><span class="n">setFrom</span><span class="p">(</span><span class="n">secondBody</span><span class="p">.</span><span class="n">getLocalCenter</span><span class="p">())</span>
<span class="w">  </span><span class="p">..</span><span class="n">maxLength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">secondBody</span><span class="p">.</span><span class="n">worldCenter</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">firstBody</span><span class="p">.</span><span class="n">worldCenter</span><span class="p">).</span><span class="n">length</span><span class="p">;</span>

<span class="n">world</span><span class="p">.</span><span class="n">createJoint</span><span class="p">(</span><span class="n">RopeJoint</span><span class="p">(</span><span class="n">ropeJointDef</span><span class="p">));</span>
</pre></div>
</div>
<button class="flutter-app-button popup" onclick="run_flutter_app(&quot;/1.12.0/_static/apps/examples/index.html?rope_joint&quot;)">Run</button><div class="flutter-app-code docutils container" id="examples-source-rope_joint">
<div class="filename docutils container">
rope_joint.dart</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/balls.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 2</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/boxes.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 3</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame/components.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 4</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame/events.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 5</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame_forge2d/flame_forge2d.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 6</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flutter/material.dart&#39;</span><span class="p">;</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="kd">class</span><span class="w"> </span><span class="nc">RopeJointExample</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Forge2DGame</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 9</span><span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;&#39;</span>
<span class="linenos">10</span><span class="s1">    This example shows how to use a `RopeJoint`.</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="s1">    Drag the box handle along the axis and observe the rope respond to the</span>
<span class="linenos">13</span><span class="s1">    movement.</span>
<span class="linenos">14</span><span class="s1">  &#39;&#39;&#39;</span><span class="p">;</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="w">  </span><span class="n">RopeJointExample</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">super</span><span class="p">(</span><span class="nl">world:</span><span class="w"> </span><span class="n">RopeJointWorld</span><span class="p">());</span>
<span class="linenos">17</span><span class="p">}</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="kd">class</span><span class="w"> </span><span class="nc">RopeJointWorld</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Forge2DWorld</span>
<span class="linenos">20</span><span class="w">    </span><span class="kd">with</span><span class="w"> </span><span class="n">DragCallbacks</span><span class="p">,</span><span class="w"> </span><span class="n">HasGameReference</span><span class="o">&lt;</span><span class="n">Forge2DGame</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">21</span><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">handleWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">6</span><span class="p">;</span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos">24</span><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">onLoad</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">25</span><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">onLoad</span><span class="p">();</span>
<span class="linenos">26</span>
<span class="linenos">27</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">handleBody</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">createHandle</span><span class="p">();</span>
<span class="linenos">28</span><span class="w">    </span><span class="n">createRope</span><span class="p">(</span><span class="n">handleBody</span><span class="p">);</span>
<span class="linenos">29</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">30</span>
<span class="linenos">31</span><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="n">Body</span><span class="o">&gt;</span><span class="w"> </span><span class="n">createHandle</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">32</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">anchor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">game</span><span class="p">.</span><span class="n">screenToWorld</span><span class="p">(</span><span class="n">Vector2</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">))..</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
<span class="linenos">33</span>
<span class="linenos">34</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">box</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DraggableBox</span><span class="p">(</span>
<span class="linenos">35</span><span class="w">      </span><span class="nl">startPosition:</span><span class="w"> </span><span class="n">anchor</span><span class="p">,</span>
<span class="linenos">36</span><span class="w">      </span><span class="nl">width:</span><span class="w"> </span><span class="n">handleWidth</span><span class="p">,</span>
<span class="linenos">37</span><span class="w">      </span><span class="nl">height:</span><span class="w"> </span><span class="m">3</span><span class="p">,</span>
<span class="linenos">38</span><span class="w">    </span><span class="p">);</span>
<span class="linenos">39</span><span class="w">    </span><span class="kd">await</span><span class="w"> </span><span class="n">add</span><span class="p">(</span><span class="n">box</span><span class="p">);</span>
<span class="linenos">40</span>
<span class="linenos">41</span><span class="w">    </span><span class="n">createPrismaticJoint</span><span class="p">(</span><span class="n">box</span><span class="p">.</span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="n">anchor</span><span class="p">);</span>
<span class="linenos">42</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">box</span><span class="p">.</span><span class="n">body</span><span class="p">;</span>
<span class="linenos">43</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">createRope</span><span class="p">(</span><span class="n">Body</span><span class="w"> </span><span class="n">handle</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">46</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">50</span><span class="p">;</span>
<span class="linenos">47</span><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="n">prevBody</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">handle</span><span class="p">;</span>
<span class="linenos">48</span>
<span class="linenos">49</span><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">50</span><span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">newPosition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">prevBody</span><span class="p">.</span><span class="n">worldCenter</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Vector2</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">);</span>
<span class="linenos">51</span><span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">ball</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Ball</span><span class="p">(</span><span class="n">newPosition</span><span class="p">,</span><span class="w"> </span><span class="nl">radius:</span><span class="w"> </span><span class="m">0.5</span><span class="p">,</span><span class="w"> </span><span class="nl">color:</span><span class="w"> </span><span class="n">Colors</span><span class="p">.</span><span class="n">white</span><span class="p">);</span>
<span class="linenos">52</span><span class="w">      </span><span class="kd">await</span><span class="w"> </span><span class="n">add</span><span class="p">(</span><span class="n">ball</span><span class="p">);</span>
<span class="linenos">53</span>
<span class="linenos">54</span><span class="w">      </span><span class="n">createRopeJoint</span><span class="p">(</span><span class="n">ball</span><span class="p">.</span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="n">prevBody</span><span class="p">);</span>
<span class="linenos">55</span><span class="w">      </span><span class="n">prevBody</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ball</span><span class="p">.</span><span class="n">body</span><span class="p">;</span>
<span class="linenos">56</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">57</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">58</span>
<span class="linenos">59</span><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">createPrismaticJoint</span><span class="p">(</span><span class="n">Body</span><span class="w"> </span><span class="n">box</span><span class="p">,</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">anchor</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">60</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">groundBody</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createBody</span><span class="p">(</span><span class="n">BodyDef</span><span class="p">());</span>
<span class="linenos">61</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">halfWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">game</span><span class="p">.</span><span class="n">screenToWorld</span><span class="p">(</span><span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">()).</span><span class="n">x</span><span class="p">.</span><span class="n">abs</span><span class="p">();</span>
<span class="linenos">62</span>
<span class="linenos">63</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">prismaticJointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PrismaticJointDef</span><span class="p">()</span>
<span class="linenos">64</span><span class="w">      </span><span class="p">..</span><span class="n">initialize</span><span class="p">(</span>
<span class="linenos">65</span><span class="w">        </span><span class="n">box</span><span class="p">,</span>
<span class="linenos">66</span><span class="w">        </span><span class="n">groundBody</span><span class="p">,</span>
<span class="linenos">67</span><span class="w">        </span><span class="n">anchor</span><span class="p">,</span>
<span class="linenos">68</span><span class="w">        </span><span class="n">Vector2</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">),</span>
<span class="linenos">69</span><span class="w">      </span><span class="p">)</span>
<span class="linenos">70</span><span class="w">      </span><span class="p">..</span><span class="n">enableLimit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="linenos">71</span><span class="w">      </span><span class="p">..</span><span class="n">lowerTranslation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">halfWidth</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">handleWidth</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span>
<span class="linenos">72</span><span class="w">      </span><span class="p">..</span><span class="n">upperTranslation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">halfWidth</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">handleWidth</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">;</span>
<span class="linenos">73</span>
<span class="linenos">74</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">joint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PrismaticJoint</span><span class="p">(</span><span class="n">prismaticJointDef</span><span class="p">);</span>
<span class="linenos">75</span><span class="w">    </span><span class="n">createJoint</span><span class="p">(</span><span class="n">joint</span><span class="p">);</span>
<span class="linenos">76</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">77</span>
<span class="linenos">78</span><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">createRopeJoint</span><span class="p">(</span><span class="n">Body</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">Body</span><span class="w"> </span><span class="n">second</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">79</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">ropeJointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RopeJointDef</span><span class="p">()</span>
<span class="linenos">80</span><span class="w">      </span><span class="p">..</span><span class="n">bodyA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">first</span>
<span class="linenos">81</span><span class="w">      </span><span class="p">..</span><span class="n">localAnchorA</span><span class="p">.</span><span class="n">setFrom</span><span class="p">(</span><span class="n">first</span><span class="p">.</span><span class="n">getLocalCenter</span><span class="p">())</span>
<span class="linenos">82</span><span class="w">      </span><span class="p">..</span><span class="n">bodyB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">second</span>
<span class="linenos">83</span><span class="w">      </span><span class="p">..</span><span class="n">localAnchorB</span><span class="p">.</span><span class="n">setFrom</span><span class="p">(</span><span class="n">second</span><span class="p">.</span><span class="n">getLocalCenter</span><span class="p">())</span>
<span class="linenos">84</span><span class="w">      </span><span class="p">..</span><span class="n">maxLength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">second</span><span class="p">.</span><span class="n">worldCenter</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">first</span><span class="p">.</span><span class="n">worldCenter</span><span class="p">).</span><span class="n">length</span><span class="p">;</span>
<span class="linenos">85</span>
<span class="linenos">86</span><span class="w">    </span><span class="n">createJoint</span><span class="p">(</span><span class="n">RopeJoint</span><span class="p">(</span><span class="n">ropeJointDef</span><span class="p">));</span>
<span class="linenos">87</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">88</span><span class="p">}</span>
</pre></div>
</div>
</div>
<button class="flutter-app-button code" onclick="open_code_listings(&quot;examples-source-rope_joint&quot;)">Code</button><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bodyA</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyB</span></code>: Connected bodies</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">localAnchorA</span></code>, <code class="docutils literal notranslate"><span class="pre">localAnchorB</span></code>: Optional parameter, anchor point relative to the body’s origin.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxLength</span></code>: The maximum length of the rope. This must be larger than <code class="docutils literal notranslate"><span class="pre">linearSlop</span></code>, or the joint
will have no effect.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The joint assumes that the maximum length doesn’t change during simulation.
See <code class="docutils literal notranslate"><span class="pre">DistanceJoint</span></code> if you want to dynamically control length.</p>
</div>
</section>
<section id="weldjoint">
<h3><code class="docutils literal notranslate"><span class="pre">WeldJoint</span></code><a class="headerlink" href="#weldjoint" title="Link to this heading">¶</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">WeldJoint</span></code> is used to restrict all relative motion between two bodies, effectively joining them
together.</p>
<p><code class="docutils literal notranslate"><span class="pre">WeldJointDef</span></code> requires two bodies that will be connected, and a world anchor:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">final</span><span class="w"> </span><span class="n">weldJointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WeldJointDef</span><span class="p">()</span>
<span class="w">  </span><span class="p">..</span><span class="n">initialize</span><span class="p">(</span><span class="n">bodyA</span><span class="p">,</span><span class="w"> </span><span class="n">bodyB</span><span class="p">,</span><span class="w"> </span><span class="n">anchor</span><span class="p">);</span>

<span class="n">world</span><span class="p">.</span><span class="n">createJoint</span><span class="p">(</span><span class="n">WeldJoint</span><span class="p">(</span><span class="n">weldJointDef</span><span class="p">));</span>
</pre></div>
</div>
<button class="flutter-app-button popup" onclick="run_flutter_app(&quot;/1.12.0/_static/apps/examples/index.html?weld_joint&quot;)">Run</button><div class="flutter-app-code docutils container" id="examples-source-weld_joint">
<div class="filename docutils container">
weld_joint.dart</div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/balls.dart&#39;</span><span class="p">;</span>
<span class="linenos">  2</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:examples/stories/bridge_libraries/flame_forge2d/utils/boxes.dart&#39;</span><span class="p">;</span>
<span class="linenos">  3</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame/components.dart&#39;</span><span class="p">;</span>
<span class="linenos">  4</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame/events.dart&#39;</span><span class="p">;</span>
<span class="linenos">  5</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flame_forge2d/flame_forge2d.dart&#39;</span><span class="p">;</span>
<span class="linenos">  6</span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flutter/material.dart&#39;</span><span class="p">;</span>
<span class="linenos">  7</span>
<span class="linenos">  8</span><span class="kd">class</span><span class="w"> </span><span class="nc">WeldJointExample</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Forge2DGame</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">  9</span><span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;&#39;</span>
<span class="linenos"> 10</span><span class="s1">    This example shows how to use a `WeldJoint`. Tap the screen to add a</span>
<span class="linenos"> 11</span><span class="s1">    ball to test the bridge built using a `WeldJoint`</span>
<span class="linenos"> 12</span><span class="s1">  &#39;&#39;&#39;</span><span class="p">;</span>
<span class="linenos"> 13</span>
<span class="linenos"> 14</span><span class="w">  </span><span class="n">WeldJointExample</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">super</span><span class="p">(</span><span class="nl">world:</span><span class="w"> </span><span class="n">WeldJointWorld</span><span class="p">());</span>
<span class="linenos"> 15</span><span class="p">}</span>
<span class="linenos"> 16</span>
<span class="linenos"> 17</span><span class="kd">class</span><span class="w"> </span><span class="nc">WeldJointWorld</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Forge2DWorld</span>
<span class="linenos"> 18</span><span class="w">    </span><span class="kd">with</span><span class="w"> </span><span class="n">TapCallbacks</span><span class="p">,</span><span class="w"> </span><span class="n">HasGameReference</span><span class="o">&lt;</span><span class="n">Forge2DGame</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 19</span><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">pillarHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20.0</span><span class="p">;</span>
<span class="linenos"> 20</span><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">pillarWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5.0</span><span class="p">;</span>
<span class="linenos"> 21</span>
<span class="linenos"> 22</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos"> 23</span><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">onLoad</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 24</span><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">onLoad</span><span class="p">();</span>
<span class="linenos"> 25</span>
<span class="linenos"> 26</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">leftPillar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Box</span><span class="p">(</span>
<span class="linenos"> 27</span><span class="w">      </span><span class="nl">startPosition:</span><span class="w"> </span><span class="n">game</span><span class="p">.</span><span class="n">screenToWorld</span><span class="p">(</span><span class="n">Vector2</span><span class="p">(</span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="n">game</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">))</span>
<span class="linenos"> 28</span><span class="w">        </span><span class="p">..</span><span class="n">y</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">pillarHeight</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">,</span>
<span class="linenos"> 29</span><span class="w">      </span><span class="nl">width:</span><span class="w"> </span><span class="n">pillarWidth</span><span class="p">,</span>
<span class="linenos"> 30</span><span class="w">      </span><span class="nl">height:</span><span class="w"> </span><span class="n">pillarHeight</span><span class="p">,</span>
<span class="linenos"> 31</span><span class="w">      </span><span class="nl">bodyType:</span><span class="w"> </span><span class="n">BodyType</span><span class="p">.</span><span class="kd">static</span><span class="p">,</span>
<span class="linenos"> 32</span><span class="w">      </span><span class="nl">color:</span><span class="w"> </span><span class="n">Colors</span><span class="p">.</span><span class="n">white</span><span class="p">,</span>
<span class="linenos"> 33</span><span class="w">    </span><span class="p">);</span>
<span class="linenos"> 34</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">rightPillar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Box</span><span class="p">(</span>
<span class="linenos"> 35</span><span class="w">      </span><span class="nl">startPosition:</span><span class="w"> </span><span class="n">game</span><span class="p">.</span><span class="n">screenToWorld</span><span class="p">(</span><span class="n">Vector2</span><span class="p">(</span><span class="n">game</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="n">game</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">))</span>
<span class="linenos"> 36</span><span class="w">        </span><span class="p">..</span><span class="n">y</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">pillarHeight</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">,</span>
<span class="linenos"> 37</span><span class="w">      </span><span class="nl">width:</span><span class="w"> </span><span class="n">pillarWidth</span><span class="p">,</span>
<span class="linenos"> 38</span><span class="w">      </span><span class="nl">height:</span><span class="w"> </span><span class="n">pillarHeight</span><span class="p">,</span>
<span class="linenos"> 39</span><span class="w">      </span><span class="nl">bodyType:</span><span class="w"> </span><span class="n">BodyType</span><span class="p">.</span><span class="kd">static</span><span class="p">,</span>
<span class="linenos"> 40</span><span class="w">      </span><span class="nl">color:</span><span class="w"> </span><span class="n">Colors</span><span class="p">.</span><span class="n">white</span><span class="p">,</span>
<span class="linenos"> 41</span><span class="w">    </span><span class="p">);</span>
<span class="linenos"> 42</span>
<span class="linenos"> 43</span><span class="w">    </span><span class="kd">await</span><span class="w"> </span><span class="n">addAll</span><span class="p">([</span><span class="n">leftPillar</span><span class="p">,</span><span class="w"> </span><span class="n">rightPillar</span><span class="p">]);</span>
<span class="linenos"> 44</span>
<span class="linenos"> 45</span><span class="w">    </span><span class="n">createBridge</span><span class="p">(</span><span class="n">leftPillar</span><span class="p">,</span><span class="w"> </span><span class="n">rightPillar</span><span class="p">);</span>
<span class="linenos"> 46</span><span class="w">  </span><span class="p">}</span>
<span class="linenos"> 47</span>
<span class="linenos"> 48</span><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">createBridge</span><span class="p">(</span>
<span class="linenos"> 49</span><span class="w">    </span><span class="n">Box</span><span class="w"> </span><span class="n">leftPillar</span><span class="p">,</span>
<span class="linenos"> 50</span><span class="w">    </span><span class="n">Box</span><span class="w"> </span><span class="n">rightPillar</span><span class="p">,</span>
<span class="linenos"> 51</span><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 52</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">sectionsCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">;</span>
<span class="linenos"> 53</span><span class="w">    </span><span class="c1">// Vector2.zero is used here since 0,0 is in the middle and 0,0 in the</span>
<span class="linenos"> 54</span><span class="w">    </span><span class="c1">// screen space then gives us the coordinates of the upper left corner in</span>
<span class="linenos"> 55</span><span class="w">    </span><span class="c1">// world space.</span>
<span class="linenos"> 56</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">halfSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">game</span><span class="p">.</span><span class="n">screenToWorld</span><span class="p">(</span><span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">())..</span><span class="n">absolute</span><span class="p">();</span>
<span class="linenos"> 57</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">sectionWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">leftPillar</span><span class="p">.</span><span class="n">center</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">abs</span><span class="p">()</span><span class="w"> </span><span class="o">+</span>
<span class="linenos"> 58</span><span class="w">                </span><span class="n">rightPillar</span><span class="p">.</span><span class="n">center</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">abs</span><span class="p">()</span><span class="w"> </span><span class="o">+</span>
<span class="linenos"> 59</span><span class="w">                </span><span class="n">pillarWidth</span><span class="p">)</span><span class="w"> </span><span class="o">/</span>
<span class="linenos"> 60</span><span class="w">            </span><span class="n">sectionsCount</span><span class="p">)</span>
<span class="linenos"> 61</span><span class="w">        </span><span class="p">.</span><span class="n">ceilToDouble</span><span class="p">();</span>
<span class="linenos"> 62</span><span class="w">    </span><span class="n">Body</span><span class="o">?</span><span class="w"> </span><span class="n">prevSection</span><span class="p">;</span>
<span class="linenos"> 63</span>
<span class="linenos"> 64</span><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">sectionsCount</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 65</span><span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Box</span><span class="p">(</span>
<span class="linenos"> 66</span><span class="w">        </span><span class="nl">startPosition:</span><span class="w"> </span><span class="n">Vector2</span><span class="p">(</span>
<span class="linenos"> 67</span><span class="w">          </span><span class="n">sectionWidth</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">halfSize</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">sectionWidth</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">,</span>
<span class="linenos"> 68</span><span class="w">          </span><span class="n">halfSize</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pillarHeight</span><span class="p">,</span>
<span class="linenos"> 69</span><span class="w">        </span><span class="p">),</span>
<span class="linenos"> 70</span><span class="w">        </span><span class="nl">width:</span><span class="w"> </span><span class="n">sectionWidth</span><span class="p">,</span>
<span class="linenos"> 71</span><span class="w">        </span><span class="nl">height:</span><span class="w"> </span><span class="m">1</span><span class="p">,</span>
<span class="linenos"> 72</span><span class="w">      </span><span class="p">);</span>
<span class="linenos"> 73</span><span class="w">      </span><span class="kd">await</span><span class="w"> </span><span class="n">add</span><span class="p">(</span><span class="n">section</span><span class="p">);</span>
<span class="linenos"> 74</span>
<span class="linenos"> 75</span><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">prevSection</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 76</span><span class="w">        </span><span class="n">createWeldJoint</span><span class="p">(</span>
<span class="linenos"> 77</span><span class="w">          </span><span class="n">prevSection</span><span class="p">,</span>
<span class="linenos"> 78</span><span class="w">          </span><span class="n">section</span><span class="p">.</span><span class="n">body</span><span class="p">,</span>
<span class="linenos"> 79</span><span class="w">          </span><span class="n">Vector2</span><span class="p">(</span>
<span class="linenos"> 80</span><span class="w">            </span><span class="n">sectionWidth</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">halfSize</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">sectionWidth</span><span class="p">,</span>
<span class="linenos"> 81</span><span class="w">            </span><span class="n">halfSize</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pillarHeight</span><span class="p">,</span>
<span class="linenos"> 82</span><span class="w">          </span><span class="p">),</span>
<span class="linenos"> 83</span><span class="w">        </span><span class="p">);</span>
<span class="linenos"> 84</span><span class="w">      </span><span class="p">}</span>
<span class="linenos"> 85</span>
<span class="linenos"> 86</span><span class="w">      </span><span class="n">prevSection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">section</span><span class="p">.</span><span class="n">body</span><span class="p">;</span>
<span class="linenos"> 87</span><span class="w">    </span><span class="p">}</span>
<span class="linenos"> 88</span><span class="w">  </span><span class="p">}</span>
<span class="linenos"> 89</span>
<span class="linenos"> 90</span><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">createWeldJoint</span><span class="p">(</span><span class="n">Body</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">Body</span><span class="w"> </span><span class="n">second</span><span class="p">,</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">anchor</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 91</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">weldJointDef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WeldJointDef</span><span class="p">()..</span><span class="n">initialize</span><span class="p">(</span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">second</span><span class="p">,</span><span class="w"> </span><span class="n">anchor</span><span class="p">);</span>
<span class="linenos"> 92</span>
<span class="linenos"> 93</span><span class="w">    </span><span class="n">createJoint</span><span class="p">(</span><span class="n">WeldJoint</span><span class="p">(</span><span class="n">weldJointDef</span><span class="p">));</span>
<span class="linenos"> 94</span><span class="w">  </span><span class="p">}</span>
<span class="linenos"> 95</span>
<span class="linenos"> 96</span><span class="w">  </span><span class="nd">@override</span>
<span class="linenos"> 97</span><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">onTapDown</span><span class="p">(</span><span class="n">TapDownEvent</span><span class="w"> </span><span class="n">info</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 98</span><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">onTapDown</span><span class="p">(</span><span class="n">info</span><span class="p">);</span>
<span class="linenos"> 99</span><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">ball</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Ball</span><span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="n">localPosition</span><span class="p">,</span><span class="w"> </span><span class="nl">radius:</span><span class="w"> </span><span class="m">5</span><span class="p">);</span>
<span class="linenos">100</span><span class="w">    </span><span class="n">add</span><span class="p">(</span><span class="n">ball</span><span class="p">);</span>
<span class="linenos">101</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">102</span><span class="p">}</span>
</pre></div>
</div>
</div>
<button class="flutter-app-button code" onclick="open_code_listings(&quot;examples-source-weld_joint&quot;)">Code</button><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bodyA</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyB</span></code>: Two bodies that will be connected</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">anchor</span></code>: Anchor point in world coordinates, at which two bodies will be welded together
to 0, the higher the value, the less springy the joint becomes.</p></li>
</ul>
<section id="breakable-bodies-and-weldjoint">
<h4>Breakable Bodies and WeldJoint<a class="headerlink" href="#breakable-bodies-and-weldjoint" title="Link to this heading">¶</a></h4>
<p>Since the Forge2D constraint solver is iterative, joints are somewhat flexible. This means that the
bodies connected by a WeldJoint may bend slightly. If you want to simulate a breakable body, it’s
better to create a single body with multiple fixtures. When the body breaks, you can destroy a
fixture and recreate it on a new body instead of relying on a <code class="docutils literal notranslate"><span class="pre">WeldJoint</span></code>.</p>
</section>
</section>
</section>
</section>


    </div>
    <div class="copyright">
      The content on this page is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0 License</a>,
      and code samples under the <a href="https://raw.githubusercontent.com/flame-engine/flame/main/LICENSE">MIT License</a>.
    </div>
    <div class="prev-next-area">
      <a class="left-prev" id="prev-link" href="forge2d.html" title="previous page">
        <i class="fa fa-angle-left"></i>
        <div class="prev-next-info">
          <p class="prev-next-subtitle">Previous:</p>
          <p class="prev-next-title">Forge2D</p>
        </div>
      </a>
      <div class='expander'></div>
      <a class="right-next" id="next-link" href="../flame_isolate/flame_isolate.html" title="next page">
        <div class="prev-next-info">
          <p class="prev-next-subtitle">Next:</p>
          <p class="prev-next-title">flame_isolate</p>
        </div>
        <i class="fa fa-angle-right"></i>
      </a>
    </div>
  </div>

  <div class="sidebar-right">
    
    <div class="nav-right" role="navigation" aria-label="table of contents">
      <div id='toc-local' class='list-group'>
 <div class='header'><i class='fa fa-list'></i> Contents</div>
  <a href='#built-in-joints' class='list-group-item level-1'>Built-in joints</a>
  <a href='#constantvolumejoint' class='list-group-item level-2'>ConstantVolumeJoint</a>
  <a href='#distancejoint' class='list-group-item level-2'>DistanceJoint</a>
  <a href='#frictionjoint' class='list-group-item level-2'>FrictionJoint</a>
  <a href='#gearjoint' class='list-group-item level-2'>GearJoint</a>
  <a href='#motorjoint' class='list-group-item level-2'>MotorJoint</a>
  <a href='#mousejoint' class='list-group-item level-2'>MouseJoint</a>
  <a href='#prismaticjoint' class='list-group-item level-2'>PrismaticJoint</a>
  <a href='#prismatic-joint-limit' class='list-group-item level-3'>Prismatic Joint Limit</a>
  <a href='#prismatic-joint-motor' class='list-group-item level-3'>Prismatic Joint Motor</a>
  <a href='#pulleyjoint' class='list-group-item level-2'>PulleyJoint</a>
  <a href='#revolutejoint' class='list-group-item level-2'>RevoluteJoint</a>
  <a href='#revolute-joint-limit' class='list-group-item level-3'>Revolute Joint Limit</a>
  <a href='#revolute-joint-motor' class='list-group-item level-3'>Revolute Joint Motor</a>
  <a href='#ropejoint' class='list-group-item level-2'>RopeJoint</a>
  <a href='#weldjoint' class='list-group-item level-2'>WeldJoint</a>
  <a href='#breakable-bodies-and-weldjoint' class='list-group-item level-3'>Breakable Bodies and WeldJoint</a>
</div>

    </div>
  </div>

  <div class="expander"></div>
</div>




</body>
</html>
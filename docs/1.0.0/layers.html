<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Layers &#8212; Flame</title>
  <!-- Stylesheets -->
  <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
  <link rel="stylesheet" type="text/css" href="_static/basic.css" />
  <link rel="stylesheet" type="text/css" href="_static/flutter_app.css" />
  <link rel="stylesheet" type="text/css" href="_static/flames.css" />
  <!-- Scripts -->
  <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
  <script src="_static/jquery.js"></script>
  <script src="_static/underscore.js"></script>
  <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
  <script src="_static/doctools.js"></script>
  <script src="_static/flutter_app.js"></script>
  <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
  <script>mermaid.initialize({startOnLoad:true});</script>
  <script src="_static/versions.js"></script>
  <!--script src="searchindex.js" defer></script-->
  <!-- Links -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,400;0,700;1,400;1,700&display=swap">
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="_static/fontawesome/fa-brands-400.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="_static/fontawesome/fa-solid-900.woff2">
  <link rel="stylesheet" href="_static/fontawesome/all.min.css">
  <link rel="shortcut icon" href="_static/favicon.ico"/>
  <link rel="index" title="Index" href="genindex.html" />
  <link rel="search" title="Search" href="search.html" />
  <link rel="next" title="Util" href="util.html" />
  <link rel="prev" title="Particles" href="particles.html" />
</head>

<body data-spy="scroll" data-target="#toc-local" data-offset="80">

<div class="top-bar">
  <button id="menu-button" class="btn" title="Toggle menu"><i class="fa fa-bars"></i></button>
  <script type="text/javascript">
    jQuery(function(){
      $("#menu-button").click(function() {
        $(this).toggleClass("active");
        $(".sidebar-left-area").toggleClass("active");
      });

      $('div.nav-left li > a:not(:only-child)').wrap('<div class=submenu></div>');
      $('div.nav-left div.submenu').prepend('<a class=arrow>&nbsp;</a>');
      $('div.nav-left div.submenu > a.arrow')
        .click(function() {
          $(this.parentElement.parentElement).toggleClass('current');
        });

      // This function ensures that when navigating to internal targets within the page (such as
      // a section header), those targets will be visible to the user and not obscured by the menu
      // bar at the top of the page.
      function scrollToHashTarget() {
        if (location.hash !== location.oldHash) {
          window.scrollBy(0, -60);
          location.oldHash = location.hash;
        }
      }
      window.location.oldHash = '';
      window.addEventListener('hashchange', scrollToHashTarget);
      scrollToHashTarget();
    });
  </script>

  <a href="index.html" class="logo_image">
    <img src="_static/logo_flame.png">
  </a>

  <div class="highlight-box" role="alert" style="display:none">
    <div>
      <div class="title">highlighted:</div>
      <div class="content" id="highlight-content"></div>
    </div>
    <button type="button" class="close" data-dismiss="alert" aria-label="Dismiss">×</button>
  </div>
  <div class="expander"></div>

  <div class="versions-placeholder"></div>
  <a href="https://discord.com/channels/509714518008528896/516639688581316629" id="discord-button"
     class="btn" title="Flame Discord channel">
    <i class="fab fa-discord"></i>
  </a>
  <a href="https://github.com/flame-engine/flame/" id="github-button" class="btn"
     title="GitHub repository">
    <i class="fab fa-github"></i>
  </a>
</div>

<div class="sidebar-left-area">
  <div class="sidebar-left-bg"></div>
  <div class="sidebar-left">
    <div class="searchbox" role="search">
      <form id="search-form" action="search.html" method="get">
        <i class="icon fa fa-search"></i>
        <input type="search" class="form-control" id="search-input" name="q"
               placeholder="Search the docs..." autocomplete="off" />
      </form>
    </div>
    <div class="nav-left" role="navigation" aria-label="Main">
      <p class="caption" role="heading"><span class="caption-text">Basic concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="structure.html">File structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="game.html">FlameGame</a></li>
<li class="toctree-l1"><a class="reference internal" href="game.html#low-level-game-api">Low-level Game API</a></li>
<li class="toctree-l1"><a class="reference internal" href="game.html#gameloop">GameLoop</a></li>
<li class="toctree-l1"><a class="reference internal" href="game.html#pause-resuming-game-execution">Pause/Resuming game execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="game.html#flutter-widgets-and-game-instances">Flutter Widgets and Game instances</a></li>
<li class="toctree-l1"><a class="reference internal" href="components.html">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="platforms.html">Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="collision_detection.html">Collision detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="effects.html">Effects</a></li>
<li class="toctree-l1"><a class="reference internal" href="camera_and_viewport.html">Camera &amp; Viewport</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Inputs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="gesture-input.html">Gesture input</a></li>
<li class="toctree-l1"><a class="reference internal" href="keyboard-input.html">Keyboard input</a></li>
<li class="toctree-l1"><a class="reference internal" href="other-inputs.html">Other inputs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Audio</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="audio.html">General audio</a></li>
<li class="toctree-l1"><a class="reference internal" href="bgm.html">Background music</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Rendering</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="images.html">Images, sprites and animations</a></li>
<li class="toctree-l1"><a class="reference internal" href="text.html">Text rendering</a></li>
<li class="toctree-l1"><a class="reference internal" href="palette.html">Colors and palette</a></li>
<li class="toctree-l1"><a class="reference internal" href="particles.html">Particles</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Layers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="util.html">Util</a></li>
<li class="toctree-l1"><a class="reference internal" href="widgets.html">Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="forge2d.html">Forge2D</a></li>
<li class="toctree-l1"><a class="reference internal" href="oxygen.html">Oxygen</a></li>
<li class="toctree-l1"><a class="reference internal" href="tiled.html">Tiled</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="splash_screen.html">Splash screen</a></li>
</ul>

    </div>
  </div>
</div>

<div class="main-area">
  <div class="document-wrapper">
    <div class="document" role="main">
      
  <section class="tex2jax_ignore mathjax_ignore" id="layers">
<h1>Layers<a class="headerlink" href="#layers" title="Permalink to this heading">¶</a></h1>
<p>Layers allow you to group rendering by context, as well as allow you to pre-render things. This
enables, for example, rendering parts of your game that don’t change much in memory, like a
background. By doing this, you’ll free processing power for more dynamic content that needs to be
rendered every game tick.</p>
<p>There are two types of layers on Flame:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DynamicLayer</span></code>: For things that are moving or changing.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PreRenderedLayer</span></code>: For things that are static.</p></li>
</ul>
<section id="dynamiclayer">
<h2>DynamicLayer<a class="headerlink" href="#dynamiclayer" title="Permalink to this heading">¶</a></h2>
<p>Dynamic layers are layers that are rendered every time that they are drawn on the canvas. As the
name suggests, it is meant for dynamic content and is most useful for grouping rendering of objects
that have the same context.</p>
<p>Usage example:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="nc">GameLayer</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">DynamicLayer</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">MyGame</span><span class="w"> </span><span class="n">game</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="n">GameLayer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">game</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="nd">@override</span><span class="w"></span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">drawLayer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">game</span><span class="p">.</span><span class="n">playerSprite</span><span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="w"></span>
<span class="w">      </span><span class="n">canvas</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nl">position:</span><span class="w"> </span><span class="n">game</span><span class="p">.</span><span class="n">playerPosition</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">game</span><span class="p">.</span><span class="n">enemySprite</span><span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="w"></span>
<span class="w">      </span><span class="n">canvas</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nl">position:</span><span class="w"> </span><span class="n">game</span><span class="p">.</span><span class="n">enemyPosition</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">class</span><span class="w"> </span><span class="nc">MyGame</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Game</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Other methods omitted...</span><span class="w"></span>

<span class="w">  </span><span class="nd">@override</span><span class="w"></span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">render</span><span class="p">(</span><span class="n">Canvas</span><span class="w"> </span><span class="n">canvas</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">gameLayer</span><span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="n">canvas</span><span class="p">);</span><span class="w"> </span><span class="c1">// x and y can be provided as optional position arguments</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="prerenderedlayer">
<h2>PreRenderedLayer<a class="headerlink" href="#prerenderedlayer" title="Permalink to this heading">¶</a></h2>
<p>Pre-rendered layers are rendered only once, cached in memory and then just
replicated on the game canvas afterwards. They are useful for caching content that doesn’t change
during the game, like a background for example.</p>
<p>Usage example:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="nc">BackgroundLayer</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">PreRenderedLayer</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">Sprite</span><span class="w"> </span><span class="n">sprite</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="n">BackgroundLayer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">sprite</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="nd">@override</span><span class="w"></span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">drawLayer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">sprite</span><span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="w"></span>
<span class="w">      </span><span class="n">canvas</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nl">position:</span><span class="w"> </span><span class="n">Vector2</span><span class="p">(</span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="m">200</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">class</span><span class="w"> </span><span class="nc">MyGame</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Game</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Other methods omitted...</span><span class="w"></span>

<span class="w">  </span><span class="nd">@override</span><span class="w"></span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">render</span><span class="p">(</span><span class="n">Canvas</span><span class="w"> </span><span class="n">canvas</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">backgroundLayer</span><span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="n">canvas</span><span class="p">);</span><span class="w"> </span><span class="c1">// x and y can be provided as optional position arguments</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="layer-processors">
<h2>Layer Processors<a class="headerlink" href="#layer-processors" title="Permalink to this heading">¶</a></h2>
<p>Flame also provides a way to add processors on your layer, which are ways to add effects on the
entire layer. At the moment, out of the box, only the <code class="docutils literal notranslate"><span class="pre">ShadowProcessor</span></code> is available, this processor
renders a back drop shadow on your layer.</p>
<p>To add processors to your layer, just add them to the layer <code class="docutils literal notranslate"><span class="pre">preProcessors</span></code> or <code class="docutils literal notranslate"><span class="pre">postProcessors</span></code>
list. For example:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="c1">// Works the same for both DynamicLayer and PreRenderedLayer</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nc">BackgroundLayer</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">PreRenderedLayer</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">Sprite</span><span class="w"> </span><span class="n">sprite</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="n">BackgroundLayer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">sprite</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">preProcessors</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">ShadowProcessor</span><span class="p">());</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="nd">@override</span><span class="w"></span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">drawLayer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* omitted */</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="c1">// ...</span><span class="w"></span>
</pre></div>
</div>
<p>Custom processors can be created by extending the <code class="docutils literal notranslate"><span class="pre">LayerProcessor</span></code> class.</p>
<p>You can check a working example of layers
<a class="reference external" href="https://github.com/flame-engine/flame/tree/main/examples/lib/stories/rendering/layers.dart">here</a>.</p>
</section>
</section>


    </div>
    <div class="copyright">
      The content on this page is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0 License</a>,
      and code samples under the <a href="https://raw.githubusercontent.com/flame-engine/flame/main/LICENSE">MIT License</a>.
    </div>
    <div class="prev-next-area">
      <a class="left-prev" id="prev-link" href="particles.html" title="previous page">
        <i class="fa fa-angle-left"></i>
        <div class="prev-next-info">
          <p class="prev-next-subtitle">Previous:</p>
          <p class="prev-next-title">Particles</p>
        </div>
      </a>
      <div class='expander'></div>
      <a class="right-next" id="next-link" href="util.html" title="next page">
        <div class="prev-next-info">
          <p class="prev-next-subtitle">Next:</p>
          <p class="prev-next-title">Util</p>
        </div>
        <i class="fa fa-angle-right"></i>
      </a>
    </div>
  </div>

  <div class="sidebar-right">
    
    <div class="nav-right" role="navigation" aria-label="table of contents">
      <div id='toc-local' class='list-group'>
 <div class='header'><i class='fa fa-list'></i> Contents</div>
  <a href='#dynamiclayer' class='list-group-item level-1'>DynamicLayer</a>
  <a href='#prerenderedlayer' class='list-group-item level-1'>PreRenderedLayer</a>
  <a href='#layer-processors' class='list-group-item level-1'>Layer Processors</a>
</div>

    </div>
  </div>

  <div class="expander"></div>
</div>




</body>
</html>
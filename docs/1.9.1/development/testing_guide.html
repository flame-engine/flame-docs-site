<!DOCTYPE html>
<html lang="en">
<head>
<meta name="robots" content="noindex">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Writing tests &#8212; Flame</title>
  <!-- Stylesheets -->
  <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b20cc3f5" />
  <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=eeb27264" />
  <link rel="stylesheet" type="text/css" href="../_static/dart_domain.css" />
  <link rel="stylesheet" type="text/css" href="../_static/flutter_app.css?v=6984c178" />
  <link rel="stylesheet" type="text/css" href="../_static/package.css?v=7889e545" />
  <link rel="stylesheet" type="text/css" href="../_static/yarn_lexer.css?v=932ca0ec" />
  <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
  <link rel="stylesheet" type="text/css" href="../_static/flames.css?v=37920019" />
  <link rel="stylesheet" type="text/css" href="../_static/copy-button.css?v=deecb4da" />
  <!-- Scripts -->
  <script src="../_static/jquery.js?v=5d32c60e"></script>
  <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
  <script src="../_static/documentation_options.js?v=5929fcd5"></script>
  <script src="../_static/doctools.js?v=0b60eaae"></script>
  <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
  <script src="../_static/flutter_app.js?v=3619378f"></script>
  <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
  <script src="../_static/copybutton.js?v=f281be69"></script>
  <script src="../_static/versions.js?v=58484017"></script>
  <script src="../_static/menu-expand.js?v=8e297497"></script>
  <!--script src="searchindex.js" defer></script-->
  <!-- Links -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,400;0,700;1,400;1,700&display=swap">
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/fontawesome/fa-brands-400.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/fontawesome/fa-solid-900.woff2">
  <link rel="stylesheet" href="../_static/fontawesome/all.min.css">
  <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <link rel="index" title="Index" href="../genindex.html" />
  <link rel="search" title="Search" href="../search.html" />
  <link rel="next" title="Resources" href="../resources/resources.html" />
  <link rel="prev" title="Flame Style Guide" href="style_guide.html" />
</head>

<body data-spy="scroll" data-target="#toc-local" data-offset="80">

<div class="top-bar">
  <button id="menu-button" class="btn" title="Toggle menu"><i class="fa fa-bars"></i></button>
  <script type="text/javascript">
    jQuery(function(){
      $("#menu-button").click(function() {
        $(this).toggleClass("active");
        $(".sidebar-left-area").toggleClass("active");
      });

      $('div.nav-left li > a:not(:only-child)').wrap('<div class=submenu></div>');
      $('div.nav-left div.submenu').prepend('<a class=arrow>&nbsp;</a>');
      $('div.nav-left div.submenu > a.arrow')
        .click(function() {
          $(this.parentElement.parentElement).toggleClass('current');
        });

      // This function ensures that when navigating to internal targets within the page (such as
      // a section header), those targets will be visible to the user and not obscured by the menu
      // bar at the top of the page.
      function scrollToHashTarget() {
        if (location.hash !== location.oldHash) {
          window.scrollBy(0, -60);
          location.oldHash = location.hash;
        }
      }
      window.location.oldHash = '';
      window.addEventListener('hashchange', scrollToHashTarget);
      scrollToHashTarget();
    });
  </script>

  <a href="../index.html" class="logo_image">
    <img src="../_static/logo_flame.png">
  </a>  
  <div class="highlight-box" role="alert" style="display:none">
    <div>
      <div class="title">highlighted:</div>
      <div class="content" id="highlight-content"></div>
    </div>
    <button type="button" class="close" data-dismiss="alert" aria-label="Dismiss">×</button>
  </div>
  <div class="expander"></div>

  <div class="versions-placeholder"></div>
  <a href="https://discord.com/invite/pxrBmy4" id="discord-button" class="btn"
     title="Blue Fire Discord server">
    <i class="fab fa-discord"></i>
  </a>
  <a href="https://github.com/flame-engine/flame/" id="github-button" class="btn"
     title="GitHub repository">
    <i class="fab fa-github"></i>
  </a>
</div>

<div class="sidebar-left-area">
  <div class="sidebar-left-bg"></div>
  <div class="sidebar-left">
    <div class="searchbox" role="search">
      <form id="search-form" action="../search.html" method="get">
        <i class="icon fa fa-search"></i>
        <input type="search" class="form-control" id="search-input" name="q"
               placeholder="Search the docs..." autocomplete="off" />
      </form>
    </div>
    <div class="nav-left" role="navigation" aria-label="Main">
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../flame/flame.html">Flame</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../flame/structure.html">File Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flame/game_widget.html">Game Widget</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flame/game.html">Game Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flame/components.html">Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flame/router.html">Router</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flame/platforms.html">Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flame/collision_detection.html">Collision Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flame/effects.html">Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flame/camera_component.html">Camera Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flame/inputs/inputs.html">Inputs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../flame/inputs/drag_events.html">Drag Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flame/inputs/gesture_input.html">Gesture Input</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flame/inputs/keyboard_input.html">Keyboard Input</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flame/inputs/other_inputs.html">Other Inputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flame/inputs/tap_events.html">Tap Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flame/inputs/hardware_keyboard_detector.html">HardwareKeyboardDetector</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../flame/rendering/rendering.html">Rendering</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../flame/rendering/palette.html">Colors and Palette</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flame/rendering/decorators.html">Decorators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flame/rendering/images.html">Images, Sprites and Animations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flame/rendering/layers.html">Layers and Snapshots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flame/rendering/particles.html">Particles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flame/rendering/text_rendering.html">Text Rendering</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../flame/layout/layout.html">Layout</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../flame/layout/align_component.html">AlignComponent</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../flame/overlays.html">Overlays</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flame/other/other.html">Other</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../flame/other/debug.html">Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flame/other/util.html">Utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flame/other/widgets.html">Widgets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../flame/camera_and_viewport.html">Camera &amp; Viewport</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bridge_packages/bridge_packages.html">Bridge Packages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../bridge_packages/flame_audio/flame_audio.html">flame_audio</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bridge_packages/flame_audio/audio.html">General audio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bridge_packages/flame_audio/bgm.html">Background music</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bridge_packages/flame_audio/audio_pool.html">AudioPool</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bridge_packages/flame_bloc/flame_bloc.html">flame_bloc</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bridge_packages/flame_bloc/bloc.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bridge_packages/flame_bloc/bloc_components.html">Components</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bridge_packages/flame_fire_atlas/flame_fire_atlas.html">flame_fire_atlas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bridge_packages/flame_fire_atlas/fire_atlas.html">Overview</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bridge_packages/flame_forge2d/flame_forge2d.html">flame_forge2d</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bridge_packages/flame_forge2d/forge2d.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bridge_packages/flame_forge2d/joints.html">Joints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bridge_packages/flame_isolate/flame_isolate.html">flame_isolate</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bridge_packages/flame_isolate/isolate.html">Overview</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bridge_packages/flame_lottie/flame_lottie.html">flame_lottie</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bridge_packages/flame_network_assets/flame_network_assets.html">flame_network_assets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bridge_packages/flame_oxygen/flame_oxygen.html">flame_oxygen</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bridge_packages/flame_rive/flame_rive.html">flame_rive</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bridge_packages/flame_rive/rive.html">Overview</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bridge_packages/flame_splash_screen/flame_splash_screen.html">flame_splash_screen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bridge_packages/flame_spine/flame_spine.html">flame_spine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bridge_packages/flame_svg/flame_svg.html">flame_svg</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bridge_packages/flame_svg/svg.html">Overview</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bridge_packages/flame_tiled/flame_tiled.html">flame_tiled</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bridge_packages/flame_tiled/tiled.html">Tiled</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bridge_packages/flame_tiled/layers.html">Layers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../other_modules/other_modules.html">Other Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../other_modules/jenny/index.html">jenny</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../other_modules/jenny/language/language.html">YarnSpinner language</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../other_modules/jenny/language/nodes.html">Nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../other_modules/jenny/language/lines.html">Lines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../other_modules/jenny/language/options.html">Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../other_modules/jenny/language/commands/commands.html">Commands</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../other_modules/jenny/language/commands/character.html">&lt;&lt;character&gt;&gt;</a></li>
<li class="toctree-l5"><a class="reference internal" href="../other_modules/jenny/language/commands/declare.html">&lt;&lt;declare&gt;&gt;</a></li>
<li class="toctree-l5"><a class="reference internal" href="../other_modules/jenny/language/commands/if.html">&lt;&lt;if&gt;&gt;</a></li>
<li class="toctree-l5"><a class="reference internal" href="../other_modules/jenny/language/commands/jump.html">&lt;&lt;jump&gt;&gt;</a></li>
<li class="toctree-l5"><a class="reference internal" href="../other_modules/jenny/language/commands/local.html">&lt;&lt;local&gt;&gt;</a></li>
<li class="toctree-l5"><a class="reference internal" href="../other_modules/jenny/language/commands/set.html">&lt;&lt;set&gt;&gt;</a></li>
<li class="toctree-l5"><a class="reference internal" href="../other_modules/jenny/language/commands/stop.html">&lt;&lt;stop&gt;&gt;</a></li>
<li class="toctree-l5"><a class="reference internal" href="../other_modules/jenny/language/commands/visit.html">&lt;&lt;visit&gt;&gt;</a></li>
<li class="toctree-l5"><a class="reference internal" href="../other_modules/jenny/language/commands/wait.html">&lt;&lt;wait&gt;&gt;</a></li>
<li class="toctree-l5"><a class="reference internal" href="../other_modules/jenny/language/commands/user_defined_commands.html">User-defined commands</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../other_modules/jenny/language/expressions/expressions.html">Expressions</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../other_modules/jenny/language/expressions/variables.html">Variables</a></li>
<li class="toctree-l5"><a class="reference internal" href="../other_modules/jenny/language/expressions/operators.html">Operators</a></li>
<li class="toctree-l5"><a class="reference internal" href="../other_modules/jenny/language/expressions/functions/functions.html">Functions</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../other_modules/jenny/language/expressions/functions/random.html">Random functions</a></li>
<li class="toctree-l6"><a class="reference internal" href="../other_modules/jenny/language/expressions/functions/numeric.html">Numeric functions</a></li>
<li class="toctree-l6"><a class="reference internal" href="../other_modules/jenny/language/expressions/functions/type.html">Type conversion functions</a></li>
<li class="toctree-l6"><a class="reference internal" href="../other_modules/jenny/language/expressions/functions/misc.html">Miscellaneous functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../other_modules/jenny/language/markup.html">Markup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../other_modules/jenny/runtime/index.html">Jenny API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../other_modules/jenny/runtime/character.html">Character</a></li>
<li class="toctree-l4"><a class="reference internal" href="../other_modules/jenny/runtime/character_storage.html">CharacterStorage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../other_modules/jenny/runtime/command_storage.html">CommandStorage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../other_modules/jenny/runtime/dialogue_choice.html">DialogueChoice</a></li>
<li class="toctree-l4"><a class="reference internal" href="../other_modules/jenny/runtime/dialogue_line.html">DialogueLine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../other_modules/jenny/runtime/dialogue_option.html">DialogueOption</a></li>
<li class="toctree-l4"><a class="reference internal" href="../other_modules/jenny/runtime/dialogue_runner.html">DialogueRunner</a></li>
<li class="toctree-l4"><a class="reference internal" href="../other_modules/jenny/runtime/dialogue_view.html">DialogueView</a></li>
<li class="toctree-l4"><a class="reference internal" href="../other_modules/jenny/runtime/function_storage.html">FunctionStorage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../other_modules/jenny/runtime/markup_attribute.html">MarkupAttribute</a></li>
<li class="toctree-l4"><a class="reference internal" href="../other_modules/jenny/runtime/node.html">Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="../other_modules/jenny/runtime/user_defined_command.html">UserDefinedCommand</a></li>
<li class="toctree-l4"><a class="reference internal" href="../other_modules/jenny/runtime/variable_storage.html">VariableStorage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../other_modules/jenny/runtime/yarn_project.html">YarnProject</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../other_modules/oxygen/oxygen.html">oxygen</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../other_modules/oxygen/components.html">Components</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/bare_flame_game.html">Bare Flame game</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/klondike/klondike.html">Klondike</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/klondike/step1.html">1. Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/klondike/step2.html">2. Scaffolding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/klondike/step3.html">3. Cards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/klondike/step4.html">4. Gameplay</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/klondike/tbc.html">[To be continued]...</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/platformer/platformer.html">Ember Quest</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/platformer/step_1.html">1. Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/platformer/step_2.html">2. Start Coding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/platformer/step_3.html">3. Building the World</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/platformer/step_4.html">4. Adding the Remaining Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/platformer/step_5.html">5. Controlling Movement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/platformer/step_6.html">6. Adding the HUD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/platformer/step_7.html">7. Adding Menus</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/space_shooter/space_shooter.html">Space Shooter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/space_shooter/step_1.html">1. Getting Started</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/space_shooter/step_2.html">2. Controlling the player and adding some graphics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="development.html">Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="documentation.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="style_guide.html">Style Guide</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Tests Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../resources/resources.html">Resources</a><ul>
<li class="toctree-l2"><a class="reference external" href="https://pub.dev/documentation/flame/1.9.1/">Flame API</a></li>
<li class="toctree-l2"><a class="reference external" href="https://examples.flame-engine.org/#/">Flame Examples</a></li>
</ul>
</li>
</ul>

    </div>
  </div>
</div>

<div class="main-area">
  <div class="document-wrapper">
    <div class="warning hidden" id="version-warning">
      <p><strong>Warning:</strong> you are currently viewing the docs for an older
      version <span class="version"></span> of Flame.</p>
      <p>Please <a href="/">click here</a> to go see the documentation for the latest
      released version.</p>
    </div>
    <div class="document" role="main">
      
  <section class="tex2jax_ignore mathjax_ignore" id="writing-tests">
<h1>Writing tests<a class="headerlink" href="#writing-tests" title="Link to this heading">¶</a></h1>
<ul>
<li><p>All new functionality must be tested, if at all possible. When fixing a bug, tests must be added
to ensure that this bug would not reappear in the future.</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">melos</span> <span class="pre">run</span> <span class="pre">coverage</span></code> to execute all tests in the “coverage” mode. The results will be saved
in the <code class="docutils literal notranslate"><span class="pre">coverage/index.html</span></code> file, which can be opened in a browser. Try to achieve 100% coverage
for any new functionality added.</p></li>
<li><p>Every source file should have a corresponding test file, with the <code class="docutils literal notranslate"><span class="pre">_test</span></code> suffix. For example,
if you’re making a <code class="docutils literal notranslate"><span class="pre">SpookyEffect</span></code> and the source file is <code class="docutils literal notranslate"><span class="pre">src/effects/spooky_effect.dart</span></code>, then
the test file should be <code class="docutils literal notranslate"><span class="pre">test/effects/spooky_effect_test.dart</span></code> mirroring the source directory.</p></li>
<li><p>The test file should contain a <code class="docutils literal notranslate"><span class="pre">main()</span></code> function with a single <code class="docutils literal notranslate"><span class="pre">group()</span></code> whose name matches the
name of the class being tested. If the source file contains multiple public classes, then each of
them should have its own group. For example:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;SpookyEffect&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// tests here</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>For a larger class, multiple groups can be created inside the top-level group, allowing to
navigate the test suite easier. The names of the nested groups should be capitalized.</p></li>
<li><p>The names of the individual tests should normally start with a lowercase.</p></li>
<li><p>Often, you would need to define multiple helper classes to run the tests. Such classes should be
private (start with an underscore), and placed at the end of the file. The reason for this is that
whenever some test breaks, the first thing one needs to do is to go into the test file and run all
the tests. Having the <code class="docutils literal notranslate"><span class="pre">main()</span></code> function at the top of the file makes this process much easier.</p></li>
</ul>
<section id="types-of-tests">
<h2>Types of tests<a class="headerlink" href="#types-of-tests" title="Link to this heading">¶</a></h2>
<section id="simple-tests">
<h3>Simple tests<a class="headerlink" href="#simple-tests" title="Link to this heading">¶</a></h3>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">test</span><span class="p">(</span><span class="s1">&#39;the name of the test&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">expect</span><span class="p">(...);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>This is the simplest kind of test available, and also the fastest. Use these tests for checking
some classes/methods that can function in isolation from the rest of the Flame framework.</p>
</section>
<section id="flamegame-tests">
<h3>FlameGame tests<a class="headerlink" href="#flamegame-tests" title="Link to this heading">¶</a></h3>
<p>It is very common to want to have a <code class="docutils literal notranslate"><span class="pre">FlameGame</span></code> instance inside a test, so that you can add some
components to it and verify various behaviors. The following approach is recommended:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">testWithFlameGame</span><span class="p">(</span><span class="s1">&#39;the name of the test&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">game</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">game</span><span class="p">.</span><span class="n">add</span><span class="p">(...);</span>
<span class="w">  </span><span class="kd">await</span><span class="w"> </span><span class="n">game</span><span class="p">.</span><span class="n">ready</span><span class="p">();</span>

<span class="w">  </span><span class="n">expect</span><span class="p">(...);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Here the <code class="docutils literal notranslate"><span class="pre">game</span></code> instance that is passed to the test body is a fully initialized game that behaves
as if it was mounted to a <code class="docutils literal notranslate"><span class="pre">GameWidget</span></code>. The <code class="docutils literal notranslate"><span class="pre">game.ready()</span></code> method waits until all the scheduled
components are loaded and mounted to the component tree.</p>
<p>The time within the <code class="docutils literal notranslate"><span class="pre">game</span></code> can be advanced with <code class="docutils literal notranslate"><span class="pre">game.update(dt)</span></code>.</p>
<p>If you need to have a custom game inside this test (say, a game with some mixin), then use</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">testWithGame</span><span class="o">&lt;</span><span class="n">_MyGame</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">  </span><span class="s1">&#39;the name of the test&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="n">_MyGame</span><span class="p">.</span><span class="k">new</span><span class="p">,</span>
<span class="w">  </span><span class="p">(</span><span class="n">game</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// test body...</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">);</span>
</pre></div>
</div>
</section>
<section id="widget-tests">
<h3>Widget tests<a class="headerlink" href="#widget-tests" title="Link to this heading">¶</a></h3>
<p>Sometimes having a “naked” <code class="docutils literal notranslate"><span class="pre">FlameGame</span></code> is insufficient, and you want to have access to the Flutter
infrastructure as well. That is, to have a game mounted into a real <code class="docutils literal notranslate"><span class="pre">GameWidget</span></code> embedded into an
actual Flutter framework. In such cases, use</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">testWidgets</span><span class="p">(</span><span class="s1">&#39;test name&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">tester</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">game</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_MyGame</span><span class="p">();</span>
<span class="w">  </span><span class="kd">await</span><span class="w"> </span><span class="n">tester</span><span class="p">.</span><span class="n">pumpWidget</span><span class="p">(</span><span class="n">GameWidget</span><span class="p">(</span><span class="nl">game:</span><span class="w"> </span><span class="n">game</span><span class="p">));</span>
<span class="w">  </span><span class="kd">await</span><span class="w"> </span><span class="n">tester</span><span class="p">.</span><span class="n">pump</span><span class="p">();</span>
<span class="w">  </span><span class="kd">await</span><span class="w"> </span><span class="n">tester</span><span class="p">.</span><span class="n">pump</span><span class="p">();</span>

<span class="w">  </span><span class="c1">// At this point the game is fully initialized, and you can run your checks</span>
<span class="w">  </span><span class="c1">// against it.</span>
<span class="w">  </span><span class="n">expect</span><span class="p">(...);</span>

<span class="w">  </span><span class="c1">// Equivalent to game.update(0)</span>
<span class="w">  </span><span class="kd">await</span><span class="w"> </span><span class="n">tester</span><span class="p">.</span><span class="n">pump</span><span class="p">();</span>

<span class="w">  </span><span class="c1">// Advances in-game time by 20 milliseconds</span>
<span class="w">  </span><span class="kd">await</span><span class="w"> </span><span class="n">tester</span><span class="p">.</span><span class="n">pump</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Duration</span><span class="p">(</span><span class="nl">milliseconds:</span><span class="w"> </span><span class="m">20</span><span class="p">));</span>
<span class="p">});</span>
</pre></div>
</div>
<p>There are some additional methods available on the <code class="docutils literal notranslate"><span class="pre">tester</span></code> controller, for example in order to
simulate taps, or drags, or key presses.</p>
</section>
<section id="golden-tests">
<h3>Golden tests<a class="headerlink" href="#golden-tests" title="Link to this heading">¶</a></h3>
<p>These tests verify that things render as intended. The process of creating a golden test is
simple:</p>
<ol class="arabic">
<li><p>Write the test, using the following template:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">testGolden</span><span class="p">(</span>
<span class="w">  </span><span class="s1">&#39;the name of the test&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="p">(</span><span class="n">game</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="c1">// Set up the game by adding the necessary components</span>
<span class="w">     </span><span class="c1">// You can add `expect()` checks here too, if you want to</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nl">size:</span><span class="w"> </span><span class="n">Vector2</span><span class="p">(</span><span class="m">300</span><span class="p">,</span><span class="w"> </span><span class="m">200</span><span class="p">),</span>
<span class="w">  </span><span class="nl">goldenFile:</span><span class="w"> </span><span class="s1">&#39;.../_goldens/my_test_file.png&#39;</span><span class="p">,</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Here the <code class="docutils literal notranslate"><span class="pre">size</span></code> parameter determines the size of the game canvas and of the output image. The
<code class="docutils literal notranslate"><span class="pre">goldenFile</span></code> parameter is the name of the file where you want to store the “golden” results. This
should be a relative path to the <code class="docutils literal notranslate"><span class="pre">test/_goldens</span></code> directory, starting from your test file.</p>
</li>
<li><p>Run</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>flutter<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--update-goldens
</pre></div>
</div>
<p>this would create the golden file for the first time. Open the file to verify that it renders
exactly as you intended. If not, then delete the file and go back to step 1.</p>
</li>
<li><p>Subsequent runs of <code class="docutils literal notranslate"><span class="pre">flutter</span> <span class="pre">test</span></code> will check whether the output of the golden test matches the
saved golden file. If not, Flutter will save the image-diff files into the <code class="docutils literal notranslate"><span class="pre">failures/</span></code> directory
where your test is located.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Avoid using text in your golden tests – it does not render reliably across
different platforms, due to font discrepancies and differences in
anti-aliasing algorithms.</p>
</div>
</section>
<section id="random-tests">
<h3>Random tests<a class="headerlink" href="#random-tests" title="Link to this heading">¶</a></h3>
<p>These are the tests that use a random number generator in order to construct a randomized input and
then check its correctness. Use as follows:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">testRandom</span><span class="p">(</span><span class="s1">&#39;test name&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">Random</span><span class="w"> </span><span class="n">random</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Use [random] to generate random input</span>
<span class="p">});</span>
</pre></div>
</div>
<p>You can add <code class="docutils literal notranslate"><span class="pre">repeatCount:</span> <span class="pre">1000</span></code> parameter to run this test the specified number of times, each one
with a different seed. It is useful to run a high <code class="docutils literal notranslate"><span class="pre">repeatCount</span></code> when developing the test, to ensure
that it doesn’t break. However, when submitting the test to the main repository, avoid repeatCounts
higher than 10.</p>
<p>If the test breaks at some particular seed, then that seed will be shown in the test output. Add it
as the <code class="docutils literal notranslate"><span class="pre">seed:</span> <span class="pre">NNN</span></code> parameter to your test, and you’ll be able to run it for the same seed as long
as you need until the test is fixed. Do not leave the <code class="docutils literal notranslate"><span class="pre">seed:</span></code> parameter when submitting your code,
as it defeats the purpose of having the test randomized.</p>
</section>
</section>
</section>


    </div>
    <div class="copyright">
      The content on this page is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0 License</a>,
      and code samples under the <a href="https://raw.githubusercontent.com/flame-engine/flame/main/LICENSE">MIT License</a>.
    </div>
    <div class="prev-next-area">
      <a class="left-prev" id="prev-link" href="style_guide.html" title="previous page">
        <i class="fa fa-angle-left"></i>
        <div class="prev-next-info">
          <p class="prev-next-subtitle">Previous:</p>
          <p class="prev-next-title">Flame Style Guide</p>
        </div>
      </a>
      <div class='expander'></div>
      <a class="right-next" id="next-link" href="../resources/resources.html" title="next page">
        <div class="prev-next-info">
          <p class="prev-next-subtitle">Next:</p>
          <p class="prev-next-title">Resources</p>
        </div>
        <i class="fa fa-angle-right"></i>
      </a>
    </div>
  </div>

  <div class="sidebar-right">
    
    <div class="nav-right" role="navigation" aria-label="table of contents">
      <div id='toc-local' class='list-group'>
 <div class='header'><i class='fa fa-list'></i> Contents</div>
  <a href='#types-of-tests' class='list-group-item level-1'>Types of tests</a>
  <a href='#simple-tests' class='list-group-item level-2'>Simple tests</a>
  <a href='#flamegame-tests' class='list-group-item level-2'>FlameGame tests</a>
  <a href='#widget-tests' class='list-group-item level-2'>Widget tests</a>
  <a href='#golden-tests' class='list-group-item level-2'>Golden tests</a>
  <a href='#random-tests' class='list-group-item level-2'>Random tests</a>
</div>

    </div>
  </div>

  <div class="expander"></div>
</div>




</body>
</html>